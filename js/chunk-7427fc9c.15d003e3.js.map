{"version":3,"sources":["webpack:///./node_modules/echarts/lib/component/tooltip.js","webpack:///./node_modules/echarts/lib/component/helper/roamHelper.js","webpack:///./node_modules/echarts/lib/data/Tree.js","webpack:///./node_modules/echarts/lib/component/tooltip/TooltipContent.js","webpack:///./node_modules/echarts/lib/component/axisPointer/findPointFromSeries.js","webpack:///./node_modules/echarts/lib/chart/helper/Symbol.js","webpack:///./node_modules/echarts/lib/component/axisPointer/globalListener.js","webpack:///./node_modules/echarts/lib/chart/tree/TreeSeries.js","webpack:///./node_modules/echarts/lib/chart/tree/layoutHelper.js","webpack:///./node_modules/echarts/lib/data/helper/linkList.js","webpack:///./node_modules/echarts/lib/component/tooltip/TooltipView.js","webpack:///./node_modules/echarts/lib/component/axisPointer/AxisPointerModel.js","webpack:///./node_modules/echarts/lib/component/helper/RoamController.js","webpack:///./node_modules/echarts/lib/component/axisPointer/CartesianAxisPointer.js","webpack:///./node_modules/echarts/lib/coord/View.js","webpack:///./node_modules/echarts/lib/chart/tree/TreeView.js","webpack:///./node_modules/echarts/lib/chart/tree/traversalHelper.js","webpack:///./node_modules/echarts/lib/visual/symbol.js","webpack:///./node_modules/echarts/lib/component/tooltip/TooltipRichContent.js","webpack:///./node_modules/echarts/lib/component/helper/interactionMutex.js","webpack:///./node_modules/echarts/lib/component/tooltip/TooltipModel.js","webpack:///./node_modules/echarts/lib/chart/tree/treeAction.js","webpack:///./node_modules/echarts/lib/component/helper/cursorHelper.js","webpack:///./node_modules/echarts/lib/chart/tree/treeLayout.js","webpack:///./node_modules/echarts/lib/component/axisPointer.js","webpack:///./node_modules/echarts/lib/component/axisPointer/AxisPointerView.js","webpack:///./node_modules/echarts/lib/action/roamHelper.js","webpack:///./node_modules/echarts/lib/component/axisPointer/BaseAxisPointer.js","webpack:///./node_modules/echarts/lib/component/axisPointer/axisTrigger.js","webpack:///./node_modules/echarts/lib/chart/tree.js","webpack:///./node_modules/echarts/lib/component/axisPointer/viewHelper.js"],"names":["echarts","registerAction","type","event","update","updateViewOnPan","controllerHost","dx","dy","target","pos","position","dirty","updateViewOnZoom","zoomDelta","zoomX","zoomY","zoomLimit","scale","newZoom","zoom","zoomMin","min","zoomMax","max","Infinity","Math","zoomScale","exports","zrUtil","Model","linkList","List","createDimensions","TreeNode","name","hostTree","this","depth","height","parentNode","dataIndex","children","viewChildren","Tree","hostModel","levelOptions","root","data","_nodes","levelModels","map","levelDefine","ecModel","addChild","child","node","push","prototype","constructor","isRemoved","eachNode","options","cb","context","isString","order","suppressVisitSub","attr","call","i","length","updateDepthAndHeight","getNodeById","id","getId","len","res","contains","getAncestors","includeSelf","ancestors","reverse","getValue","dimension","get","getDimension","setLayout","layout","merge","setItemLayout","getLayout","getItemLayout","getModel","path","itemModel","getItemModel","levelModel","getLevelModel","setVisual","key","value","setItemVisual","getVisual","ignoreParent","getItemVisual","getRawIndex","isAncestorOf","parent","isDescendantOf","getNodeByDataIndex","rawIndex","getNodeByName","nodes","count","clearLayouts","clearItemLayouts","createTree","dataRoot","treeOptions","beforeLink","tree","levels","listData","dimMax","buildHierarchy","dataNode","isArray","dimensionsInfo","coordDimensions","dimensionsCount","list","initData","mainData","struct","structAttr","_default","module","zrColor","eventUtil","domUtil","env","formatUtil","each","toCamelCase","vendors","gCssText","assembleTransition","duration","transitionCurve","transitionText","vendorPrefix","join","assembleFont","textStyleModel","cssText","fontSize","color","getTextColor","getFont","round","val","assembleCssText","tooltipModel","transitionDuration","backgroundColor","padding","canvasSupported","toHex","borderName","camelCase","normalizeCssArray","makeStyleCoord","out","zr","appendToBody","zrX","zrY","zrPainter","painter","zrViewportRoot","getViewportRoot","transformLocalCoord","document","body","viewportRootOffset","getViewportRootOffset","offsetLeft","offsetTop","TooltipContent","container","api","opt","wxa","el","createElement","domBelongToZr","_zr","getZr","_appendToBody","_styleCoord","getWidth","getHeight","appendChild","_container","_show","_hideTimeout","self","onmouseenter","_enterable","clearTimeout","_inContent","onmousemove","e","window","handler","normalizeEvent","dispatch","onmouseleave","hideLater","_hideDelay","stl","currentStyle","defaultView","getComputedStyle","domStyle","style","show","styleCoord","display","innerHTML","pointerEvents","setContent","content","setEnterable","enterable","getSize","clientWidth","clientHeight","moveTo","left","top","hide","time","setTimeout","bind","isShow","dispose","removeChild","getOuterSize","width","parseInt","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth","modelUtil","finder","seriesModel","point","seriesIndex","getSeriesByIndex","getData","queryDataIndex","getItemGraphicEl","coordSys","coordinateSystem","getTooltipPosition","dataToPoint","getValues","dimensions","dim","mapDimension","rect","getBoundingRect","clone","applyTransform","transform","x","y","_symbol","createSymbol","graphic","_number","parsePercent","_labelHelper","getDefaultLabel","SymbolClz","idx","seriesScope","Group","updateData","symbolProto","getSymbolSize","symbolSize","Array","slice","getScale","driftSymbol","drift","_createSymbol","symbolType","keepAspect","removeAll","symbolPath","z2","culling","_symbolType","add","stopSymbolAnimation","toLastFrame","childAt","stopAnimation","getSymbolPath","highlight","trigger","downplay","setZ","zlevel","z","setDraggable","draggable","cursor","silent","isInit","updateProps","_updateCommon","fadeIn","opacity","initProps","_seriesModel","normalStyleAccessPath","emphasisStyleAccessPath","normalLabelAccessPath","emphasisLabelAccessPath","highDownOnUpdate","fromState","toState","incremental","useHoverLayer","__symbolOriginalScale","ratio","emphasisOpt","animateTo","useStyle","strokeNoScale","setStyle","shadowBlur","shadowOffsetX","shadowOffsetY","shadowColor","itemStyle","hoverItemStyle","symbolOffset","labelModel","hoverLabelModel","hoverAnimation","cursorStyle","hasItemOption","getItemStyle","getShallow","extend","elStyle","symbolRotate","PI","setColor","symbolInnerColor","liftZ","z2Origin","__z2Origin","useNameLabel","getLabelDefaultText","getName","setLabelStyle","labelFetcher","labelDataIndex","defaultText","isRectText","autoColor","hoverStyle","isAnimationEnabled","setHoverStyle","fadeOut","keepLabel","text","inherits","_model","makeInner","inner","register","records","initGlobalListeners","record","useHandler","eventType","on","dis","makeDispatchAction","dispatchAction","dispatchTooltipFinally","pendings","initialized","curry","doEnter","onLeave","actuallyPayload","showLen","showTip","hideLen","hideTip","currTrigger","payload","pendingList","unregister","SeriesModel","_format","encodeHTML","layoutInfo","layoutMode","getInitialData","option","leaves","leavesModel","nodeData","wrapMethod","model","isExpand","parentModel","treeDepth","expandAndCollapse","expandTreeDepth","initialTreeDepth","item","getRawDataItem","collapsed","getOrient","orient","setZoom","setCenter","center","formatTooltip","realRoot","isNaN","defaultOption","right","bottom","edgeShape","edgeForkPosition","roam","nodeScaleRatio","symbol","lineStyle","curveness","borderColor","borderWidth","label","animationEasing","animationDuration","animationDurationUpdate","init","hierNode","defaultAncestor","ancestor","prelim","modifier","change","shift","thread","pop","n","firstWalk","separation","siblings","subtreeW","executeShifts","midPoint","apportion","secondWalk","nodeX","arguments","defaultSeparation","radialCoordinate","radialCoor","cos","sin","getViewRect","getLayoutRect","getBoxLayoutParams","subtreeV","nodeOutRight","nodeInRight","nodeOutLeft","nodeInLeft","sumOutRight","sumInRight","sumOutLeft","sumInLeft","nextRight","nextLeft","moveSubtree","nextAncestor","wl","wr","node1","node2","DATAS","MAIN_DATA","datas","main","datasAttr","linkAll","TRANSFERABLE_METHODS","methodName","transferInjection","cloneShallowInjection","CHANGABLE_METHODS","changeInjection","assert","dataType","isMainData","linkSingle","cloneShallow","getLinkedData","TooltipRichContent","numberUtil","findPointFromSeries","layoutUtil","globalListener","axisHelper","axisPointerViewHelper","getTooltipRenderMode","proxyRect","Rect","shape","extendComponentView","tooltipContent","getComponent","renderMode","_renderMode","getDom","_newLine","_tooltipContent","render","group","_tooltipModel","_ecModel","_api","_lastDataByCoordSys","_alwaysShowContent","_initGlobalListener","_keepShow","triggerOn","indexOf","_tryShow","_hide","_lastX","_lastY","_refreshUpdateTimeout","isDisposed","manuallyShowTip","from","uid","_ticket","dataByCoordSys","tooltip","offsetX","offsetY","tooltipOption","_manuallyAxisShowTip","pointInfo","cx","cy","findHover","manuallyHideTip","coordSysAxesInfo","buildTooltipModel","_showAxisTooltip","_showSeriesItemTooltip","_showComponentItemTooltip","_showOrMove","delay","_showTimout","globalTooltipModel","singleDefaultHTML","singleParamsList","singleTooltipModel","newLine","markers","itemCoordSys","dataByAxis","axisModel","axisDim","axisIndex","axisValue","seriesDefaultHTML","valueLabel","getValueLabel","axis","seriesDataIndices","valueLabelOpt","idxItem","series","dataIndexInside","dataParams","getDataParams","axisType","axisId","getAxisRawValue","axisValueLabel","html","seriesTooltip","isObject","newMarkers","firstLine","positionExpr","_updateContentNotChangedOnAxis","_updatePosition","_showTooltipContent","random","undefined","dataModel","tooltipTrigger","defaultHtml","params","asyncTicket","tooltipOpt","formatter","subTooltipModel","formatTpl","callback","cbTicket","viewWidth","viewHeight","contentSize","align","vAlign","viewSize","layoutRect","calcTooltipPosition","refixTooltipPosition","isCenterAlign","confineTooltipPosition","lastCoordSys","contentNotChanged","lastItemCoordSys","indexCoordSys","lastDataByAxis","thisItemCoordSys","thisDataByAxis","lastItem","indexAxis","thisItem","lastIndices","newIndices","lastIdxItem","j","newIdxItem","modelCascade","resultModel","isInstance","gapH","gapV","size","domWidth","domHeight","gap","rectWidth","rectHeight","AxisPointerModel","extendComponentModel","snap","triggerTooltip","status","link","animation","shadowStyle","precision","margin","handle","icon","throttle","Eventful","eventTool","interactionMutex","RoamController","pointerChecker","_opt","mousedownHandler","mousedown","mousemoveHandler","mousemove","mouseupHandler","mouseup","mousewheelHandler","mousewheel","pinchHandler","pinch","setPointerChecker","enable","controlType","disable","defaults","zoomOnMouseWheel","moveOnMouseMove","moveOnMouseWheel","preventDefaultMouseMove","off","isDragging","_dragging","isPinching","_pinching","isMiddleOrRightButtonOnMouseUpDown","_x","_y","isAvailableBehavior","gestureEvent","isTaken","oldX","oldY","stop","newX","newY","shouldZoom","shouldMove","wheelDelta","absWheelDeltaDelta","abs","originX","originY","factor","checkPointerAndTrigger","absDelta","scrollDelta","pinchScale","pinchX","pinchY","controller","eventName","behaviorToCheck","contollerEvent","settings","setting","mixin","BaseAxisPointer","viewHelper","cartesianAxisHelper","AxisView","CartesianAxisPointer","makeElOption","elOption","axisPointerModel","grid","axisPointerType","otherExtent","getCartesian","getOtherAxis","getGlobalExtent","pixelValue","toGlobalCoord","dataToCoord","buildElStyle","pointerOption","pointerShapeBuilder","graphicKey","pointer","buildCartesianSingleLabelElOption","getHandleTransform","labelInside","labelMargin","getTransformedPosition","rotation","labelDirection","updateHandleTransform","delta","axisExtent","dimIndex","currPosition","cursorOtherValue","cursorPoint","tooltipOptions","verticalAlign","index","line","targetShape","makeLineShape","getAxisDimIndex","subPixelOptimize","shadow","bandWidth","getBandWidth","span","makeRectShape","registerAxisPointerClass","vector","matrix","BoundingRect","Transformable","v2ApplyTransform","TransformDummy","View","_roamTransformable","_rawTransformable","_center","_zoom","doConvert","setBoundingRect","_rect","setViewRect","transformTo","_viewRect","rawTransform","calculateTransform","decomposeTransform","_updateTransform","centerCoord","_updateCenterAndZoom","getDefaultCenter","rawRect","getCenter","getZoom","getRoamTransform","getLocalTransform","rawTransformMatrix","roamTransform","defaultCenter","origin","roamTransformable","rawTransformable","updateTransform","copy","create","_rawTransform","invTransform","invert","getTransformInfo","rawScale","rawPosition","getViewRectAfterRoam","noRoam","pointToData","convertToPixel","convertFromPixel","containPoint","contain","_layoutHelper","bbox","roamHelper","_cursorHelper","onIrrelevantElement","_config","__DEV__","TreeShape","extendShape","parentPoint","childPoints","forkPosition","stroke","fill","buildPath","ctx","childLen","firstChildPos","lastChildPos","lineTo","forkDim","otherDim","tmpPoint","extendChartView","_oldTree","_mainGroup","_controller","_controllerHost","_updateViewCoordSys","_updateController","oldData","_data","curvature","diff","newIdx","symbolNeedsDraw","updateNode","oldIdx","symbolEl","removeNode","remove","execute","_nodeScaleRatio","_updateNodeAndLinkScale","eachItemGraphicEl","seriesId","points","fromPoints","oldMin","_min","oldMax","_max","viewCoordSys","_viewCoordSys","nodeScale","_getNodeGlobalScale","invScale","groupScale","groupZoom","roamZoom","getTreeNodeStyle","getLineStyle","virtualRoot","source","sourceSymbolEl","sourceLayout","sourceOldLayout","rawX","__radialOldRawX","rawY","__radialOldRawY","targetLayout","__radialRawX","__radialRawY","setItemGraphicEl","rad","isLeft","rootLayout","atan2","textPosition","rotate","labelRotateRadian","textRotation","textOrigin","drawEdge","edge","__edge","BezierCurve","getEdgeShape","childLayout","sourceEdge","cpx1","cpy1","cpx2","cpy2","x1","x2","y1","y2","radialCoor1","radialCoor2","radialCoor3","radialCoor4","eachAfter","next","eachBefore","_util","isFunction","seriesType","defaultSymbolType","legendSymbol","performRawSeries","reset","hasSymbolTypeCallback","hasSymbolSizeCallback","hasSymbolRotateCallback","hasCallback","seriesSymbol","seriesSymbolSize","symbolKeepAspect","isSeriesFiltered","dataEach","rawValue","getRawValue","itemSymbolType","itemSymbolSize","itemSymbolRotate","itemSymbolKeepAspect","Text","markerRich","prefix","suffix","startId","endId","substr","textWidth","textHeight","textBorderRadius","textBackgroundColor","textOffset","rich","textLineHeight","textFill","textPadding","bounding","ATTR","take","resourceKey","userKey","store","getStore","release","uKey","dependencies","showContent","alwaysShowContent","displayMode","confine","showDelay","hideDelay","borderRadius","extraCssText","axisPointer","animationEasingUpdate","crossStyle","textStyle","_roamHelper","updateCenterAndZoom","eachComponent","mainType","subType","query","IRRELEVANT_EXCLUDES","targetCoordSysModel","getComponentByElement","topTarget","_traversalHelper","sep","eachSeriesByType","commonLayout","tx","kx","ky","coorX","coorY","finalCoor","axisPointerModelHelper","axisTrigger","registerPreprocessor","registerProcessor","PRIORITY","PROCESSOR","STATISTIC","collect","AxisPointerView","globalAxisPointerModel","superApply","view","previousZoom","fixX","fixY","clazzUtil","throttleUtil","animationModel","moveAnimation","props","propsEqual","lastProp","lastProps","newProps","equals","updateLabelShowHide","labelEl","getHandleTransProps","trans","updateMandatoryProps","traverse","_group","_lastGraphicKey","_handle","_lastValue","_lastStatus","_payloadInfo","animationThreshold","forceRender","_axisModel","_axisPointerModel","clear","_moveAnimation","determineAnimation","doUpdateProps","updatePointerEl","updateLabelEl","createPointerEl","createLabelEl","_renderHandle","isCategoryAxis","useSnap","seriesDataCount","getAxisInfo","getExtent","pointerEl","handleModel","createIcon","onmousedown","_onHandleDragMove","ondragend","_onHandleDragEnd","includeStyles","handleSize","createOrUpdate","_moveHandleToValue","_doDispatchAxisPointer","payloadInfo","axesInfo","componentIndex","doClear","buildLabel","xy","wh","xDimIndex","enableClassExtend","modelHelper","illegalPoint","isIllegalPoint","inputAxesInfo","shouldHide","outputFinder","showValueMap","updaters","showPointer","showTooltip","coordSysMap","coordSysKey","coordSysContainsPoint","axisInfo","inputAxisInfo","findInputAxisInfo","processOnAxis","linkTriggers","tarAxisInfo","tarKey","linkGroup","srcAxisInfo","srcKey","srcValItem","mapper","parse","makeMapperParam","updateModelActually","dispatchTooltipActually","dispatchHighDownActually","newValue","dontSnap","isBlank","containData","involveSeries","buildPayloadsBySeries","payloadBatch","snapToValue","minDist","Number","MAX_VALUE","minDiff","seriesModels","seriesNestestValue","dataIndices","dataDim","getAxisTooltipData","result","nestestValue","indicesOfNearest","isFinite","dist","coordSysModel","makeKey","coordSysItem","coordSysId","coordSysIndex","coordSysType","coordSysMainType","outputAxesInfo","valItem","useHandle","sampleItem","escapeConnect","highDownKey","lastHighlights","newHighlights","batchItem","toHighlight","toDownplay","batch","axisName","visualSymbol","treeLayout","registerVisual","registerLayout","textContain","AxisBuilder","styleModel","getAreaStyle","buildLabelElOption","labelPos","paddings","font","textRect","confineInContainer","bgColor","r","textFont","lineWidth","getLabel","axisDimension","seriesData","replace","translate","labelOffset","textLayout","innerTextLayout","textAlign","textVerticalAlign","p1","p2","makeSectorShape","r0","startAngle","endAngle","clockwise"],"mappings":"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","file":"js/chunk-7427fc9c.15d003e3.js","sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nrequire(\"./axisPointer\");\n\nrequire(\"./tooltip/TooltipModel\");\n\nrequire(\"./tooltip/TooltipView\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME Better way to pack data in graphic element\n\n/**\n * @action\n * @property {string} type\n * @property {number} seriesIndex\n * @property {number} dataIndex\n * @property {number} [x]\n * @property {number} [y]\n */\necharts.registerAction({\n  type: 'showTip',\n  event: 'showTip',\n  update: 'tooltip:manuallyShowTip'\n}, // noop\nfunction () {});\necharts.registerAction({\n  type: 'hideTip',\n  event: 'hideTip',\n  update: 'tooltip:manuallyHideTip'\n}, // noop\nfunction () {});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * For geo and graph.\n *\n * @param {Object} controllerHost\n * @param {module:zrender/Element} controllerHost.target\n */\nfunction updateViewOnPan(controllerHost, dx, dy) {\n  var target = controllerHost.target;\n  var pos = target.position;\n  pos[0] += dx;\n  pos[1] += dy;\n  target.dirty();\n}\n/**\n * For geo and graph.\n *\n * @param {Object} controllerHost\n * @param {module:zrender/Element} controllerHost.target\n * @param {number} controllerHost.zoom\n * @param {number} controllerHost.zoomLimit like: {min: 1, max: 2}\n */\n\n\nfunction updateViewOnZoom(controllerHost, zoomDelta, zoomX, zoomY) {\n  var target = controllerHost.target;\n  var zoomLimit = controllerHost.zoomLimit;\n  var pos = target.position;\n  var scale = target.scale;\n  var newZoom = controllerHost.zoom = controllerHost.zoom || 1;\n  newZoom *= zoomDelta;\n\n  if (zoomLimit) {\n    var zoomMin = zoomLimit.min || 0;\n    var zoomMax = zoomLimit.max || Infinity;\n    newZoom = Math.max(Math.min(zoomMax, newZoom), zoomMin);\n  }\n\n  var zoomScale = newZoom / controllerHost.zoom;\n  controllerHost.zoom = newZoom; // Keep the mouse center when scaling\n\n  pos[0] -= (zoomX - pos[0]) * (zoomScale - 1);\n  pos[1] -= (zoomY - pos[1]) * (zoomScale - 1);\n  scale[0] *= zoomScale;\n  scale[1] *= zoomScale;\n  target.dirty();\n}\n\nexports.updateViewOnPan = updateViewOnPan;\nexports.updateViewOnZoom = updateViewOnZoom;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Model = require(\"../model/Model\");\n\nvar linkList = require(\"./helper/linkList\");\n\nvar List = require(\"./List\");\n\nvar createDimensions = require(\"./helper/createDimensions\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Tree data structure\n *\n * @module echarts/data/Tree\n */\n\n/**\n * @constructor module:echarts/data/Tree~TreeNode\n * @param {string} name\n * @param {module:echarts/data/Tree} hostTree\n */\nvar TreeNode = function (name, hostTree) {\n  /**\n   * @type {string}\n   */\n  this.name = name || '';\n  /**\n   * Depth of node\n   *\n   * @type {number}\n   * @readOnly\n   */\n\n  this.depth = 0;\n  /**\n   * Height of the subtree rooted at this node.\n   * @type {number}\n   * @readOnly\n   */\n\n  this.height = 0;\n  /**\n   * @type {module:echarts/data/Tree~TreeNode}\n   * @readOnly\n   */\n\n  this.parentNode = null;\n  /**\n   * Reference to list item.\n   * Do not persistent dataIndex outside,\n   * besause it may be changed by list.\n   * If dataIndex -1,\n   * this node is logical deleted (filtered) in list.\n   *\n   * @type {Object}\n   * @readOnly\n   */\n\n  this.dataIndex = -1;\n  /**\n   * @type {Array.<module:echarts/data/Tree~TreeNode>}\n   * @readOnly\n   */\n\n  this.children = [];\n  /**\n   * @type {Array.<module:echarts/data/Tree~TreeNode>}\n   * @pubilc\n   */\n\n  this.viewChildren = [];\n  /**\n   * @type {moduel:echarts/data/Tree}\n   * @readOnly\n   */\n\n  this.hostTree = hostTree;\n};\n\nTreeNode.prototype = {\n  constructor: TreeNode,\n\n  /**\n   * The node is removed.\n   * @return {boolean} is removed.\n   */\n  isRemoved: function () {\n    return this.dataIndex < 0;\n  },\n\n  /**\n   * Travel this subtree (include this node).\n   * Usage:\n   *    node.eachNode(function () { ... }); // preorder\n   *    node.eachNode('preorder', function () { ... }); // preorder\n   *    node.eachNode('postorder', function () { ... }); // postorder\n   *    node.eachNode(\n   *        {order: 'postorder', attr: 'viewChildren'},\n   *        function () { ... }\n   *    ); // postorder\n   *\n   * @param {(Object|string)} options If string, means order.\n   * @param {string=} options.order 'preorder' or 'postorder'\n   * @param {string=} options.attr 'children' or 'viewChildren'\n   * @param {Function} cb If in preorder and return false,\n   *                      its subtree will not be visited.\n   * @param {Object} [context]\n   */\n  eachNode: function (options, cb, context) {\n    if (typeof options === 'function') {\n      context = cb;\n      cb = options;\n      options = null;\n    }\n\n    options = options || {};\n\n    if (zrUtil.isString(options)) {\n      options = {\n        order: options\n      };\n    }\n\n    var order = options.order || 'preorder';\n    var children = this[options.attr || 'children'];\n    var suppressVisitSub;\n    order === 'preorder' && (suppressVisitSub = cb.call(context, this));\n\n    for (var i = 0; !suppressVisitSub && i < children.length; i++) {\n      children[i].eachNode(options, cb, context);\n    }\n\n    order === 'postorder' && cb.call(context, this);\n  },\n\n  /**\n   * Update depth and height of this subtree.\n   *\n   * @param  {number} depth\n   */\n  updateDepthAndHeight: function (depth) {\n    var height = 0;\n    this.depth = depth;\n\n    for (var i = 0; i < this.children.length; i++) {\n      var child = this.children[i];\n      child.updateDepthAndHeight(depth + 1);\n\n      if (child.height > height) {\n        height = child.height;\n      }\n    }\n\n    this.height = height + 1;\n  },\n\n  /**\n   * @param  {string} id\n   * @return {module:echarts/data/Tree~TreeNode}\n   */\n  getNodeById: function (id) {\n    if (this.getId() === id) {\n      return this;\n    }\n\n    for (var i = 0, children = this.children, len = children.length; i < len; i++) {\n      var res = children[i].getNodeById(id);\n\n      if (res) {\n        return res;\n      }\n    }\n  },\n\n  /**\n   * @param {module:echarts/data/Tree~TreeNode} node\n   * @return {boolean}\n   */\n  contains: function (node) {\n    if (node === this) {\n      return true;\n    }\n\n    for (var i = 0, children = this.children, len = children.length; i < len; i++) {\n      var res = children[i].contains(node);\n\n      if (res) {\n        return res;\n      }\n    }\n  },\n\n  /**\n   * @param {boolean} includeSelf Default false.\n   * @return {Array.<module:echarts/data/Tree~TreeNode>} order: [root, child, grandchild, ...]\n   */\n  getAncestors: function (includeSelf) {\n    var ancestors = [];\n    var node = includeSelf ? this : this.parentNode;\n\n    while (node) {\n      ancestors.push(node);\n      node = node.parentNode;\n    }\n\n    ancestors.reverse();\n    return ancestors;\n  },\n\n  /**\n   * @param {string|Array=} [dimension='value'] Default 'value'. can be 0, 1, 2, 3\n   * @return {number} Value.\n   */\n  getValue: function (dimension) {\n    var data = this.hostTree.data;\n    return data.get(data.getDimension(dimension || 'value'), this.dataIndex);\n  },\n\n  /**\n   * @param {Object} layout\n   * @param {boolean=} [merge=false]\n   */\n  setLayout: function (layout, merge) {\n    this.dataIndex >= 0 && this.hostTree.data.setItemLayout(this.dataIndex, layout, merge);\n  },\n\n  /**\n   * @return {Object} layout\n   */\n  getLayout: function () {\n    return this.hostTree.data.getItemLayout(this.dataIndex);\n  },\n\n  /**\n   * @param {string} [path]\n   * @return {module:echarts/model/Model}\n   */\n  getModel: function (path) {\n    if (this.dataIndex < 0) {\n      return;\n    }\n\n    var hostTree = this.hostTree;\n    var itemModel = hostTree.data.getItemModel(this.dataIndex);\n    var levelModel = this.getLevelModel(); // FIXME: refactor levelModel to \"beforeLink\", and remove levelModel here.\n\n    if (levelModel) {\n      return itemModel.getModel(path, levelModel.getModel(path));\n    } else {\n      return itemModel.getModel(path);\n    }\n  },\n\n  /**\n   * @return {module:echarts/model/Model}\n   */\n  getLevelModel: function () {\n    return (this.hostTree.levelModels || [])[this.depth];\n  },\n\n  /**\n   * @example\n   *  setItemVisual('color', color);\n   *  setItemVisual({\n   *      'color': color\n   *  });\n   */\n  setVisual: function (key, value) {\n    this.dataIndex >= 0 && this.hostTree.data.setItemVisual(this.dataIndex, key, value);\n  },\n\n  /**\n   * Get item visual\n   */\n  getVisual: function (key, ignoreParent) {\n    return this.hostTree.data.getItemVisual(this.dataIndex, key, ignoreParent);\n  },\n\n  /**\n   * @public\n   * @return {number}\n   */\n  getRawIndex: function () {\n    return this.hostTree.data.getRawIndex(this.dataIndex);\n  },\n\n  /**\n   * @public\n   * @return {string}\n   */\n  getId: function () {\n    return this.hostTree.data.getId(this.dataIndex);\n  },\n\n  /**\n   * if this is an ancestor of another node\n   *\n   * @public\n   * @param {TreeNode} node another node\n   * @return {boolean} if is ancestor\n   */\n  isAncestorOf: function (node) {\n    var parent = node.parentNode;\n\n    while (parent) {\n      if (parent === this) {\n        return true;\n      }\n\n      parent = parent.parentNode;\n    }\n\n    return false;\n  },\n\n  /**\n   * if this is an descendant of another node\n   *\n   * @public\n   * @param {TreeNode} node another node\n   * @return {boolean} if is descendant\n   */\n  isDescendantOf: function (node) {\n    return node !== this && node.isAncestorOf(this);\n  }\n};\n/**\n * @constructor\n * @alias module:echarts/data/Tree\n * @param {module:echarts/model/Model} hostModel\n * @param {Array.<Object>} levelOptions\n */\n\nfunction Tree(hostModel, levelOptions) {\n  /**\n   * @type {module:echarts/data/Tree~TreeNode}\n   * @readOnly\n   */\n  this.root;\n  /**\n   * @type {module:echarts/data/List}\n   * @readOnly\n   */\n\n  this.data;\n  /**\n   * Index of each item is the same as the raw index of coresponding list item.\n   * @private\n   * @type {Array.<module:echarts/data/Tree~TreeNode}\n   */\n\n  this._nodes = [];\n  /**\n   * @private\n   * @readOnly\n   * @type {module:echarts/model/Model}\n   */\n\n  this.hostModel = hostModel;\n  /**\n   * @private\n   * @readOnly\n   * @type {Array.<module:echarts/model/Model}\n   */\n\n  this.levelModels = zrUtil.map(levelOptions || [], function (levelDefine) {\n    return new Model(levelDefine, hostModel, hostModel.ecModel);\n  });\n}\n\nTree.prototype = {\n  constructor: Tree,\n  type: 'tree',\n\n  /**\n   * Travel this subtree (include this node).\n   * Usage:\n   *    node.eachNode(function () { ... }); // preorder\n   *    node.eachNode('preorder', function () { ... }); // preorder\n   *    node.eachNode('postorder', function () { ... }); // postorder\n   *    node.eachNode(\n   *        {order: 'postorder', attr: 'viewChildren'},\n   *        function () { ... }\n   *    ); // postorder\n   *\n   * @param {(Object|string)} options If string, means order.\n   * @param {string=} options.order 'preorder' or 'postorder'\n   * @param {string=} options.attr 'children' or 'viewChildren'\n   * @param {Function} cb\n   * @param {Object}   [context]\n   */\n  eachNode: function (options, cb, context) {\n    this.root.eachNode(options, cb, context);\n  },\n\n  /**\n   * @param {number} dataIndex\n   * @return {module:echarts/data/Tree~TreeNode}\n   */\n  getNodeByDataIndex: function (dataIndex) {\n    var rawIndex = this.data.getRawIndex(dataIndex);\n    return this._nodes[rawIndex];\n  },\n\n  /**\n   * @param {string} name\n   * @return {module:echarts/data/Tree~TreeNode}\n   */\n  getNodeByName: function (name) {\n    return this.root.getNodeByName(name);\n  },\n\n  /**\n   * Update item available by list,\n   * when list has been performed options like 'filterSelf' or 'map'.\n   */\n  update: function () {\n    var data = this.data;\n    var nodes = this._nodes;\n\n    for (var i = 0, len = nodes.length; i < len; i++) {\n      nodes[i].dataIndex = -1;\n    }\n\n    for (var i = 0, len = data.count(); i < len; i++) {\n      nodes[data.getRawIndex(i)].dataIndex = i;\n    }\n  },\n\n  /**\n   * Clear all layouts\n   */\n  clearLayouts: function () {\n    this.data.clearItemLayouts();\n  }\n};\n/**\n * data node format:\n * {\n *     name: ...\n *     value: ...\n *     children: [\n *         {\n *             name: ...\n *             value: ...\n *             children: ...\n *         },\n *         ...\n *     ]\n * }\n *\n * @static\n * @param {Object} dataRoot Root node.\n * @param {module:echarts/model/Model} hostModel\n * @param {Object} treeOptions\n * @param {Array.<Object>} treeOptions.levels\n * @return module:echarts/data/Tree\n */\n\nTree.createTree = function (dataRoot, hostModel, treeOptions, beforeLink) {\n  var tree = new Tree(hostModel, treeOptions && treeOptions.levels);\n  var listData = [];\n  var dimMax = 1;\n  buildHierarchy(dataRoot);\n\n  function buildHierarchy(dataNode, parentNode) {\n    var value = dataNode.value;\n    dimMax = Math.max(dimMax, zrUtil.isArray(value) ? value.length : 1);\n    listData.push(dataNode);\n    var node = new TreeNode(dataNode.name, tree);\n    parentNode ? addChild(node, parentNode) : tree.root = node;\n\n    tree._nodes.push(node);\n\n    var children = dataNode.children;\n\n    if (children) {\n      for (var i = 0; i < children.length; i++) {\n        buildHierarchy(children[i], node);\n      }\n    }\n  }\n\n  tree.root.updateDepthAndHeight(0);\n  var dimensionsInfo = createDimensions(listData, {\n    coordDimensions: ['value'],\n    dimensionsCount: dimMax\n  });\n  var list = new List(dimensionsInfo, hostModel);\n  list.initData(listData);\n  beforeLink && beforeLink(list);\n  linkList({\n    mainData: list,\n    struct: tree,\n    structAttr: 'tree'\n  });\n  tree.update();\n  return tree;\n};\n/**\n * It is needed to consider the mess of 'list', 'hostModel' when creating a TreeNote,\n * so this function is not ready and not necessary to be public.\n *\n * @param {(module:echarts/data/Tree~TreeNode|Object)} child\n */\n\n\nfunction addChild(child, node) {\n  var children = node.children;\n\n  if (child.parentNode === node) {\n    return;\n  }\n\n  children.push(child);\n  child.parentNode = node;\n}\n\nvar _default = Tree;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar zrColor = require(\"zrender/lib/tool/color\");\n\nvar eventUtil = require(\"zrender/lib/core/event\");\n\nvar domUtil = require(\"zrender/lib/core/dom\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar formatUtil = require(\"../../util/format\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\nvar toCamelCase = formatUtil.toCamelCase;\nvar vendors = ['', '-webkit-', '-moz-', '-o-'];\nvar gCssText = 'position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;';\n/**\n * @param {number} duration\n * @return {string}\n * @inner\n */\n\nfunction assembleTransition(duration) {\n  var transitionCurve = 'cubic-bezier(0.23, 1, 0.32, 1)';\n  var transitionText = 'left ' + duration + 's ' + transitionCurve + ',' + 'top ' + duration + 's ' + transitionCurve;\n  return zrUtil.map(vendors, function (vendorPrefix) {\n    return vendorPrefix + 'transition:' + transitionText;\n  }).join(';');\n}\n/**\n * @param {Object} textStyle\n * @return {string}\n * @inner\n */\n\n\nfunction assembleFont(textStyleModel) {\n  var cssText = [];\n  var fontSize = textStyleModel.get('fontSize');\n  var color = textStyleModel.getTextColor();\n  color && cssText.push('color:' + color);\n  cssText.push('font:' + textStyleModel.getFont());\n  fontSize && cssText.push('line-height:' + Math.round(fontSize * 3 / 2) + 'px');\n  each(['decoration', 'align'], function (name) {\n    var val = textStyleModel.get(name);\n    val && cssText.push('text-' + name + ':' + val);\n  });\n  return cssText.join(';');\n}\n/**\n * @param {Object} tooltipModel\n * @return {string}\n * @inner\n */\n\n\nfunction assembleCssText(tooltipModel) {\n  var cssText = [];\n  var transitionDuration = tooltipModel.get('transitionDuration');\n  var backgroundColor = tooltipModel.get('backgroundColor');\n  var textStyleModel = tooltipModel.getModel('textStyle');\n  var padding = tooltipModel.get('padding'); // Animation transition. Do not animate when transitionDuration is 0.\n\n  transitionDuration && cssText.push(assembleTransition(transitionDuration));\n\n  if (backgroundColor) {\n    if (env.canvasSupported) {\n      cssText.push('background-Color:' + backgroundColor);\n    } else {\n      // for ie\n      cssText.push('background-Color:#' + zrColor.toHex(backgroundColor));\n      cssText.push('filter:alpha(opacity=70)');\n    }\n  } // Border style\n\n\n  each(['width', 'color', 'radius'], function (name) {\n    var borderName = 'border-' + name;\n    var camelCase = toCamelCase(borderName);\n    var val = tooltipModel.get(camelCase);\n    val != null && cssText.push(borderName + ':' + val + (name === 'color' ? '' : 'px'));\n  }); // Text style\n\n  cssText.push(assembleFont(textStyleModel)); // Padding\n\n  if (padding != null) {\n    cssText.push('padding:' + formatUtil.normalizeCssArray(padding).join('px ') + 'px');\n  }\n\n  return cssText.join(';') + ';';\n} // If not able to make, do not modify the input `out`.\n\n\nfunction makeStyleCoord(out, zr, appendToBody, zrX, zrY) {\n  var zrPainter = zr && zr.painter;\n\n  if (appendToBody) {\n    var zrViewportRoot = zrPainter && zrPainter.getViewportRoot();\n\n    if (zrViewportRoot) {\n      // Some APPs might use scale on body, so we support CSS transform here.\n      domUtil.transformLocalCoord(out, zrViewportRoot, document.body, zrX, zrY);\n    }\n  } else {\n    out[0] = zrX;\n    out[1] = zrY; // xy should be based on canvas root. But tooltipContent is\n    // the sibling of canvas root. So padding of ec container\n    // should be considered here.\n\n    var viewportRootOffset = zrPainter && zrPainter.getViewportRootOffset();\n\n    if (viewportRootOffset) {\n      out[0] += viewportRootOffset.offsetLeft;\n      out[1] += viewportRootOffset.offsetTop;\n    }\n  }\n}\n/**\n * @alias module:echarts/component/tooltip/TooltipContent\n * @param {HTMLElement} container\n * @param {ExtensionAPI} api\n * @param {Object} [opt]\n * @param {boolean} [opt.appendToBody]\n *        `false`: the DOM element will be inside the container. Default value.\n *        `true`: the DOM element will be appended to HTML body, which avoid\n *                some overflow clip but intrude outside of the container.\n * @constructor\n */\n\n\nfunction TooltipContent(container, api, opt) {\n  if (env.wxa) {\n    return null;\n  }\n\n  var el = document.createElement('div');\n  el.domBelongToZr = true;\n  this.el = el;\n  var zr = this._zr = api.getZr();\n  var appendToBody = this._appendToBody = opt && opt.appendToBody;\n  this._styleCoord = [0, 0];\n  makeStyleCoord(this._styleCoord, zr, appendToBody, api.getWidth() / 2, api.getHeight() / 2);\n\n  if (appendToBody) {\n    document.body.appendChild(el);\n  } else {\n    container.appendChild(el);\n  }\n\n  this._container = container;\n  this._show = false;\n  /**\n   * @private\n   */\n\n  this._hideTimeout; // FIXME\n  // Is it needed to trigger zr event manually if\n  // the browser do not support `pointer-events: none`.\n\n  var self = this;\n\n  el.onmouseenter = function () {\n    // clear the timeout in hideLater and keep showing tooltip\n    if (self._enterable) {\n      clearTimeout(self._hideTimeout);\n      self._show = true;\n    }\n\n    self._inContent = true;\n  };\n\n  el.onmousemove = function (e) {\n    e = e || window.event;\n\n    if (!self._enterable) {\n      // `pointer-events: none` is set to tooltip content div\n      // if `enterable` is set as `false`, and `el.onmousemove`\n      // can not be triggered. But in browser that do not\n      // support `pointer-events`, we need to do this:\n      // Try trigger zrender event to avoid mouse\n      // in and out shape too frequently\n      var handler = zr.handler;\n      var zrViewportRoot = zr.painter.getViewportRoot();\n      eventUtil.normalizeEvent(zrViewportRoot, e, true);\n      handler.dispatch('mousemove', e);\n    }\n  };\n\n  el.onmouseleave = function () {\n    if (self._enterable) {\n      if (self._show) {\n        self.hideLater(self._hideDelay);\n      }\n    }\n\n    self._inContent = false;\n  };\n}\n\nTooltipContent.prototype = {\n  constructor: TooltipContent,\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  _enterable: true,\n\n  /**\n   * Update when tooltip is rendered\n   */\n  update: function () {\n    // FIXME\n    // Move this logic to ec main?\n    var container = this._container;\n    var stl = container.currentStyle || document.defaultView.getComputedStyle(container);\n    var domStyle = container.style;\n\n    if (domStyle.position !== 'absolute' && stl.position !== 'absolute') {\n      domStyle.position = 'relative';\n    } // Hide the tooltip\n    // PENDING\n    // this.hide();\n\n  },\n  show: function (tooltipModel) {\n    clearTimeout(this._hideTimeout);\n    var el = this.el;\n    var styleCoord = this._styleCoord;\n    el.style.cssText = gCssText + assembleCssText(tooltipModel) // Because of the reason described in:\n    // http://stackoverflow.com/questions/21125587/css3-transition-not-working-in-chrome-anymore\n    // we should set initial value to `left` and `top`.\n    + ';left:' + styleCoord[0] + 'px;top:' + styleCoord[1] + 'px;' + (tooltipModel.get('extraCssText') || '');\n    el.style.display = el.innerHTML ? 'block' : 'none'; // If mouse occsionally move over the tooltip, a mouseout event will be\n    // triggered by canvas, and cuase some unexpectable result like dragging\n    // stop, \"unfocusAdjacency\". Here `pointer-events: none` is used to solve\n    // it. Although it is not suppored by IE8~IE10, fortunately it is a rare\n    // scenario.\n\n    el.style.pointerEvents = this._enterable ? 'auto' : 'none';\n    this._show = true;\n  },\n  setContent: function (content) {\n    this.el.innerHTML = content == null ? '' : content;\n  },\n  setEnterable: function (enterable) {\n    this._enterable = enterable;\n  },\n  getSize: function () {\n    var el = this.el;\n    return [el.clientWidth, el.clientHeight];\n  },\n  moveTo: function (zrX, zrY) {\n    var styleCoord = this._styleCoord;\n    makeStyleCoord(styleCoord, this._zr, this._appendToBody, zrX, zrY);\n    var style = this.el.style;\n    style.left = styleCoord[0] + 'px';\n    style.top = styleCoord[1] + 'px';\n  },\n  hide: function () {\n    this.el.style.display = 'none';\n    this._show = false;\n  },\n  hideLater: function (time) {\n    if (this._show && !(this._inContent && this._enterable)) {\n      if (time) {\n        this._hideDelay = time; // Set show false to avoid invoke hideLater mutiple times\n\n        this._show = false;\n        this._hideTimeout = setTimeout(zrUtil.bind(this.hide, this), time);\n      } else {\n        this.hide();\n      }\n    }\n  },\n  isShow: function () {\n    return this._show;\n  },\n  dispose: function () {\n    this.el.parentNode.removeChild(this.el);\n  },\n  getOuterSize: function () {\n    var width = this.el.clientWidth;\n    var height = this.el.clientHeight; // Consider browser compatibility.\n    // IE8 does not support getComputedStyle.\n\n    if (document.defaultView && document.defaultView.getComputedStyle) {\n      var stl = document.defaultView.getComputedStyle(this.el);\n\n      if (stl) {\n        width += parseInt(stl.borderLeftWidth, 10) + parseInt(stl.borderRightWidth, 10);\n        height += parseInt(stl.borderTopWidth, 10) + parseInt(stl.borderBottomWidth, 10);\n      }\n    }\n\n    return {\n      width: width,\n      height: height\n    };\n  }\n};\nvar _default = TooltipContent;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar modelUtil = require(\"../../util/model\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {Object} finder contains {seriesIndex, dataIndex, dataIndexInside}\n * @param {module:echarts/model/Global} ecModel\n * @return {Object} {point: [x, y], el: ...} point Will not be null.\n */\nfunction _default(finder, ecModel) {\n  var point = [];\n  var seriesIndex = finder.seriesIndex;\n  var seriesModel;\n\n  if (seriesIndex == null || !(seriesModel = ecModel.getSeriesByIndex(seriesIndex))) {\n    return {\n      point: []\n    };\n  }\n\n  var data = seriesModel.getData();\n  var dataIndex = modelUtil.queryDataIndex(data, finder);\n\n  if (dataIndex == null || dataIndex < 0 || zrUtil.isArray(dataIndex)) {\n    return {\n      point: []\n    };\n  }\n\n  var el = data.getItemGraphicEl(dataIndex);\n  var coordSys = seriesModel.coordinateSystem;\n\n  if (seriesModel.getTooltipPosition) {\n    point = seriesModel.getTooltipPosition(dataIndex) || [];\n  } else if (coordSys && coordSys.dataToPoint) {\n    point = coordSys.dataToPoint(data.getValues(zrUtil.map(coordSys.dimensions, function (dim) {\n      return data.mapDimension(dim);\n    }), dataIndex, true)) || [];\n  } else if (el) {\n    // Use graphic bounding rect\n    var rect = el.getBoundingRect().clone();\n    rect.applyTransform(el.transform);\n    point = [rect.x + rect.width / 2, rect.y + rect.height / 2];\n  }\n\n  return {\n    point: point,\n    el: el\n  };\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _number = require(\"../../util/number\");\n\nvar parsePercent = _number.parsePercent;\n\nvar _labelHelper = require(\"./labelHelper\");\n\nvar getDefaultLabel = _labelHelper.getDefaultLabel;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @module echarts/chart/helper/Symbol\n */\n\n/**\n * @constructor\n * @alias {module:echarts/chart/helper/Symbol}\n * @param {module:echarts/data/List} data\n * @param {number} idx\n * @extends {module:zrender/graphic/Group}\n */\nfunction SymbolClz(data, idx, seriesScope) {\n  graphic.Group.call(this);\n  this.updateData(data, idx, seriesScope);\n}\n\nvar symbolProto = SymbolClz.prototype;\n/**\n * @public\n * @static\n * @param {module:echarts/data/List} data\n * @param {number} dataIndex\n * @return {Array.<number>} [width, height]\n */\n\nvar getSymbolSize = SymbolClz.getSymbolSize = function (data, idx) {\n  var symbolSize = data.getItemVisual(idx, 'symbolSize');\n  return symbolSize instanceof Array ? symbolSize.slice() : [+symbolSize, +symbolSize];\n};\n\nfunction getScale(symbolSize) {\n  return [symbolSize[0] / 2, symbolSize[1] / 2];\n}\n\nfunction driftSymbol(dx, dy) {\n  this.parent.drift(dx, dy);\n}\n\nsymbolProto._createSymbol = function (symbolType, data, idx, symbolSize, keepAspect) {\n  // Remove paths created before\n  this.removeAll();\n  var color = data.getItemVisual(idx, 'color'); // var symbolPath = createSymbol(\n  //     symbolType, -0.5, -0.5, 1, 1, color\n  // );\n  // If width/height are set too small (e.g., set to 1) on ios10\n  // and macOS Sierra, a circle stroke become a rect, no matter what\n  // the scale is set. So we set width/height as 2. See #4150.\n\n  var symbolPath = createSymbol(symbolType, -1, -1, 2, 2, color, keepAspect);\n  symbolPath.attr({\n    z2: 100,\n    culling: true,\n    scale: getScale(symbolSize)\n  }); // Rewrite drift method\n\n  symbolPath.drift = driftSymbol;\n  this._symbolType = symbolType;\n  this.add(symbolPath);\n};\n/**\n * Stop animation\n * @param {boolean} toLastFrame\n */\n\n\nsymbolProto.stopSymbolAnimation = function (toLastFrame) {\n  this.childAt(0).stopAnimation(toLastFrame);\n};\n/**\n * FIXME:\n * Caution: This method breaks the encapsulation of this module,\n * but it indeed brings convenience. So do not use the method\n * unless you detailedly know all the implements of `Symbol`,\n * especially animation.\n *\n * Get symbol path element.\n */\n\n\nsymbolProto.getSymbolPath = function () {\n  return this.childAt(0);\n};\n/**\n * Get scale(aka, current symbol size).\n * Including the change caused by animation\n */\n\n\nsymbolProto.getScale = function () {\n  return this.childAt(0).scale;\n};\n/**\n * Highlight symbol\n */\n\n\nsymbolProto.highlight = function () {\n  this.childAt(0).trigger('emphasis');\n};\n/**\n * Downplay symbol\n */\n\n\nsymbolProto.downplay = function () {\n  this.childAt(0).trigger('normal');\n};\n/**\n * @param {number} zlevel\n * @param {number} z\n */\n\n\nsymbolProto.setZ = function (zlevel, z) {\n  var symbolPath = this.childAt(0);\n  symbolPath.zlevel = zlevel;\n  symbolPath.z = z;\n};\n\nsymbolProto.setDraggable = function (draggable) {\n  var symbolPath = this.childAt(0);\n  symbolPath.draggable = draggable;\n  symbolPath.cursor = draggable ? 'move' : symbolPath.cursor;\n};\n/**\n * Update symbol properties\n * @param {module:echarts/data/List} data\n * @param {number} idx\n * @param {Object} [seriesScope]\n * @param {Object} [seriesScope.itemStyle]\n * @param {Object} [seriesScope.hoverItemStyle]\n * @param {Object} [seriesScope.symbolRotate]\n * @param {Object} [seriesScope.symbolOffset]\n * @param {module:echarts/model/Model} [seriesScope.labelModel]\n * @param {module:echarts/model/Model} [seriesScope.hoverLabelModel]\n * @param {boolean} [seriesScope.hoverAnimation]\n * @param {Object} [seriesScope.cursorStyle]\n * @param {module:echarts/model/Model} [seriesScope.itemModel]\n * @param {string} [seriesScope.symbolInnerColor]\n * @param {Object} [seriesScope.fadeIn=false]\n */\n\n\nsymbolProto.updateData = function (data, idx, seriesScope) {\n  this.silent = false;\n  var symbolType = data.getItemVisual(idx, 'symbol') || 'circle';\n  var seriesModel = data.hostModel;\n  var symbolSize = getSymbolSize(data, idx);\n  var isInit = symbolType !== this._symbolType;\n\n  if (isInit) {\n    var keepAspect = data.getItemVisual(idx, 'symbolKeepAspect');\n\n    this._createSymbol(symbolType, data, idx, symbolSize, keepAspect);\n  } else {\n    var symbolPath = this.childAt(0);\n    symbolPath.silent = false;\n    graphic.updateProps(symbolPath, {\n      scale: getScale(symbolSize)\n    }, seriesModel, idx);\n  }\n\n  this._updateCommon(data, idx, symbolSize, seriesScope);\n\n  if (isInit) {\n    var symbolPath = this.childAt(0);\n    var fadeIn = seriesScope && seriesScope.fadeIn;\n    var target = {\n      scale: symbolPath.scale.slice()\n    };\n    fadeIn && (target.style = {\n      opacity: symbolPath.style.opacity\n    });\n    symbolPath.scale = [0, 0];\n    fadeIn && (symbolPath.style.opacity = 0);\n    graphic.initProps(symbolPath, target, seriesModel, idx);\n  }\n\n  this._seriesModel = seriesModel;\n}; // Update common properties\n\n\nvar normalStyleAccessPath = ['itemStyle'];\nvar emphasisStyleAccessPath = ['emphasis', 'itemStyle'];\nvar normalLabelAccessPath = ['label'];\nvar emphasisLabelAccessPath = ['emphasis', 'label'];\n/**\n * @param {module:echarts/data/List} data\n * @param {number} idx\n * @param {Array.<number>} symbolSize\n * @param {Object} [seriesScope]\n */\n\nsymbolProto._updateCommon = function (data, idx, symbolSize, seriesScope) {\n  var symbolPath = this.childAt(0);\n  var seriesModel = data.hostModel;\n  var color = data.getItemVisual(idx, 'color'); // Reset style\n\n  if (symbolPath.type !== 'image') {\n    symbolPath.useStyle({\n      strokeNoScale: true\n    });\n  } else {\n    symbolPath.setStyle({\n      opacity: null,\n      shadowBlur: null,\n      shadowOffsetX: null,\n      shadowOffsetY: null,\n      shadowColor: null\n    });\n  }\n\n  var itemStyle = seriesScope && seriesScope.itemStyle;\n  var hoverItemStyle = seriesScope && seriesScope.hoverItemStyle;\n  var symbolOffset = seriesScope && seriesScope.symbolOffset;\n  var labelModel = seriesScope && seriesScope.labelModel;\n  var hoverLabelModel = seriesScope && seriesScope.hoverLabelModel;\n  var hoverAnimation = seriesScope && seriesScope.hoverAnimation;\n  var cursorStyle = seriesScope && seriesScope.cursorStyle;\n\n  if (!seriesScope || data.hasItemOption) {\n    var itemModel = seriesScope && seriesScope.itemModel ? seriesScope.itemModel : data.getItemModel(idx); // Color must be excluded.\n    // Because symbol provide setColor individually to set fill and stroke\n\n    itemStyle = itemModel.getModel(normalStyleAccessPath).getItemStyle(['color']);\n    hoverItemStyle = itemModel.getModel(emphasisStyleAccessPath).getItemStyle();\n    symbolOffset = itemModel.getShallow('symbolOffset');\n    labelModel = itemModel.getModel(normalLabelAccessPath);\n    hoverLabelModel = itemModel.getModel(emphasisLabelAccessPath);\n    hoverAnimation = itemModel.getShallow('hoverAnimation');\n    cursorStyle = itemModel.getShallow('cursor');\n  } else {\n    hoverItemStyle = zrUtil.extend({}, hoverItemStyle);\n  }\n\n  var elStyle = symbolPath.style;\n  var symbolRotate = data.getItemVisual(idx, 'symbolRotate');\n  symbolPath.attr('rotation', (symbolRotate || 0) * Math.PI / 180 || 0);\n\n  if (symbolOffset) {\n    symbolPath.attr('position', [parsePercent(symbolOffset[0], symbolSize[0]), parsePercent(symbolOffset[1], symbolSize[1])]);\n  }\n\n  cursorStyle && symbolPath.attr('cursor', cursorStyle); // PENDING setColor before setStyle!!!\n\n  symbolPath.setColor(color, seriesScope && seriesScope.symbolInnerColor);\n  symbolPath.setStyle(itemStyle);\n  var opacity = data.getItemVisual(idx, 'opacity');\n\n  if (opacity != null) {\n    elStyle.opacity = opacity;\n  }\n\n  var liftZ = data.getItemVisual(idx, 'liftZ');\n  var z2Origin = symbolPath.__z2Origin;\n\n  if (liftZ != null) {\n    if (z2Origin == null) {\n      symbolPath.__z2Origin = symbolPath.z2;\n      symbolPath.z2 += liftZ;\n    }\n  } else if (z2Origin != null) {\n    symbolPath.z2 = z2Origin;\n    symbolPath.__z2Origin = null;\n  }\n\n  var useNameLabel = seriesScope && seriesScope.useNameLabel;\n  graphic.setLabelStyle(elStyle, hoverItemStyle, labelModel, hoverLabelModel, {\n    labelFetcher: seriesModel,\n    labelDataIndex: idx,\n    defaultText: getLabelDefaultText,\n    isRectText: true,\n    autoColor: color\n  }); // Do not execute util needed.\n\n  function getLabelDefaultText(idx, opt) {\n    return useNameLabel ? data.getName(idx) : getDefaultLabel(data, idx);\n  }\n\n  symbolPath.__symbolOriginalScale = getScale(symbolSize);\n  symbolPath.hoverStyle = hoverItemStyle;\n  symbolPath.highDownOnUpdate = hoverAnimation && seriesModel.isAnimationEnabled() ? highDownOnUpdate : null;\n  graphic.setHoverStyle(symbolPath);\n};\n\nfunction highDownOnUpdate(fromState, toState) {\n  // Do not support this hover animation util some scenario required.\n  // Animation can only be supported in hover layer when using `el.incremetal`.\n  if (this.incremental || this.useHoverLayer) {\n    return;\n  }\n\n  if (toState === 'emphasis') {\n    var scale = this.__symbolOriginalScale;\n    var ratio = scale[1] / scale[0];\n    var emphasisOpt = {\n      scale: [Math.max(scale[0] * 1.1, scale[0] + 3), Math.max(scale[1] * 1.1, scale[1] + 3 * ratio)]\n    }; // FIXME\n    // modify it after support stop specified animation.\n    // toState === fromState\n    //     ? (this.stopAnimation(), this.attr(emphasisOpt))\n\n    this.animateTo(emphasisOpt, 400, 'elasticOut');\n  } else if (toState === 'normal') {\n    this.animateTo({\n      scale: this.__symbolOriginalScale\n    }, 400, 'elasticOut');\n  }\n}\n/**\n * @param {Function} cb\n * @param {Object} [opt]\n * @param {Object} [opt.keepLabel=true]\n */\n\n\nsymbolProto.fadeOut = function (cb, opt) {\n  var symbolPath = this.childAt(0); // Avoid mistaken hover when fading out\n\n  this.silent = symbolPath.silent = true; // Not show text when animating\n\n  !(opt && opt.keepLabel) && (symbolPath.style.text = null);\n  graphic.updateProps(symbolPath, {\n    style: {\n      opacity: 0\n    },\n    scale: [0, 0]\n  }, this._seriesModel, this.dataIndex, cb);\n};\n\nzrUtil.inherits(SymbolClz, graphic.Group);\nvar _default = SymbolClz;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar _model = require(\"../../util/model\");\n\nvar makeInner = _model.makeInner;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar inner = makeInner();\nvar each = zrUtil.each;\n/**\n * @param {string} key\n * @param {module:echarts/ExtensionAPI} api\n * @param {Function} handler\n *      param: {string} currTrigger\n *      param: {Array.<number>} point\n */\n\nfunction register(key, api, handler) {\n  if (env.node) {\n    return;\n  }\n\n  var zr = api.getZr();\n  inner(zr).records || (inner(zr).records = {});\n  initGlobalListeners(zr, api);\n  var record = inner(zr).records[key] || (inner(zr).records[key] = {});\n  record.handler = handler;\n}\n\nfunction initGlobalListeners(zr, api) {\n  if (inner(zr).initialized) {\n    return;\n  }\n\n  inner(zr).initialized = true;\n  useHandler('click', zrUtil.curry(doEnter, 'click'));\n  useHandler('mousemove', zrUtil.curry(doEnter, 'mousemove')); // useHandler('mouseout', onLeave);\n\n  useHandler('globalout', onLeave);\n\n  function useHandler(eventType, cb) {\n    zr.on(eventType, function (e) {\n      var dis = makeDispatchAction(api);\n      each(inner(zr).records, function (record) {\n        record && cb(record, e, dis.dispatchAction);\n      });\n      dispatchTooltipFinally(dis.pendings, api);\n    });\n  }\n}\n\nfunction dispatchTooltipFinally(pendings, api) {\n  var showLen = pendings.showTip.length;\n  var hideLen = pendings.hideTip.length;\n  var actuallyPayload;\n\n  if (showLen) {\n    actuallyPayload = pendings.showTip[showLen - 1];\n  } else if (hideLen) {\n    actuallyPayload = pendings.hideTip[hideLen - 1];\n  }\n\n  if (actuallyPayload) {\n    actuallyPayload.dispatchAction = null;\n    api.dispatchAction(actuallyPayload);\n  }\n}\n\nfunction onLeave(record, e, dispatchAction) {\n  record.handler('leave', null, dispatchAction);\n}\n\nfunction doEnter(currTrigger, record, e, dispatchAction) {\n  record.handler(currTrigger, e, dispatchAction);\n}\n\nfunction makeDispatchAction(api) {\n  var pendings = {\n    showTip: [],\n    hideTip: []\n  }; // FIXME\n  // better approach?\n  // 'showTip' and 'hideTip' can be triggered by axisPointer and tooltip,\n  // which may be conflict, (axisPointer call showTip but tooltip call hideTip);\n  // So we have to add \"final stage\" to merge those dispatched actions.\n\n  var dispatchAction = function (payload) {\n    var pendingList = pendings[payload.type];\n\n    if (pendingList) {\n      pendingList.push(payload);\n    } else {\n      payload.dispatchAction = dispatchAction;\n      api.dispatchAction(payload);\n    }\n  };\n\n  return {\n    dispatchAction: dispatchAction,\n    pendings: pendings\n  };\n}\n/**\n * @param {string} key\n * @param {module:echarts/ExtensionAPI} api\n */\n\n\nfunction unregister(key, api) {\n  if (env.node) {\n    return;\n  }\n\n  var zr = api.getZr();\n  var record = (inner(zr).records || {})[key];\n\n  if (record) {\n    inner(zr).records[key] = null;\n  }\n}\n\nexports.register = register;\nexports.unregister = unregister;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar SeriesModel = require(\"../../model/Series\");\n\nvar Tree = require(\"../../data/Tree\");\n\nvar _format = require(\"../../util/format\");\n\nvar encodeHTML = _format.encodeHTML;\n\nvar Model = require(\"../../model/Model\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _default = SeriesModel.extend({\n  type: 'series.tree',\n  layoutInfo: null,\n  // can support the position parameters 'left', 'top','right','bottom', 'width',\n  // 'height' in the setOption() with 'merge' mode normal.\n  layoutMode: 'box',\n\n  /**\n   * Init a tree data structure from data in option series\n   * @param  {Object} option  the object used to config echarts view\n   * @return {module:echarts/data/List} storage initial data\n   */\n  getInitialData: function (option) {\n    //create an virtual root\n    var root = {\n      name: option.name,\n      children: option.data\n    };\n    var leaves = option.leaves || {};\n    var leavesModel = new Model(leaves, this, this.ecModel);\n    var tree = Tree.createTree(root, this, {}, beforeLink);\n\n    function beforeLink(nodeData) {\n      nodeData.wrapMethod('getItemModel', function (model, idx) {\n        var node = tree.getNodeByDataIndex(idx);\n\n        if (!node.children.length || !node.isExpand) {\n          model.parentModel = leavesModel;\n        }\n\n        return model;\n      });\n    }\n\n    var treeDepth = 0;\n    tree.eachNode('preorder', function (node) {\n      if (node.depth > treeDepth) {\n        treeDepth = node.depth;\n      }\n    });\n    var expandAndCollapse = option.expandAndCollapse;\n    var expandTreeDepth = expandAndCollapse && option.initialTreeDepth >= 0 ? option.initialTreeDepth : treeDepth;\n    tree.root.eachNode('preorder', function (node) {\n      var item = node.hostTree.data.getRawDataItem(node.dataIndex); // Add item.collapsed != null, because users can collapse node original in the series.data.\n\n      node.isExpand = item && item.collapsed != null ? !item.collapsed : node.depth <= expandTreeDepth;\n    });\n    return tree.data;\n  },\n\n  /**\n   * Make the configuration 'orient' backward compatibly, with 'horizontal = LR', 'vertical = TB'.\n   * @returns {string} orient\n   */\n  getOrient: function () {\n    var orient = this.get('orient');\n\n    if (orient === 'horizontal') {\n      orient = 'LR';\n    } else if (orient === 'vertical') {\n      orient = 'TB';\n    }\n\n    return orient;\n  },\n  setZoom: function (zoom) {\n    this.option.zoom = zoom;\n  },\n  setCenter: function (center) {\n    this.option.center = center;\n  },\n\n  /**\n   * @override\n   * @param {number} dataIndex\n   */\n  formatTooltip: function (dataIndex) {\n    var tree = this.getData().tree;\n    var realRoot = tree.root.children[0];\n    var node = tree.getNodeByDataIndex(dataIndex);\n    var value = node.getValue();\n    var name = node.name;\n\n    while (node && node !== realRoot) {\n      name = node.parentNode.name + '.' + name;\n      node = node.parentNode;\n    }\n\n    return encodeHTML(name + (isNaN(value) || value == null ? '' : ' : ' + value));\n  },\n  defaultOption: {\n    zlevel: 0,\n    z: 2,\n    coordinateSystem: 'view',\n    // the position of the whole view\n    left: '12%',\n    top: '12%',\n    right: '12%',\n    bottom: '12%',\n    // the layout of the tree, two value can be selected, 'orthogonal' or 'radial'\n    layout: 'orthogonal',\n    // value can be 'polyline'\n    edgeShape: 'curve',\n    edgeForkPosition: '50%',\n    // true | false | 'move' | 'scale', see module:component/helper/RoamController.\n    roam: false,\n    // Symbol size scale ratio in roam\n    nodeScaleRatio: 0.4,\n    // Default on center of graph\n    center: null,\n    zoom: 1,\n    // The orient of orthoginal layout, can be setted to 'LR', 'TB', 'RL', 'BT'.\n    // and the backward compatibility configuration 'horizontal = LR', 'vertical = TB'.\n    orient: 'LR',\n    symbol: 'emptyCircle',\n    symbolSize: 7,\n    expandAndCollapse: true,\n    initialTreeDepth: 2,\n    lineStyle: {\n      color: '#ccc',\n      width: 1.5,\n      curveness: 0.5\n    },\n    itemStyle: {\n      color: 'lightsteelblue',\n      borderColor: '#c23531',\n      borderWidth: 1.5\n    },\n    label: {\n      show: true,\n      color: '#555'\n    },\n    leaves: {\n      label: {\n        show: true\n      }\n    },\n    animationEasing: 'linear',\n    animationDuration: 700,\n    animationDurationUpdate: 1000\n  }\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar layout = require(\"../../util/layout\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* A third-party license is embeded for some of the code in this file:\n* The tree layoutHelper implementation was originally copied from\n* \"d3.js\"(https://github.com/d3/d3-hierarchy) with\n* some modifications made for this project.\n* (see more details in the comment of the specific method below.)\n* The use of the source code of this file is also subject to the terms\n* and consitions of the licence of \"d3.js\" (BSD-3Clause, see\n* </licenses/LICENSE-d3>).\n*/\n\n/**\n * @file The layout algorithm of node-link tree diagrams. Here we using Reingold-Tilford algorithm to drawing\n *       the tree.\n */\n\n/**\n * Initialize all computational message for following algorithm.\n *\n * @param  {module:echarts/data/Tree~TreeNode} root   The virtual root of the tree.\n */\nfunction init(root) {\n  root.hierNode = {\n    defaultAncestor: null,\n    ancestor: root,\n    prelim: 0,\n    modifier: 0,\n    change: 0,\n    shift: 0,\n    i: 0,\n    thread: null\n  };\n  var nodes = [root];\n  var node;\n  var children;\n\n  while (node = nodes.pop()) {\n    // jshint ignore:line\n    children = node.children;\n\n    if (node.isExpand && children.length) {\n      var n = children.length;\n\n      for (var i = n - 1; i >= 0; i--) {\n        var child = children[i];\n        child.hierNode = {\n          defaultAncestor: null,\n          ancestor: child,\n          prelim: 0,\n          modifier: 0,\n          change: 0,\n          shift: 0,\n          i: i,\n          thread: null\n        };\n        nodes.push(child);\n      }\n    }\n  }\n}\n/**\n * The implementation of this function was originally copied from \"d3.js\"\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\n * with some modifications made for this program.\n * See the license statement at the head of this file.\n *\n * Computes a preliminary x coordinate for node. Before that, this function is\n * applied recursively to the children of node, as well as the function\n * apportion(). After spacing out the children by calling executeShifts(), the\n * node is placed to the midpoint of its outermost children.\n *\n * @param  {module:echarts/data/Tree~TreeNode} node\n * @param {Function} separation\n */\n\n\nfunction firstWalk(node, separation) {\n  var children = node.isExpand ? node.children : [];\n  var siblings = node.parentNode.children;\n  var subtreeW = node.hierNode.i ? siblings[node.hierNode.i - 1] : null;\n\n  if (children.length) {\n    executeShifts(node);\n    var midPoint = (children[0].hierNode.prelim + children[children.length - 1].hierNode.prelim) / 2;\n\n    if (subtreeW) {\n      node.hierNode.prelim = subtreeW.hierNode.prelim + separation(node, subtreeW);\n      node.hierNode.modifier = node.hierNode.prelim - midPoint;\n    } else {\n      node.hierNode.prelim = midPoint;\n    }\n  } else if (subtreeW) {\n    node.hierNode.prelim = subtreeW.hierNode.prelim + separation(node, subtreeW);\n  }\n\n  node.parentNode.hierNode.defaultAncestor = apportion(node, subtreeW, node.parentNode.hierNode.defaultAncestor || siblings[0], separation);\n}\n/**\n * The implementation of this function was originally copied from \"d3.js\"\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\n * with some modifications made for this program.\n * See the license statement at the head of this file.\n *\n * Computes all real x-coordinates by summing up the modifiers recursively.\n *\n * @param  {module:echarts/data/Tree~TreeNode} node\n */\n\n\nfunction secondWalk(node) {\n  var nodeX = node.hierNode.prelim + node.parentNode.hierNode.modifier;\n  node.setLayout({\n    x: nodeX\n  }, true);\n  node.hierNode.modifier += node.parentNode.hierNode.modifier;\n}\n\nfunction separation(cb) {\n  return arguments.length ? cb : defaultSeparation;\n}\n/**\n * Transform the common coordinate to radial coordinate.\n *\n * @param  {number} x\n * @param  {number} y\n * @return {Object}\n */\n\n\nfunction radialCoordinate(x, y) {\n  var radialCoor = {};\n  x -= Math.PI / 2;\n  radialCoor.x = y * Math.cos(x);\n  radialCoor.y = y * Math.sin(x);\n  return radialCoor;\n}\n/**\n * Get the layout position of the whole view.\n *\n * @param {module:echarts/model/Series} seriesModel  the model object of sankey series\n * @param {module:echarts/ExtensionAPI} api  provide the API list that the developer can call\n * @return {module:zrender/core/BoundingRect}  size of rect to draw the sankey view\n */\n\n\nfunction getViewRect(seriesModel, api) {\n  return layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\n/**\n * All other shifts, applied to the smaller subtrees between w- and w+, are\n * performed by this function.\n *\n * The implementation of this function was originally copied from \"d3.js\"\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\n * with some modifications made for this program.\n * See the license statement at the head of this file.\n *\n * @param  {module:echarts/data/Tree~TreeNode} node\n */\n\n\nfunction executeShifts(node) {\n  var children = node.children;\n  var n = children.length;\n  var shift = 0;\n  var change = 0;\n\n  while (--n >= 0) {\n    var child = children[n];\n    child.hierNode.prelim += shift;\n    child.hierNode.modifier += shift;\n    change += child.hierNode.change;\n    shift += child.hierNode.shift + change;\n  }\n}\n/**\n * The implementation of this function was originally copied from \"d3.js\"\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\n * with some modifications made for this program.\n * See the license statement at the head of this file.\n *\n * The core of the algorithm. Here, a new subtree is combined with the\n * previous subtrees. Threads are used to traverse the inside and outside\n * contours of the left and right subtree up to the highest common level.\n * Whenever two nodes of the inside contours conflict, we compute the left\n * one of the greatest uncommon ancestors using the function nextAncestor()\n * and call moveSubtree() to shift the subtree and prepare the shifts of\n * smaller subtrees. Finally, we add a new thread (if necessary).\n *\n * @param  {module:echarts/data/Tree~TreeNode} subtreeV\n * @param  {module:echarts/data/Tree~TreeNode} subtreeW\n * @param  {module:echarts/data/Tree~TreeNode} ancestor\n * @param  {Function} separation\n * @return {module:echarts/data/Tree~TreeNode}\n */\n\n\nfunction apportion(subtreeV, subtreeW, ancestor, separation) {\n  if (subtreeW) {\n    var nodeOutRight = subtreeV;\n    var nodeInRight = subtreeV;\n    var nodeOutLeft = nodeInRight.parentNode.children[0];\n    var nodeInLeft = subtreeW;\n    var sumOutRight = nodeOutRight.hierNode.modifier;\n    var sumInRight = nodeInRight.hierNode.modifier;\n    var sumOutLeft = nodeOutLeft.hierNode.modifier;\n    var sumInLeft = nodeInLeft.hierNode.modifier;\n\n    while (nodeInLeft = nextRight(nodeInLeft), nodeInRight = nextLeft(nodeInRight), nodeInLeft && nodeInRight) {\n      nodeOutRight = nextRight(nodeOutRight);\n      nodeOutLeft = nextLeft(nodeOutLeft);\n      nodeOutRight.hierNode.ancestor = subtreeV;\n      var shift = nodeInLeft.hierNode.prelim + sumInLeft - nodeInRight.hierNode.prelim - sumInRight + separation(nodeInLeft, nodeInRight);\n\n      if (shift > 0) {\n        moveSubtree(nextAncestor(nodeInLeft, subtreeV, ancestor), subtreeV, shift);\n        sumInRight += shift;\n        sumOutRight += shift;\n      }\n\n      sumInLeft += nodeInLeft.hierNode.modifier;\n      sumInRight += nodeInRight.hierNode.modifier;\n      sumOutRight += nodeOutRight.hierNode.modifier;\n      sumOutLeft += nodeOutLeft.hierNode.modifier;\n    }\n\n    if (nodeInLeft && !nextRight(nodeOutRight)) {\n      nodeOutRight.hierNode.thread = nodeInLeft;\n      nodeOutRight.hierNode.modifier += sumInLeft - sumOutRight;\n    }\n\n    if (nodeInRight && !nextLeft(nodeOutLeft)) {\n      nodeOutLeft.hierNode.thread = nodeInRight;\n      nodeOutLeft.hierNode.modifier += sumInRight - sumOutLeft;\n      ancestor = subtreeV;\n    }\n  }\n\n  return ancestor;\n}\n/**\n * This function is used to traverse the right contour of a subtree.\n * It returns the rightmost child of node or the thread of node. The function\n * returns null if and only if node is on the highest depth of its subtree.\n *\n * @param  {module:echarts/data/Tree~TreeNode} node\n * @return {module:echarts/data/Tree~TreeNode}\n */\n\n\nfunction nextRight(node) {\n  var children = node.children;\n  return children.length && node.isExpand ? children[children.length - 1] : node.hierNode.thread;\n}\n/**\n * This function is used to traverse the left contour of a subtree (or a subforest).\n * It returns the leftmost child of node or the thread of node. The function\n * returns null if and only if node is on the highest depth of its subtree.\n *\n * @param  {module:echarts/data/Tree~TreeNode} node\n * @return {module:echarts/data/Tree~TreeNode}\n */\n\n\nfunction nextLeft(node) {\n  var children = node.children;\n  return children.length && node.isExpand ? children[0] : node.hierNode.thread;\n}\n/**\n * If nodeInLefts ancestor is a sibling of node, returns nodeInLefts ancestor.\n * Otherwise, returns the specified ancestor.\n *\n * @param  {module:echarts/data/Tree~TreeNode} nodeInLeft\n * @param  {module:echarts/data/Tree~TreeNode} node\n * @param  {module:echarts/data/Tree~TreeNode} ancestor\n * @return {module:echarts/data/Tree~TreeNode}\n */\n\n\nfunction nextAncestor(nodeInLeft, node, ancestor) {\n  return nodeInLeft.hierNode.ancestor.parentNode === node.parentNode ? nodeInLeft.hierNode.ancestor : ancestor;\n}\n/**\n * The implementation of this function was originally copied from \"d3.js\"\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\n * with some modifications made for this program.\n * See the license statement at the head of this file.\n *\n * Shifts the current subtree rooted at wr.\n * This is done by increasing prelim(w+) and modifier(w+) by shift.\n *\n * @param  {module:echarts/data/Tree~TreeNode} wl\n * @param  {module:echarts/data/Tree~TreeNode} wr\n * @param  {number} shift [description]\n */\n\n\nfunction moveSubtree(wl, wr, shift) {\n  var change = shift / (wr.hierNode.i - wl.hierNode.i);\n  wr.hierNode.change -= change;\n  wr.hierNode.shift += shift;\n  wr.hierNode.modifier += shift;\n  wr.hierNode.prelim += shift;\n  wl.hierNode.change += change;\n}\n/**\n * The implementation of this function was originally copied from \"d3.js\"\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\n * with some modifications made for this program.\n * See the license statement at the head of this file.\n */\n\n\nfunction defaultSeparation(node1, node2) {\n  return node1.parentNode === node2.parentNode ? 1 : 2;\n}\n\nexports.init = init;\nexports.firstWalk = firstWalk;\nexports.secondWalk = secondWalk;\nexports.separation = separation;\nexports.radialCoordinate = radialCoordinate;\nexports.getViewRect = getViewRect;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Link lists and struct (graph or tree)\n */\nvar each = zrUtil.each;\nvar DATAS = '\\0__link_datas';\nvar MAIN_DATA = '\\0__link_mainData'; // Caution:\n// In most case, either list or its shallow clones (see list.cloneShallow)\n// is active in echarts process. So considering heap memory consumption,\n// we do not clone tree or graph, but share them among list and its shallow clones.\n// But in some rare case, we have to keep old list (like do animation in chart). So\n// please take care that both the old list and the new list share the same tree/graph.\n\n/**\n * @param {Object} opt\n * @param {module:echarts/data/List} opt.mainData\n * @param {Object} [opt.struct] For example, instance of Graph or Tree.\n * @param {string} [opt.structAttr] designation: list[structAttr] = struct;\n * @param {Object} [opt.datas] {dataType: data},\n *                 like: {node: nodeList, edge: edgeList}.\n *                 Should contain mainData.\n * @param {Object} [opt.datasAttr] {dataType: attr},\n *                 designation: struct[datasAttr[dataType]] = list;\n */\n\nfunction linkList(opt) {\n  var mainData = opt.mainData;\n  var datas = opt.datas;\n\n  if (!datas) {\n    datas = {\n      main: mainData\n    };\n    opt.datasAttr = {\n      main: 'data'\n    };\n  }\n\n  opt.datas = opt.mainData = null;\n  linkAll(mainData, datas, opt); // Porxy data original methods.\n\n  each(datas, function (data) {\n    each(mainData.TRANSFERABLE_METHODS, function (methodName) {\n      data.wrapMethod(methodName, zrUtil.curry(transferInjection, opt));\n    });\n  }); // Beyond transfer, additional features should be added to `cloneShallow`.\n\n  mainData.wrapMethod('cloneShallow', zrUtil.curry(cloneShallowInjection, opt)); // Only mainData trigger change, because struct.update may trigger\n  // another changable methods, which may bring about dead lock.\n\n  each(mainData.CHANGABLE_METHODS, function (methodName) {\n    mainData.wrapMethod(methodName, zrUtil.curry(changeInjection, opt));\n  }); // Make sure datas contains mainData.\n\n  zrUtil.assert(datas[mainData.dataType] === mainData);\n}\n\nfunction transferInjection(opt, res) {\n  if (isMainData(this)) {\n    // Transfer datas to new main data.\n    var datas = zrUtil.extend({}, this[DATAS]);\n    datas[this.dataType] = res;\n    linkAll(res, datas, opt);\n  } else {\n    // Modify the reference in main data to point newData.\n    linkSingle(res, this.dataType, this[MAIN_DATA], opt);\n  }\n\n  return res;\n}\n\nfunction changeInjection(opt, res) {\n  opt.struct && opt.struct.update(this);\n  return res;\n}\n\nfunction cloneShallowInjection(opt, res) {\n  // cloneShallow, which brings about some fragilities, may be inappropriate\n  // to be exposed as an API. So for implementation simplicity we can make\n  // the restriction that cloneShallow of not-mainData should not be invoked\n  // outside, but only be invoked here.\n  each(res[DATAS], function (data, dataType) {\n    data !== res && linkSingle(data.cloneShallow(), dataType, res, opt);\n  });\n  return res;\n}\n/**\n * Supplement method to List.\n *\n * @public\n * @param {string} [dataType] If not specified, return mainData.\n * @return {module:echarts/data/List}\n */\n\n\nfunction getLinkedData(dataType) {\n  var mainData = this[MAIN_DATA];\n  return dataType == null || mainData == null ? mainData : mainData[DATAS][dataType];\n}\n\nfunction isMainData(data) {\n  return data[MAIN_DATA] === data;\n}\n\nfunction linkAll(mainData, datas, opt) {\n  mainData[DATAS] = {};\n  each(datas, function (data, dataType) {\n    linkSingle(data, dataType, mainData, opt);\n  });\n}\n\nfunction linkSingle(data, dataType, mainData, opt) {\n  mainData[DATAS][dataType] = data;\n  data[MAIN_DATA] = mainData;\n  data.dataType = dataType;\n\n  if (opt.struct) {\n    data[opt.structAttr] = opt.struct;\n    opt.struct[opt.datasAttr[dataType]] = data;\n  } // Supplement method.\n\n\n  data.getLinkedData = getLinkedData;\n}\n\nvar _default = linkList;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar TooltipContent = require(\"./TooltipContent\");\n\nvar TooltipRichContent = require(\"./TooltipRichContent\");\n\nvar formatUtil = require(\"../../util/format\");\n\nvar numberUtil = require(\"../../util/number\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar findPointFromSeries = require(\"../axisPointer/findPointFromSeries\");\n\nvar layoutUtil = require(\"../../util/layout\");\n\nvar Model = require(\"../../model/Model\");\n\nvar globalListener = require(\"../axisPointer/globalListener\");\n\nvar axisHelper = require(\"../../coord/axisHelper\");\n\nvar axisPointerViewHelper = require(\"../axisPointer/viewHelper\");\n\nvar _model = require(\"../../util/model\");\n\nvar getTooltipRenderMode = _model.getTooltipRenderMode;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar bind = zrUtil.bind;\nvar each = zrUtil.each;\nvar parsePercent = numberUtil.parsePercent;\nvar proxyRect = new graphic.Rect({\n  shape: {\n    x: -1,\n    y: -1,\n    width: 2,\n    height: 2\n  }\n});\n\nvar _default = echarts.extendComponentView({\n  type: 'tooltip',\n  init: function (ecModel, api) {\n    if (env.node) {\n      return;\n    }\n\n    var tooltipModel = ecModel.getComponent('tooltip');\n    var renderMode = tooltipModel.get('renderMode');\n    this._renderMode = getTooltipRenderMode(renderMode);\n    var tooltipContent;\n\n    if (this._renderMode === 'html') {\n      tooltipContent = new TooltipContent(api.getDom(), api, {\n        appendToBody: tooltipModel.get('appendToBody', true)\n      });\n      this._newLine = '<br/>';\n    } else {\n      tooltipContent = new TooltipRichContent(api);\n      this._newLine = '\\n';\n    }\n\n    this._tooltipContent = tooltipContent;\n  },\n  render: function (tooltipModel, ecModel, api) {\n    if (env.node) {\n      return;\n    } // Reset\n\n\n    this.group.removeAll();\n    /**\n     * @private\n     * @type {module:echarts/component/tooltip/TooltipModel}\n     */\n\n    this._tooltipModel = tooltipModel;\n    /**\n     * @private\n     * @type {module:echarts/model/Global}\n     */\n\n    this._ecModel = ecModel;\n    /**\n     * @private\n     * @type {module:echarts/ExtensionAPI}\n     */\n\n    this._api = api;\n    /**\n     * Should be cleaned when render.\n     * @private\n     * @type {Array.<Array.<Object>>}\n     */\n\n    this._lastDataByCoordSys = null;\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n    this._alwaysShowContent = tooltipModel.get('alwaysShowContent');\n    var tooltipContent = this._tooltipContent;\n    tooltipContent.update();\n    tooltipContent.setEnterable(tooltipModel.get('enterable'));\n\n    this._initGlobalListener();\n\n    this._keepShow();\n  },\n  _initGlobalListener: function () {\n    var tooltipModel = this._tooltipModel;\n    var triggerOn = tooltipModel.get('triggerOn');\n    globalListener.register('itemTooltip', this._api, bind(function (currTrigger, e, dispatchAction) {\n      // If 'none', it is not controlled by mouse totally.\n      if (triggerOn !== 'none') {\n        if (triggerOn.indexOf(currTrigger) >= 0) {\n          this._tryShow(e, dispatchAction);\n        } else if (currTrigger === 'leave') {\n          this._hide(dispatchAction);\n        }\n      }\n    }, this));\n  },\n  _keepShow: function () {\n    var tooltipModel = this._tooltipModel;\n    var ecModel = this._ecModel;\n    var api = this._api; // Try to keep the tooltip show when refreshing\n\n    if (this._lastX != null && this._lastY != null // When user is willing to control tooltip totally using API,\n    // self.manuallyShowTip({x, y}) might cause tooltip hide,\n    // which is not expected.\n    && tooltipModel.get('triggerOn') !== 'none') {\n      var self = this;\n      clearTimeout(this._refreshUpdateTimeout);\n      this._refreshUpdateTimeout = setTimeout(function () {\n        // Show tip next tick after other charts are rendered\n        // In case highlight action has wrong result\n        // FIXME\n        !api.isDisposed() && self.manuallyShowTip(tooltipModel, ecModel, api, {\n          x: self._lastX,\n          y: self._lastY\n        });\n      });\n    }\n  },\n\n  /**\n   * Show tip manually by\n   * dispatchAction({\n   *     type: 'showTip',\n   *     x: 10,\n   *     y: 10\n   * });\n   * Or\n   * dispatchAction({\n   *      type: 'showTip',\n   *      seriesIndex: 0,\n   *      dataIndex or dataIndexInside or name\n   * });\n   *\n   *  TODO Batch\n   */\n  manuallyShowTip: function (tooltipModel, ecModel, api, payload) {\n    if (payload.from === this.uid || env.node) {\n      return;\n    }\n\n    var dispatchAction = makeDispatchAction(payload, api); // Reset ticket\n\n    this._ticket = ''; // When triggered from axisPointer.\n\n    var dataByCoordSys = payload.dataByCoordSys;\n\n    if (payload.tooltip && payload.x != null && payload.y != null) {\n      var el = proxyRect;\n      el.position = [payload.x, payload.y];\n      el.update();\n      el.tooltip = payload.tooltip; // Manually show tooltip while view is not using zrender elements.\n\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        target: el\n      }, dispatchAction);\n    } else if (dataByCoordSys) {\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        dataByCoordSys: payload.dataByCoordSys,\n        tooltipOption: payload.tooltipOption\n      }, dispatchAction);\n    } else if (payload.seriesIndex != null) {\n      if (this._manuallyAxisShowTip(tooltipModel, ecModel, api, payload)) {\n        return;\n      }\n\n      var pointInfo = findPointFromSeries(payload, ecModel);\n      var cx = pointInfo.point[0];\n      var cy = pointInfo.point[1];\n\n      if (cx != null && cy != null) {\n        this._tryShow({\n          offsetX: cx,\n          offsetY: cy,\n          position: payload.position,\n          target: pointInfo.el\n        }, dispatchAction);\n      }\n    } else if (payload.x != null && payload.y != null) {\n      // FIXME\n      // should wrap dispatchAction like `axisPointer/globalListener` ?\n      api.dispatchAction({\n        type: 'updateAxisPointer',\n        x: payload.x,\n        y: payload.y\n      });\n\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        target: api.getZr().findHover(payload.x, payload.y).target\n      }, dispatchAction);\n    }\n  },\n  manuallyHideTip: function (tooltipModel, ecModel, api, payload) {\n    var tooltipContent = this._tooltipContent;\n\n    if (!this._alwaysShowContent && this._tooltipModel) {\n      tooltipContent.hideLater(this._tooltipModel.get('hideDelay'));\n    }\n\n    this._lastX = this._lastY = null;\n\n    if (payload.from !== this.uid) {\n      this._hide(makeDispatchAction(payload, api));\n    }\n  },\n  // Be compatible with previous design, that is, when tooltip.type is 'axis' and\n  // dispatchAction 'showTip' with seriesIndex and dataIndex will trigger axis pointer\n  // and tooltip.\n  _manuallyAxisShowTip: function (tooltipModel, ecModel, api, payload) {\n    var seriesIndex = payload.seriesIndex;\n    var dataIndex = payload.dataIndex;\n    var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo;\n\n    if (seriesIndex == null || dataIndex == null || coordSysAxesInfo == null) {\n      return;\n    }\n\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n\n    if (!seriesModel) {\n      return;\n    }\n\n    var data = seriesModel.getData();\n    var tooltipModel = buildTooltipModel([data.getItemModel(dataIndex), seriesModel, (seriesModel.coordinateSystem || {}).model, tooltipModel]);\n\n    if (tooltipModel.get('trigger') !== 'axis') {\n      return;\n    }\n\n    api.dispatchAction({\n      type: 'updateAxisPointer',\n      seriesIndex: seriesIndex,\n      dataIndex: dataIndex,\n      position: payload.position\n    });\n    return true;\n  },\n  _tryShow: function (e, dispatchAction) {\n    var el = e.target;\n    var tooltipModel = this._tooltipModel;\n\n    if (!tooltipModel) {\n      return;\n    } // Save mouse x, mouse y. So we can try to keep showing the tip if chart is refreshed\n\n\n    this._lastX = e.offsetX;\n    this._lastY = e.offsetY;\n    var dataByCoordSys = e.dataByCoordSys;\n\n    if (dataByCoordSys && dataByCoordSys.length) {\n      this._showAxisTooltip(dataByCoordSys, e);\n    } // Always show item tooltip if mouse is on the element with dataIndex\n    else if (el && el.dataIndex != null) {\n        this._lastDataByCoordSys = null;\n\n        this._showSeriesItemTooltip(e, el, dispatchAction);\n      } // Tooltip provided directly. Like legend.\n      else if (el && el.tooltip) {\n          this._lastDataByCoordSys = null;\n\n          this._showComponentItemTooltip(e, el, dispatchAction);\n        } else {\n          this._lastDataByCoordSys = null;\n\n          this._hide(dispatchAction);\n        }\n  },\n  _showOrMove: function (tooltipModel, cb) {\n    // showDelay is used in this case: tooltip.enterable is set\n    // as true. User intent to move mouse into tooltip and click\n    // something. `showDelay` makes it easyer to enter the content\n    // but tooltip do not move immediately.\n    var delay = tooltipModel.get('showDelay');\n    cb = zrUtil.bind(cb, this);\n    clearTimeout(this._showTimout);\n    delay > 0 ? this._showTimout = setTimeout(cb, delay) : cb();\n  },\n  _showAxisTooltip: function (dataByCoordSys, e) {\n    var ecModel = this._ecModel;\n    var globalTooltipModel = this._tooltipModel;\n    var point = [e.offsetX, e.offsetY];\n    var singleDefaultHTML = [];\n    var singleParamsList = [];\n    var singleTooltipModel = buildTooltipModel([e.tooltipOption, globalTooltipModel]);\n    var renderMode = this._renderMode;\n    var newLine = this._newLine;\n    var markers = {};\n    each(dataByCoordSys, function (itemCoordSys) {\n      // var coordParamList = [];\n      // var coordDefaultHTML = [];\n      // var coordTooltipModel = buildTooltipModel([\n      //     e.tooltipOption,\n      //     itemCoordSys.tooltipOption,\n      //     ecModel.getComponent(itemCoordSys.coordSysMainType, itemCoordSys.coordSysIndex),\n      //     globalTooltipModel\n      // ]);\n      // var displayMode = coordTooltipModel.get('displayMode');\n      // var paramsList = displayMode === 'single' ? singleParamsList : [];\n      each(itemCoordSys.dataByAxis, function (item) {\n        var axisModel = ecModel.getComponent(item.axisDim + 'Axis', item.axisIndex);\n        var axisValue = item.value;\n        var seriesDefaultHTML = [];\n\n        if (!axisModel || axisValue == null) {\n          return;\n        }\n\n        var valueLabel = axisPointerViewHelper.getValueLabel(axisValue, axisModel.axis, ecModel, item.seriesDataIndices, item.valueLabelOpt);\n        zrUtil.each(item.seriesDataIndices, function (idxItem) {\n          var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n          var dataIndex = idxItem.dataIndexInside;\n          var dataParams = series && series.getDataParams(dataIndex);\n          dataParams.axisDim = item.axisDim;\n          dataParams.axisIndex = item.axisIndex;\n          dataParams.axisType = item.axisType;\n          dataParams.axisId = item.axisId;\n          dataParams.axisValue = axisHelper.getAxisRawValue(axisModel.axis, axisValue);\n          dataParams.axisValueLabel = valueLabel;\n\n          if (dataParams) {\n            singleParamsList.push(dataParams);\n            var seriesTooltip = series.formatTooltip(dataIndex, true, null, renderMode);\n            var html;\n\n            if (zrUtil.isObject(seriesTooltip)) {\n              html = seriesTooltip.html;\n              var newMarkers = seriesTooltip.markers;\n              zrUtil.merge(markers, newMarkers);\n            } else {\n              html = seriesTooltip;\n            }\n\n            seriesDefaultHTML.push(html);\n          }\n        }); // Default tooltip content\n        // FIXME\n        // (1) shold be the first data which has name?\n        // (2) themeRiver, firstDataIndex is array, and first line is unnecessary.\n\n        var firstLine = valueLabel;\n\n        if (renderMode !== 'html') {\n          singleDefaultHTML.push(seriesDefaultHTML.join(newLine));\n        } else {\n          singleDefaultHTML.push((firstLine ? formatUtil.encodeHTML(firstLine) + newLine : '') + seriesDefaultHTML.join(newLine));\n        }\n      });\n    }, this); // In most case, the second axis is shown upper than the first one.\n\n    singleDefaultHTML.reverse();\n    singleDefaultHTML = singleDefaultHTML.join(this._newLine + this._newLine);\n    var positionExpr = e.position;\n\n    this._showOrMove(singleTooltipModel, function () {\n      if (this._updateContentNotChangedOnAxis(dataByCoordSys)) {\n        this._updatePosition(singleTooltipModel, positionExpr, point[0], point[1], this._tooltipContent, singleParamsList);\n      } else {\n        this._showTooltipContent(singleTooltipModel, singleDefaultHTML, singleParamsList, Math.random(), point[0], point[1], positionExpr, undefined, markers);\n      }\n    }); // Do not trigger events here, because this branch only be entered\n    // from dispatchAction.\n\n  },\n  _showSeriesItemTooltip: function (e, el, dispatchAction) {\n    var ecModel = this._ecModel; // Use dataModel in element if possible\n    // Used when mouseover on a element like markPoint or edge\n    // In which case, the data is not main data in series.\n\n    var seriesIndex = el.seriesIndex;\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex); // For example, graph link.\n\n    var dataModel = el.dataModel || seriesModel;\n    var dataIndex = el.dataIndex;\n    var dataType = el.dataType;\n    var data = dataModel.getData(dataType);\n    var tooltipModel = buildTooltipModel([data.getItemModel(dataIndex), dataModel, seriesModel && (seriesModel.coordinateSystem || {}).model, this._tooltipModel]);\n    var tooltipTrigger = tooltipModel.get('trigger');\n\n    if (tooltipTrigger != null && tooltipTrigger !== 'item') {\n      return;\n    }\n\n    var params = dataModel.getDataParams(dataIndex, dataType);\n    var seriesTooltip = dataModel.formatTooltip(dataIndex, false, dataType, this._renderMode);\n    var defaultHtml;\n    var markers;\n\n    if (zrUtil.isObject(seriesTooltip)) {\n      defaultHtml = seriesTooltip.html;\n      markers = seriesTooltip.markers;\n    } else {\n      defaultHtml = seriesTooltip;\n      markers = null;\n    }\n\n    var asyncTicket = 'item_' + dataModel.name + '_' + dataIndex;\n\n    this._showOrMove(tooltipModel, function () {\n      this._showTooltipContent(tooltipModel, defaultHtml, params, asyncTicket, e.offsetX, e.offsetY, e.position, e.target, markers);\n    }); // FIXME\n    // duplicated showtip if manuallyShowTip is called from dispatchAction.\n\n\n    dispatchAction({\n      type: 'showTip',\n      dataIndexInside: dataIndex,\n      dataIndex: data.getRawIndex(dataIndex),\n      seriesIndex: seriesIndex,\n      from: this.uid\n    });\n  },\n  _showComponentItemTooltip: function (e, el, dispatchAction) {\n    var tooltipOpt = el.tooltip;\n\n    if (typeof tooltipOpt === 'string') {\n      var content = tooltipOpt;\n      tooltipOpt = {\n        content: content,\n        // Fixed formatter\n        formatter: content\n      };\n    }\n\n    var subTooltipModel = new Model(tooltipOpt, this._tooltipModel, this._ecModel);\n    var defaultHtml = subTooltipModel.get('content');\n    var asyncTicket = Math.random(); // Do not check whether `trigger` is 'none' here, because `trigger`\n    // only works on cooridinate system. In fact, we have not found case\n    // that requires setting `trigger` nothing on component yet.\n\n    this._showOrMove(subTooltipModel, function () {\n      this._showTooltipContent(subTooltipModel, defaultHtml, subTooltipModel.get('formatterParams') || {}, asyncTicket, e.offsetX, e.offsetY, e.position, el);\n    }); // If not dispatch showTip, tip may be hide triggered by axis.\n\n\n    dispatchAction({\n      type: 'showTip',\n      from: this.uid\n    });\n  },\n  _showTooltipContent: function (tooltipModel, defaultHtml, params, asyncTicket, x, y, positionExpr, el, markers) {\n    // Reset ticket\n    this._ticket = '';\n\n    if (!tooltipModel.get('showContent') || !tooltipModel.get('show')) {\n      return;\n    }\n\n    var tooltipContent = this._tooltipContent;\n    var formatter = tooltipModel.get('formatter');\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var html = defaultHtml;\n\n    if (formatter && typeof formatter === 'string') {\n      html = formatUtil.formatTpl(formatter, params, true);\n    } else if (typeof formatter === 'function') {\n      var callback = bind(function (cbTicket, html) {\n        if (cbTicket === this._ticket) {\n          tooltipContent.setContent(html, markers, tooltipModel);\n\n          this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n        }\n      }, this);\n      this._ticket = asyncTicket;\n      html = formatter(params, asyncTicket, callback);\n    }\n\n    tooltipContent.setContent(html, markers, tooltipModel);\n    tooltipContent.show(tooltipModel);\n\n    this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n  },\n\n  /**\n   * @param  {string|Function|Array.<number>|Object} positionExpr\n   * @param  {number} x Mouse x\n   * @param  {number} y Mouse y\n   * @param  {boolean} confine Whether confine tooltip content in view rect.\n   * @param  {Object|<Array.<Object>} params\n   * @param  {module:zrender/Element} el target element\n   * @param  {module:echarts/ExtensionAPI} api\n   * @return {Array.<number>}\n   */\n  _updatePosition: function (tooltipModel, positionExpr, x, y, content, params, el) {\n    var viewWidth = this._api.getWidth();\n\n    var viewHeight = this._api.getHeight();\n\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var contentSize = content.getSize();\n    var align = tooltipModel.get('align');\n    var vAlign = tooltipModel.get('verticalAlign');\n    var rect = el && el.getBoundingRect().clone();\n    el && rect.applyTransform(el.transform);\n\n    if (typeof positionExpr === 'function') {\n      // Callback of position can be an array or a string specify the position\n      positionExpr = positionExpr([x, y], params, content.el, rect, {\n        viewSize: [viewWidth, viewHeight],\n        contentSize: contentSize.slice()\n      });\n    }\n\n    if (zrUtil.isArray(positionExpr)) {\n      x = parsePercent(positionExpr[0], viewWidth);\n      y = parsePercent(positionExpr[1], viewHeight);\n    } else if (zrUtil.isObject(positionExpr)) {\n      positionExpr.width = contentSize[0];\n      positionExpr.height = contentSize[1];\n      var layoutRect = layoutUtil.getLayoutRect(positionExpr, {\n        width: viewWidth,\n        height: viewHeight\n      });\n      x = layoutRect.x;\n      y = layoutRect.y;\n      align = null; // When positionExpr is left/top/right/bottom,\n      // align and verticalAlign will not work.\n\n      vAlign = null;\n    } // Specify tooltip position by string 'top' 'bottom' 'left' 'right' around graphic element\n    else if (typeof positionExpr === 'string' && el) {\n        var pos = calcTooltipPosition(positionExpr, rect, contentSize);\n        x = pos[0];\n        y = pos[1];\n      } else {\n        var pos = refixTooltipPosition(x, y, content, viewWidth, viewHeight, align ? null : 20, vAlign ? null : 20);\n        x = pos[0];\n        y = pos[1];\n      }\n\n    align && (x -= isCenterAlign(align) ? contentSize[0] / 2 : align === 'right' ? contentSize[0] : 0);\n    vAlign && (y -= isCenterAlign(vAlign) ? contentSize[1] / 2 : vAlign === 'bottom' ? contentSize[1] : 0);\n\n    if (tooltipModel.get('confine')) {\n      var pos = confineTooltipPosition(x, y, content, viewWidth, viewHeight);\n      x = pos[0];\n      y = pos[1];\n    }\n\n    content.moveTo(x, y);\n  },\n  // FIXME\n  // Should we remove this but leave this to user?\n  _updateContentNotChangedOnAxis: function (dataByCoordSys) {\n    var lastCoordSys = this._lastDataByCoordSys;\n    var contentNotChanged = !!lastCoordSys && lastCoordSys.length === dataByCoordSys.length;\n    contentNotChanged && each(lastCoordSys, function (lastItemCoordSys, indexCoordSys) {\n      var lastDataByAxis = lastItemCoordSys.dataByAxis || {};\n      var thisItemCoordSys = dataByCoordSys[indexCoordSys] || {};\n      var thisDataByAxis = thisItemCoordSys.dataByAxis || [];\n      contentNotChanged &= lastDataByAxis.length === thisDataByAxis.length;\n      contentNotChanged && each(lastDataByAxis, function (lastItem, indexAxis) {\n        var thisItem = thisDataByAxis[indexAxis] || {};\n        var lastIndices = lastItem.seriesDataIndices || [];\n        var newIndices = thisItem.seriesDataIndices || [];\n        contentNotChanged &= lastItem.value === thisItem.value && lastItem.axisType === thisItem.axisType && lastItem.axisId === thisItem.axisId && lastIndices.length === newIndices.length;\n        contentNotChanged && each(lastIndices, function (lastIdxItem, j) {\n          var newIdxItem = newIndices[j];\n          contentNotChanged &= lastIdxItem.seriesIndex === newIdxItem.seriesIndex && lastIdxItem.dataIndex === newIdxItem.dataIndex;\n        });\n      });\n    });\n    this._lastDataByCoordSys = dataByCoordSys;\n    return !!contentNotChanged;\n  },\n  _hide: function (dispatchAction) {\n    // Do not directly hideLater here, because this behavior may be prevented\n    // in dispatchAction when showTip is dispatched.\n    // FIXME\n    // duplicated hideTip if manuallyHideTip is called from dispatchAction.\n    this._lastDataByCoordSys = null;\n    dispatchAction({\n      type: 'hideTip',\n      from: this.uid\n    });\n  },\n  dispose: function (ecModel, api) {\n    if (env.node) {\n      return;\n    }\n\n    this._tooltipContent.dispose();\n\n    globalListener.unregister('itemTooltip', api);\n  }\n});\n/**\n * @param {Array.<Object|module:echarts/model/Model>} modelCascade\n * From top to bottom. (the last one should be globalTooltipModel);\n */\n\n\nfunction buildTooltipModel(modelCascade) {\n  var resultModel = modelCascade.pop();\n\n  while (modelCascade.length) {\n    var tooltipOpt = modelCascade.pop();\n\n    if (tooltipOpt) {\n      if (Model.isInstance(tooltipOpt)) {\n        tooltipOpt = tooltipOpt.get('tooltip', true);\n      } // In each data item tooltip can be simply write:\n      // {\n      //  value: 10,\n      //  tooltip: 'Something you need to know'\n      // }\n\n\n      if (typeof tooltipOpt === 'string') {\n        tooltipOpt = {\n          formatter: tooltipOpt\n        };\n      }\n\n      resultModel = new Model(tooltipOpt, resultModel, resultModel.ecModel);\n    }\n  }\n\n  return resultModel;\n}\n\nfunction makeDispatchAction(payload, api) {\n  return payload.dispatchAction || zrUtil.bind(api.dispatchAction, api);\n}\n\nfunction refixTooltipPosition(x, y, content, viewWidth, viewHeight, gapH, gapV) {\n  var size = content.getOuterSize();\n  var width = size.width;\n  var height = size.height;\n\n  if (gapH != null) {\n    if (x + width + gapH > viewWidth) {\n      x -= width + gapH;\n    } else {\n      x += gapH;\n    }\n  }\n\n  if (gapV != null) {\n    if (y + height + gapV > viewHeight) {\n      y -= height + gapV;\n    } else {\n      y += gapV;\n    }\n  }\n\n  return [x, y];\n}\n\nfunction confineTooltipPosition(x, y, content, viewWidth, viewHeight) {\n  var size = content.getOuterSize();\n  var width = size.width;\n  var height = size.height;\n  x = Math.min(x + width, viewWidth) - width;\n  y = Math.min(y + height, viewHeight) - height;\n  x = Math.max(x, 0);\n  y = Math.max(y, 0);\n  return [x, y];\n}\n\nfunction calcTooltipPosition(position, rect, contentSize) {\n  var domWidth = contentSize[0];\n  var domHeight = contentSize[1];\n  var gap = 5;\n  var x = 0;\n  var y = 0;\n  var rectWidth = rect.width;\n  var rectHeight = rect.height;\n\n  switch (position) {\n    case 'inside':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n\n    case 'top':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y - domHeight - gap;\n      break;\n\n    case 'bottom':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight + gap;\n      break;\n\n    case 'left':\n      x = rect.x - domWidth - gap;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n\n    case 'right':\n      x = rect.x + rectWidth + gap;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n  }\n\n  return [x, y];\n}\n\nfunction isCenterAlign(align) {\n  return align === 'center' || align === 'middle';\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar AxisPointerModel = echarts.extendComponentModel({\n  type: 'axisPointer',\n  coordSysAxesInfo: null,\n  defaultOption: {\n    // 'auto' means that show when triggered by tooltip or handle.\n    show: 'auto',\n    // 'click' | 'mousemove' | 'none'\n    triggerOn: null,\n    // set default in AxisPonterView.js\n    zlevel: 0,\n    z: 50,\n    type: 'line',\n    // 'line' 'shadow' 'cross' 'none'.\n    // axispointer triggered by tootip determine snap automatically,\n    // see `modelHelper`.\n    snap: false,\n    triggerTooltip: true,\n    value: null,\n    status: null,\n    // Init value depends on whether handle is used.\n    // [group0, group1, ...]\n    // Each group can be: {\n    //      mapper: function () {},\n    //      singleTooltip: 'multiple',  // 'multiple' or 'single'\n    //      xAxisId: ...,\n    //      yAxisName: ...,\n    //      angleAxisIndex: ...\n    // }\n    // mapper: can be ignored.\n    //      input: {axisInfo, value}\n    //      output: {axisInfo, value}\n    link: [],\n    // Do not set 'auto' here, otherwise global animation: false\n    // will not effect at this axispointer.\n    animation: null,\n    animationDurationUpdate: 200,\n    lineStyle: {\n      color: '#aaa',\n      width: 1,\n      type: 'solid'\n    },\n    shadowStyle: {\n      color: 'rgba(150,150,150,0.3)'\n    },\n    label: {\n      show: true,\n      formatter: null,\n      // string | Function\n      precision: 'auto',\n      // Or a number like 0, 1, 2 ...\n      margin: 3,\n      color: '#fff',\n      padding: [5, 7, 5, 7],\n      backgroundColor: 'auto',\n      // default: axis line color\n      borderColor: null,\n      borderWidth: 0,\n      shadowBlur: 3,\n      shadowColor: '#aaa' // Considering applicability, common style should\n      // better not have shadowOffset.\n      // shadowOffsetX: 0,\n      // shadowOffsetY: 2\n\n    },\n    handle: {\n      show: false,\n\n      /* eslint-disable */\n      icon: 'M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z',\n      // jshint ignore:line\n\n      /* eslint-enable */\n      size: 45,\n      // handle margin is from symbol center to axis, which is stable when circular move.\n      margin: 50,\n      // color: '#1b8bbd'\n      // color: '#2f4554'\n      color: '#333',\n      shadowBlur: 3,\n      shadowColor: '#aaa',\n      shadowOffsetX: 0,\n      shadowOffsetY: 2,\n      // For mobile performance\n      throttle: 40\n    }\n  }\n});\nvar _default = AxisPointerModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Eventful = require(\"zrender/lib/mixin/Eventful\");\n\nvar eventTool = require(\"zrender/lib/core/event\");\n\nvar interactionMutex = require(\"./interactionMutex\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @alias module:echarts/component/helper/RoamController\n * @constructor\n * @mixin {module:zrender/mixin/Eventful}\n *\n * @param {module:zrender/zrender~ZRender} zr\n */\nfunction RoamController(zr) {\n  /**\n   * @type {Function}\n   */\n  this.pointerChecker;\n  /**\n   * @type {module:zrender}\n   */\n\n  this._zr = zr;\n  /**\n   * @type {Object}\n   */\n\n  this._opt = {}; // Avoid two roamController bind the same handler\n\n  var bind = zrUtil.bind;\n  var mousedownHandler = bind(mousedown, this);\n  var mousemoveHandler = bind(mousemove, this);\n  var mouseupHandler = bind(mouseup, this);\n  var mousewheelHandler = bind(mousewheel, this);\n  var pinchHandler = bind(pinch, this);\n  Eventful.call(this);\n  /**\n   * @param {Function} pointerChecker\n   *                   input: x, y\n   *                   output: boolean\n   */\n\n  this.setPointerChecker = function (pointerChecker) {\n    this.pointerChecker = pointerChecker;\n  };\n  /**\n   * Notice: only enable needed types. For example, if 'zoom'\n   * is not needed, 'zoom' should not be enabled, otherwise\n   * default mousewheel behaviour (scroll page) will be disabled.\n   *\n   * @param  {boolean|string} [controlType=true] Specify the control type,\n   *                          which can be null/undefined or true/false\n   *                          or 'pan/move' or 'zoom'/'scale'\n   * @param {Object} [opt]\n   * @param {Object} [opt.zoomOnMouseWheel=true] The value can be: true / false / 'shift' / 'ctrl' / 'alt'.\n   * @param {Object} [opt.moveOnMouseMove=true] The value can be: true / false / 'shift' / 'ctrl' / 'alt'.\n   * @param {Object} [opt.moveOnMouseWheel=false] The value can be: true / false / 'shift' / 'ctrl' / 'alt'.\n   * @param {Object} [opt.preventDefaultMouseMove=true] When pan.\n   */\n\n\n  this.enable = function (controlType, opt) {\n    // Disable previous first\n    this.disable();\n    this._opt = zrUtil.defaults(zrUtil.clone(opt) || {}, {\n      zoomOnMouseWheel: true,\n      moveOnMouseMove: true,\n      // By default, wheel do not trigger move.\n      moveOnMouseWheel: false,\n      preventDefaultMouseMove: true\n    });\n\n    if (controlType == null) {\n      controlType = true;\n    }\n\n    if (controlType === true || controlType === 'move' || controlType === 'pan') {\n      zr.on('mousedown', mousedownHandler);\n      zr.on('mousemove', mousemoveHandler);\n      zr.on('mouseup', mouseupHandler);\n    }\n\n    if (controlType === true || controlType === 'scale' || controlType === 'zoom') {\n      zr.on('mousewheel', mousewheelHandler);\n      zr.on('pinch', pinchHandler);\n    }\n  };\n\n  this.disable = function () {\n    zr.off('mousedown', mousedownHandler);\n    zr.off('mousemove', mousemoveHandler);\n    zr.off('mouseup', mouseupHandler);\n    zr.off('mousewheel', mousewheelHandler);\n    zr.off('pinch', pinchHandler);\n  };\n\n  this.dispose = this.disable;\n\n  this.isDragging = function () {\n    return this._dragging;\n  };\n\n  this.isPinching = function () {\n    return this._pinching;\n  };\n}\n\nzrUtil.mixin(RoamController, Eventful);\n\nfunction mousedown(e) {\n  if (eventTool.isMiddleOrRightButtonOnMouseUpDown(e) || e.target && e.target.draggable) {\n    return;\n  }\n\n  var x = e.offsetX;\n  var y = e.offsetY; // Only check on mosedown, but not mousemove.\n  // Mouse can be out of target when mouse moving.\n\n  if (this.pointerChecker && this.pointerChecker(e, x, y)) {\n    this._x = x;\n    this._y = y;\n    this._dragging = true;\n  }\n}\n\nfunction mousemove(e) {\n  if (!this._dragging || !isAvailableBehavior('moveOnMouseMove', e, this._opt) || e.gestureEvent === 'pinch' || interactionMutex.isTaken(this._zr, 'globalPan')) {\n    return;\n  }\n\n  var x = e.offsetX;\n  var y = e.offsetY;\n  var oldX = this._x;\n  var oldY = this._y;\n  var dx = x - oldX;\n  var dy = y - oldY;\n  this._x = x;\n  this._y = y;\n  this._opt.preventDefaultMouseMove && eventTool.stop(e.event);\n  trigger(this, 'pan', 'moveOnMouseMove', e, {\n    dx: dx,\n    dy: dy,\n    oldX: oldX,\n    oldY: oldY,\n    newX: x,\n    newY: y\n  });\n}\n\nfunction mouseup(e) {\n  if (!eventTool.isMiddleOrRightButtonOnMouseUpDown(e)) {\n    this._dragging = false;\n  }\n}\n\nfunction mousewheel(e) {\n  var shouldZoom = isAvailableBehavior('zoomOnMouseWheel', e, this._opt);\n  var shouldMove = isAvailableBehavior('moveOnMouseWheel', e, this._opt);\n  var wheelDelta = e.wheelDelta;\n  var absWheelDeltaDelta = Math.abs(wheelDelta);\n  var originX = e.offsetX;\n  var originY = e.offsetY; // wheelDelta maybe -0 in chrome mac.\n\n  if (wheelDelta === 0 || !shouldZoom && !shouldMove) {\n    return;\n  } // If both `shouldZoom` and `shouldMove` is true, trigger\n  // their event both, and the final behavior is determined\n  // by event listener themselves.\n\n\n  if (shouldZoom) {\n    // Convenience:\n    // Mac and VM Windows on Mac: scroll up: zoom out.\n    // Windows: scroll up: zoom in.\n    // FIXME: Should do more test in different environment.\n    // wheelDelta is too complicated in difference nvironment\n    // (https://developer.mozilla.org/en-US/docs/Web/Events/mousewheel),\n    // although it has been normallized by zrender.\n    // wheelDelta of mouse wheel is bigger than touch pad.\n    var factor = absWheelDeltaDelta > 3 ? 1.4 : absWheelDeltaDelta > 1 ? 1.2 : 1.1;\n    var scale = wheelDelta > 0 ? factor : 1 / factor;\n    checkPointerAndTrigger(this, 'zoom', 'zoomOnMouseWheel', e, {\n      scale: scale,\n      originX: originX,\n      originY: originY\n    });\n  }\n\n  if (shouldMove) {\n    // FIXME: Should do more test in different environment.\n    var absDelta = Math.abs(wheelDelta); // wheelDelta of mouse wheel is bigger than touch pad.\n\n    var scrollDelta = (wheelDelta > 0 ? 1 : -1) * (absDelta > 3 ? 0.4 : absDelta > 1 ? 0.15 : 0.05);\n    checkPointerAndTrigger(this, 'scrollMove', 'moveOnMouseWheel', e, {\n      scrollDelta: scrollDelta,\n      originX: originX,\n      originY: originY\n    });\n  }\n}\n\nfunction pinch(e) {\n  if (interactionMutex.isTaken(this._zr, 'globalPan')) {\n    return;\n  }\n\n  var scale = e.pinchScale > 1 ? 1.1 : 1 / 1.1;\n  checkPointerAndTrigger(this, 'zoom', null, e, {\n    scale: scale,\n    originX: e.pinchX,\n    originY: e.pinchY\n  });\n}\n\nfunction checkPointerAndTrigger(controller, eventName, behaviorToCheck, e, contollerEvent) {\n  if (controller.pointerChecker && controller.pointerChecker(e, contollerEvent.originX, contollerEvent.originY)) {\n    // When mouse is out of roamController rect,\n    // default befavoius should not be be disabled, otherwise\n    // page sliding is disabled, contrary to expectation.\n    eventTool.stop(e.event);\n    trigger(controller, eventName, behaviorToCheck, e, contollerEvent);\n  }\n}\n\nfunction trigger(controller, eventName, behaviorToCheck, e, contollerEvent) {\n  // Also provide behavior checker for event listener, for some case that\n  // multiple components share one listener.\n  contollerEvent.isAvailableBehavior = zrUtil.bind(isAvailableBehavior, null, behaviorToCheck, e);\n  controller.trigger(eventName, contollerEvent);\n} // settings: {\n//     zoomOnMouseWheel\n//     moveOnMouseMove\n//     moveOnMouseWheel\n// }\n// The value can be: true / false / 'shift' / 'ctrl' / 'alt'.\n\n\nfunction isAvailableBehavior(behaviorToCheck, e, settings) {\n  var setting = settings[behaviorToCheck];\n  return !behaviorToCheck || setting && (!zrUtil.isString(setting) || e.event[setting + 'Key']);\n}\n\nvar _default = RoamController;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar BaseAxisPointer = require(\"./BaseAxisPointer\");\n\nvar viewHelper = require(\"./viewHelper\");\n\nvar cartesianAxisHelper = require(\"../../coord/cartesian/cartesianAxisHelper\");\n\nvar AxisView = require(\"../axis/AxisView\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar CartesianAxisPointer = BaseAxisPointer.extend({\n  /**\n   * @override\n   */\n  makeElOption: function (elOption, value, axisModel, axisPointerModel, api) {\n    var axis = axisModel.axis;\n    var grid = axis.grid;\n    var axisPointerType = axisPointerModel.get('type');\n    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n    var pixelValue = axis.toGlobalCoord(axis.dataToCoord(value, true));\n\n    if (axisPointerType && axisPointerType !== 'none') {\n      var elStyle = viewHelper.buildElStyle(axisPointerModel);\n      var pointerOption = pointerShapeBuilder[axisPointerType](axis, pixelValue, otherExtent);\n      pointerOption.style = elStyle;\n      elOption.graphicKey = pointerOption.type;\n      elOption.pointer = pointerOption;\n    }\n\n    var layoutInfo = cartesianAxisHelper.layout(grid.model, axisModel);\n    viewHelper.buildCartesianSingleLabelElOption(value, elOption, layoutInfo, axisModel, axisPointerModel, api);\n  },\n\n  /**\n   * @override\n   */\n  getHandleTransform: function (value, axisModel, axisPointerModel) {\n    var layoutInfo = cartesianAxisHelper.layout(axisModel.axis.grid.model, axisModel, {\n      labelInside: false\n    });\n    layoutInfo.labelMargin = axisPointerModel.get('handle.margin');\n    return {\n      position: viewHelper.getTransformedPosition(axisModel.axis, value, layoutInfo),\n      rotation: layoutInfo.rotation + (layoutInfo.labelDirection < 0 ? Math.PI : 0)\n    };\n  },\n\n  /**\n   * @override\n   */\n  updateHandleTransform: function (transform, delta, axisModel, axisPointerModel) {\n    var axis = axisModel.axis;\n    var grid = axis.grid;\n    var axisExtent = axis.getGlobalExtent(true);\n    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n    var dimIndex = axis.dim === 'x' ? 0 : 1;\n    var currPosition = transform.position;\n    currPosition[dimIndex] += delta[dimIndex];\n    currPosition[dimIndex] = Math.min(axisExtent[1], currPosition[dimIndex]);\n    currPosition[dimIndex] = Math.max(axisExtent[0], currPosition[dimIndex]);\n    var cursorOtherValue = (otherExtent[1] + otherExtent[0]) / 2;\n    var cursorPoint = [cursorOtherValue, cursorOtherValue];\n    cursorPoint[dimIndex] = currPosition[dimIndex]; // Make tooltip do not overlap axisPointer and in the middle of the grid.\n\n    var tooltipOptions = [{\n      verticalAlign: 'middle'\n    }, {\n      align: 'center'\n    }];\n    return {\n      position: currPosition,\n      rotation: transform.rotation,\n      cursorPoint: cursorPoint,\n      tooltipOption: tooltipOptions[dimIndex]\n    };\n  }\n});\n\nfunction getCartesian(grid, axis) {\n  var opt = {};\n  opt[axis.dim + 'AxisIndex'] = axis.index;\n  return grid.getCartesian(opt);\n}\n\nvar pointerShapeBuilder = {\n  line: function (axis, pixelValue, otherExtent) {\n    var targetShape = viewHelper.makeLineShape([pixelValue, otherExtent[0]], [pixelValue, otherExtent[1]], getAxisDimIndex(axis));\n    return {\n      type: 'Line',\n      subPixelOptimize: true,\n      shape: targetShape\n    };\n  },\n  shadow: function (axis, pixelValue, otherExtent) {\n    var bandWidth = Math.max(1, axis.getBandWidth());\n    var span = otherExtent[1] - otherExtent[0];\n    return {\n      type: 'Rect',\n      shape: viewHelper.makeRectShape([pixelValue - bandWidth / 2, otherExtent[0]], [bandWidth, span], getAxisDimIndex(axis))\n    };\n  }\n};\n\nfunction getAxisDimIndex(axis) {\n  return axis.dim === 'x' ? 0 : 1;\n}\n\nAxisView.registerAxisPointerClass('CartesianAxisPointer', CartesianAxisPointer);\nvar _default = CartesianAxisPointer;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar vector = require(\"zrender/lib/core/vector\");\n\nvar matrix = require(\"zrender/lib/core/matrix\");\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\nvar Transformable = require(\"zrender/lib/mixin/Transformable\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Simple view coordinate system\n * Mapping given x, y to transformd view x, y\n */\nvar v2ApplyTransform = vector.applyTransform; // Dummy transform node\n\nfunction TransformDummy() {\n  Transformable.call(this);\n}\n\nzrUtil.mixin(TransformDummy, Transformable);\n\nfunction View(name) {\n  /**\n   * @type {string}\n   */\n  this.name = name;\n  /**\n   * @type {Object}\n   */\n\n  this.zoomLimit;\n  Transformable.call(this);\n  this._roamTransformable = new TransformDummy();\n  this._rawTransformable = new TransformDummy();\n  this._center;\n  this._zoom;\n}\n\nView.prototype = {\n  constructor: View,\n  type: 'view',\n\n  /**\n   * @param {Array.<string>}\n   * @readOnly\n   */\n  dimensions: ['x', 'y'],\n\n  /**\n   * Set bounding rect\n   * @param {number} x\n   * @param {number} y\n   * @param {number} width\n   * @param {number} height\n   */\n  // PENDING to getRect\n  setBoundingRect: function (x, y, width, height) {\n    this._rect = new BoundingRect(x, y, width, height);\n    return this._rect;\n  },\n\n  /**\n   * @return {module:zrender/core/BoundingRect}\n   */\n  // PENDING to getRect\n  getBoundingRect: function () {\n    return this._rect;\n  },\n\n  /**\n   * @param {number} x\n   * @param {number} y\n   * @param {number} width\n   * @param {number} height\n   */\n  setViewRect: function (x, y, width, height) {\n    this.transformTo(x, y, width, height);\n    this._viewRect = new BoundingRect(x, y, width, height);\n  },\n\n  /**\n   * Transformed to particular position and size\n   * @param {number} x\n   * @param {number} y\n   * @param {number} width\n   * @param {number} height\n   */\n  transformTo: function (x, y, width, height) {\n    var rect = this.getBoundingRect();\n    var rawTransform = this._rawTransformable;\n    rawTransform.transform = rect.calculateTransform(new BoundingRect(x, y, width, height));\n    rawTransform.decomposeTransform();\n\n    this._updateTransform();\n  },\n\n  /**\n   * Set center of view\n   * @param {Array.<number>} [centerCoord]\n   */\n  setCenter: function (centerCoord) {\n    if (!centerCoord) {\n      return;\n    }\n\n    this._center = centerCoord;\n\n    this._updateCenterAndZoom();\n  },\n\n  /**\n   * @param {number} zoom\n   */\n  setZoom: function (zoom) {\n    zoom = zoom || 1;\n    var zoomLimit = this.zoomLimit;\n\n    if (zoomLimit) {\n      if (zoomLimit.max != null) {\n        zoom = Math.min(zoomLimit.max, zoom);\n      }\n\n      if (zoomLimit.min != null) {\n        zoom = Math.max(zoomLimit.min, zoom);\n      }\n    }\n\n    this._zoom = zoom;\n\n    this._updateCenterAndZoom();\n  },\n\n  /**\n   * Get default center without roam\n   */\n  getDefaultCenter: function () {\n    // Rect before any transform\n    var rawRect = this.getBoundingRect();\n    var cx = rawRect.x + rawRect.width / 2;\n    var cy = rawRect.y + rawRect.height / 2;\n    return [cx, cy];\n  },\n  getCenter: function () {\n    return this._center || this.getDefaultCenter();\n  },\n  getZoom: function () {\n    return this._zoom || 1;\n  },\n\n  /**\n   * @return {Array.<number}\n   */\n  getRoamTransform: function () {\n    return this._roamTransformable.getLocalTransform();\n  },\n\n  /**\n   * Remove roam\n   */\n  _updateCenterAndZoom: function () {\n    // Must update after view transform updated\n    var rawTransformMatrix = this._rawTransformable.getLocalTransform();\n\n    var roamTransform = this._roamTransformable;\n    var defaultCenter = this.getDefaultCenter();\n    var center = this.getCenter();\n    var zoom = this.getZoom();\n    center = vector.applyTransform([], center, rawTransformMatrix);\n    defaultCenter = vector.applyTransform([], defaultCenter, rawTransformMatrix);\n    roamTransform.origin = center;\n    roamTransform.position = [defaultCenter[0] - center[0], defaultCenter[1] - center[1]];\n    roamTransform.scale = [zoom, zoom];\n\n    this._updateTransform();\n  },\n\n  /**\n   * Update transform from roam and mapLocation\n   * @private\n   */\n  _updateTransform: function () {\n    var roamTransformable = this._roamTransformable;\n    var rawTransformable = this._rawTransformable;\n    rawTransformable.parent = roamTransformable;\n    roamTransformable.updateTransform();\n    rawTransformable.updateTransform();\n    matrix.copy(this.transform || (this.transform = []), rawTransformable.transform || matrix.create());\n    this._rawTransform = rawTransformable.getLocalTransform();\n    this.invTransform = this.invTransform || [];\n    matrix.invert(this.invTransform, this.transform);\n    this.decomposeTransform();\n  },\n  getTransformInfo: function () {\n    var roamTransform = this._roamTransformable.transform;\n    var rawTransformable = this._rawTransformable;\n    return {\n      roamTransform: roamTransform ? zrUtil.slice(roamTransform) : matrix.create(),\n      rawScale: zrUtil.slice(rawTransformable.scale),\n      rawPosition: zrUtil.slice(rawTransformable.position)\n    };\n  },\n\n  /**\n   * @return {module:zrender/core/BoundingRect}\n   */\n  getViewRect: function () {\n    return this._viewRect;\n  },\n\n  /**\n   * Get view rect after roam transform\n   * @return {module:zrender/core/BoundingRect}\n   */\n  getViewRectAfterRoam: function () {\n    var rect = this.getBoundingRect().clone();\n    rect.applyTransform(this.transform);\n    return rect;\n  },\n\n  /**\n   * Convert a single (lon, lat) data item to (x, y) point.\n   * @param {Array.<number>} data\n   * @param {boolean} noRoam\n   * @param {Array.<number>} [out]\n   * @return {Array.<number>}\n   */\n  dataToPoint: function (data, noRoam, out) {\n    var transform = noRoam ? this._rawTransform : this.transform;\n    out = out || [];\n    return transform ? v2ApplyTransform(out, data, transform) : vector.copy(out, data);\n  },\n\n  /**\n   * Convert a (x, y) point to (lon, lat) data\n   * @param {Array.<number>} point\n   * @return {Array.<number>}\n   */\n  pointToData: function (point) {\n    var invTransform = this.invTransform;\n    return invTransform ? v2ApplyTransform([], point, invTransform) : [point[0], point[1]];\n  },\n\n  /**\n   * @implements\n   * see {module:echarts/CoodinateSystem}\n   */\n  convertToPixel: zrUtil.curry(doConvert, 'dataToPoint'),\n\n  /**\n   * @implements\n   * see {module:echarts/CoodinateSystem}\n   */\n  convertFromPixel: zrUtil.curry(doConvert, 'pointToData'),\n\n  /**\n   * @implements\n   * see {module:echarts/CoodinateSystem}\n   */\n  containPoint: function (point) {\n    return this.getViewRectAfterRoam().contain(point[0], point[1]);\n  }\n  /**\n   * @return {number}\n   */\n  // getScalarScale: function () {\n  //     // Use determinant square root of transform to mutiply scalar\n  //     var m = this.transform;\n  //     var det = Math.sqrt(Math.abs(m[0] * m[3] - m[2] * m[1]));\n  //     return det;\n  // }\n\n};\nzrUtil.mixin(View, Transformable);\n\nfunction doConvert(methodName, ecModel, finder, value) {\n  var seriesModel = finder.seriesModel;\n  var coordSys = seriesModel ? seriesModel.coordinateSystem : null; // e.g., graph.\n\n  return coordSys === this ? coordSys[methodName](value) : null;\n}\n\nvar _default = View;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar SymbolClz = require(\"../helper/Symbol\");\n\nvar _layoutHelper = require(\"./layoutHelper\");\n\nvar radialCoordinate = _layoutHelper.radialCoordinate;\n\nvar echarts = require(\"../../echarts\");\n\nvar bbox = require(\"zrender/lib/core/bbox\");\n\nvar View = require(\"../../coord/View\");\n\nvar roamHelper = require(\"../../component/helper/roamHelper\");\n\nvar RoamController = require(\"../../component/helper/RoamController\");\n\nvar _cursorHelper = require(\"../../component/helper/cursorHelper\");\n\nvar onIrrelevantElement = _cursorHelper.onIrrelevantElement;\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar _number = require(\"../../util/number\");\n\nvar parsePercent = _number.parsePercent;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar TreeShape = graphic.extendShape({\n  shape: {\n    parentPoint: [],\n    childPoints: [],\n    orient: '',\n    forkPosition: ''\n  },\n  style: {\n    stroke: '#000',\n    fill: null\n  },\n  buildPath: function (ctx, shape) {\n    var childPoints = shape.childPoints;\n    var childLen = childPoints.length;\n    var parentPoint = shape.parentPoint;\n    var firstChildPos = childPoints[0];\n    var lastChildPos = childPoints[childLen - 1];\n\n    if (childLen === 1) {\n      ctx.moveTo(parentPoint[0], parentPoint[1]);\n      ctx.lineTo(firstChildPos[0], firstChildPos[1]);\n      return;\n    }\n\n    var orient = shape.orient;\n    var forkDim = orient === 'TB' || orient === 'BT' ? 0 : 1;\n    var otherDim = 1 - forkDim;\n    var forkPosition = parsePercent(shape.forkPosition, 1);\n    var tmpPoint = [];\n    tmpPoint[forkDim] = parentPoint[forkDim];\n    tmpPoint[otherDim] = parentPoint[otherDim] + (lastChildPos[otherDim] - parentPoint[otherDim]) * forkPosition;\n    ctx.moveTo(parentPoint[0], parentPoint[1]);\n    ctx.lineTo(tmpPoint[0], tmpPoint[1]);\n    ctx.moveTo(firstChildPos[0], firstChildPos[1]);\n    tmpPoint[forkDim] = firstChildPos[forkDim];\n    ctx.lineTo(tmpPoint[0], tmpPoint[1]);\n    tmpPoint[forkDim] = lastChildPos[forkDim];\n    ctx.lineTo(tmpPoint[0], tmpPoint[1]);\n    ctx.lineTo(lastChildPos[0], lastChildPos[1]);\n\n    for (var i = 1; i < childLen - 1; i++) {\n      var point = childPoints[i];\n      ctx.moveTo(point[0], point[1]);\n      tmpPoint[forkDim] = point[forkDim];\n      ctx.lineTo(tmpPoint[0], tmpPoint[1]);\n    }\n  }\n});\n\nvar _default = echarts.extendChartView({\n  type: 'tree',\n\n  /**\n   * Init the chart\n   * @override\n   * @param  {module:echarts/model/Global} ecModel\n   * @param  {module:echarts/ExtensionAPI} api\n   */\n  init: function (ecModel, api) {\n    /**\n     * @private\n     * @type {module:echarts/data/Tree}\n     */\n    this._oldTree;\n    /**\n     * @private\n     * @type {module:zrender/container/Group}\n     */\n\n    this._mainGroup = new graphic.Group();\n    /**\n     * @private\n     * @type {module:echarts/componet/helper/RoamController}\n     */\n\n    this._controller = new RoamController(api.getZr());\n    this._controllerHost = {\n      target: this.group\n    };\n    this.group.add(this._mainGroup);\n  },\n  render: function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var layoutInfo = seriesModel.layoutInfo;\n    var group = this._mainGroup;\n    var layout = seriesModel.get('layout');\n\n    if (layout === 'radial') {\n      group.attr('position', [layoutInfo.x + layoutInfo.width / 2, layoutInfo.y + layoutInfo.height / 2]);\n    } else {\n      group.attr('position', [layoutInfo.x, layoutInfo.y]);\n    }\n\n    this._updateViewCoordSys(seriesModel, layoutInfo, layout);\n\n    this._updateController(seriesModel, ecModel, api);\n\n    var oldData = this._data;\n    var seriesScope = {\n      expandAndCollapse: seriesModel.get('expandAndCollapse'),\n      layout: layout,\n      edgeShape: seriesModel.get('edgeShape'),\n      edgeForkPosition: seriesModel.get('edgeForkPosition'),\n      orient: seriesModel.getOrient(),\n      curvature: seriesModel.get('lineStyle.curveness'),\n      symbolRotate: seriesModel.get('symbolRotate'),\n      symbolOffset: seriesModel.get('symbolOffset'),\n      hoverAnimation: seriesModel.get('hoverAnimation'),\n      useNameLabel: true,\n      fadeIn: true\n    };\n    data.diff(oldData).add(function (newIdx) {\n      if (symbolNeedsDraw(data, newIdx)) {\n        // Create node and edge\n        updateNode(data, newIdx, null, group, seriesModel, seriesScope);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var symbolEl = oldData.getItemGraphicEl(oldIdx);\n\n      if (!symbolNeedsDraw(data, newIdx)) {\n        symbolEl && removeNode(oldData, oldIdx, symbolEl, group, seriesModel, seriesScope);\n        return;\n      } // Update node and edge\n\n\n      updateNode(data, newIdx, symbolEl, group, seriesModel, seriesScope);\n    }).remove(function (oldIdx) {\n      var symbolEl = oldData.getItemGraphicEl(oldIdx); // When remove a collapsed node of subtree, since the collapsed\n      // node haven't been initialized with a symbol element,\n      // you can't found it's symbol element through index.\n      // so if we want to remove the symbol element we should insure\n      // that the symbol element is not null.\n\n      if (symbolEl) {\n        removeNode(oldData, oldIdx, symbolEl, group, seriesModel, seriesScope);\n      }\n    }).execute();\n    this._nodeScaleRatio = seriesModel.get('nodeScaleRatio');\n\n    this._updateNodeAndLinkScale(seriesModel);\n\n    if (seriesScope.expandAndCollapse === true) {\n      data.eachItemGraphicEl(function (el, dataIndex) {\n        el.off('click').on('click', function () {\n          api.dispatchAction({\n            type: 'treeExpandAndCollapse',\n            seriesId: seriesModel.id,\n            dataIndex: dataIndex\n          });\n        });\n      });\n    }\n\n    this._data = data;\n  },\n  _updateViewCoordSys: function (seriesModel) {\n    var data = seriesModel.getData();\n    var points = [];\n    data.each(function (idx) {\n      var layout = data.getItemLayout(idx);\n\n      if (layout && !isNaN(layout.x) && !isNaN(layout.y)) {\n        points.push([+layout.x, +layout.y]);\n      }\n    });\n    var min = [];\n    var max = [];\n    bbox.fromPoints(points, min, max); // If don't Store min max when collapse the root node after roam,\n    // the root node will disappear.\n\n    var oldMin = this._min;\n    var oldMax = this._max; // If width or height is 0\n\n    if (max[0] - min[0] === 0) {\n      min[0] = oldMin ? oldMin[0] : min[0] - 1;\n      max[0] = oldMax ? oldMax[0] : max[0] + 1;\n    }\n\n    if (max[1] - min[1] === 0) {\n      min[1] = oldMin ? oldMin[1] : min[1] - 1;\n      max[1] = oldMax ? oldMax[1] : max[1] + 1;\n    }\n\n    var viewCoordSys = seriesModel.coordinateSystem = new View();\n    viewCoordSys.zoomLimit = seriesModel.get('scaleLimit');\n    viewCoordSys.setBoundingRect(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n    viewCoordSys.setCenter(seriesModel.get('center'));\n    viewCoordSys.setZoom(seriesModel.get('zoom')); // Here we use viewCoordSys just for computing the 'position' and 'scale' of the group\n\n    this.group.attr({\n      position: viewCoordSys.position,\n      scale: viewCoordSys.scale\n    });\n    this._viewCoordSys = viewCoordSys;\n    this._min = min;\n    this._max = max;\n  },\n  _updateController: function (seriesModel, ecModel, api) {\n    var controller = this._controller;\n    var controllerHost = this._controllerHost;\n    var group = this.group;\n    controller.setPointerChecker(function (e, x, y) {\n      var rect = group.getBoundingRect();\n      rect.applyTransform(group.transform);\n      return rect.contain(x, y) && !onIrrelevantElement(e, api, seriesModel);\n    });\n    controller.enable(seriesModel.get('roam'));\n    controllerHost.zoomLimit = seriesModel.get('scaleLimit');\n    controllerHost.zoom = seriesModel.coordinateSystem.getZoom();\n    controller.off('pan').off('zoom').on('pan', function (e) {\n      roamHelper.updateViewOnPan(controllerHost, e.dx, e.dy);\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'treeRoam',\n        dx: e.dx,\n        dy: e.dy\n      });\n    }, this).on('zoom', function (e) {\n      roamHelper.updateViewOnZoom(controllerHost, e.scale, e.originX, e.originY);\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'treeRoam',\n        zoom: e.scale,\n        originX: e.originX,\n        originY: e.originY\n      });\n\n      this._updateNodeAndLinkScale(seriesModel);\n    }, this);\n  },\n  _updateNodeAndLinkScale: function (seriesModel) {\n    var data = seriesModel.getData();\n\n    var nodeScale = this._getNodeGlobalScale(seriesModel);\n\n    var invScale = [nodeScale, nodeScale];\n    data.eachItemGraphicEl(function (el, idx) {\n      el.attr('scale', invScale);\n    });\n  },\n  _getNodeGlobalScale: function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys.type !== 'view') {\n      return 1;\n    }\n\n    var nodeScaleRatio = this._nodeScaleRatio;\n    var groupScale = coordSys.scale;\n    var groupZoom = groupScale && groupScale[0] || 1; // Scale node when zoom changes\n\n    var roamZoom = coordSys.getZoom();\n    var nodeScale = (roamZoom - 1) * nodeScaleRatio + 1;\n    return nodeScale / groupZoom;\n  },\n  dispose: function () {\n    this._controller && this._controller.dispose();\n    this._controllerHost = {};\n  },\n  remove: function () {\n    this._mainGroup.removeAll();\n\n    this._data = null;\n  }\n});\n\nfunction symbolNeedsDraw(data, dataIndex) {\n  var layout = data.getItemLayout(dataIndex);\n  return layout && !isNaN(layout.x) && !isNaN(layout.y) && data.getItemVisual(dataIndex, 'symbol') !== 'none';\n}\n\nfunction getTreeNodeStyle(node, itemModel, seriesScope) {\n  seriesScope.itemModel = itemModel;\n  seriesScope.itemStyle = itemModel.getModel('itemStyle').getItemStyle();\n  seriesScope.hoverItemStyle = itemModel.getModel('emphasis.itemStyle').getItemStyle();\n  seriesScope.lineStyle = itemModel.getModel('lineStyle').getLineStyle();\n  seriesScope.labelModel = itemModel.getModel('label');\n  seriesScope.hoverLabelModel = itemModel.getModel('emphasis.label');\n\n  if (node.isExpand === false && node.children.length !== 0) {\n    seriesScope.symbolInnerColor = seriesScope.itemStyle.fill;\n  } else {\n    seriesScope.symbolInnerColor = '#fff';\n  }\n\n  return seriesScope;\n}\n\nfunction updateNode(data, dataIndex, symbolEl, group, seriesModel, seriesScope) {\n  var isInit = !symbolEl;\n  var node = data.tree.getNodeByDataIndex(dataIndex);\n  var itemModel = node.getModel();\n  var seriesScope = getTreeNodeStyle(node, itemModel, seriesScope);\n  var virtualRoot = data.tree.root;\n  var source = node.parentNode === virtualRoot ? node : node.parentNode || node;\n  var sourceSymbolEl = data.getItemGraphicEl(source.dataIndex);\n  var sourceLayout = source.getLayout();\n  var sourceOldLayout = sourceSymbolEl ? {\n    x: sourceSymbolEl.position[0],\n    y: sourceSymbolEl.position[1],\n    rawX: sourceSymbolEl.__radialOldRawX,\n    rawY: sourceSymbolEl.__radialOldRawY\n  } : sourceLayout;\n  var targetLayout = node.getLayout();\n\n  if (isInit) {\n    symbolEl = new SymbolClz(data, dataIndex, seriesScope);\n    symbolEl.attr('position', [sourceOldLayout.x, sourceOldLayout.y]);\n  } else {\n    symbolEl.updateData(data, dataIndex, seriesScope);\n  }\n\n  symbolEl.__radialOldRawX = symbolEl.__radialRawX;\n  symbolEl.__radialOldRawY = symbolEl.__radialRawY;\n  symbolEl.__radialRawX = targetLayout.rawX;\n  symbolEl.__radialRawY = targetLayout.rawY;\n  group.add(symbolEl);\n  data.setItemGraphicEl(dataIndex, symbolEl);\n  graphic.updateProps(symbolEl, {\n    position: [targetLayout.x, targetLayout.y]\n  }, seriesModel);\n  var symbolPath = symbolEl.getSymbolPath();\n\n  if (seriesScope.layout === 'radial') {\n    var realRoot = virtualRoot.children[0];\n    var rootLayout = realRoot.getLayout();\n    var length = realRoot.children.length;\n    var rad;\n    var isLeft;\n\n    if (targetLayout.x === rootLayout.x && node.isExpand === true) {\n      var center = {};\n      center.x = (realRoot.children[0].getLayout().x + realRoot.children[length - 1].getLayout().x) / 2;\n      center.y = (realRoot.children[0].getLayout().y + realRoot.children[length - 1].getLayout().y) / 2;\n      rad = Math.atan2(center.y - rootLayout.y, center.x - rootLayout.x);\n\n      if (rad < 0) {\n        rad = Math.PI * 2 + rad;\n      }\n\n      isLeft = center.x < rootLayout.x;\n\n      if (isLeft) {\n        rad = rad - Math.PI;\n      }\n    } else {\n      rad = Math.atan2(targetLayout.y - rootLayout.y, targetLayout.x - rootLayout.x);\n\n      if (rad < 0) {\n        rad = Math.PI * 2 + rad;\n      }\n\n      if (node.children.length === 0 || node.children.length !== 0 && node.isExpand === false) {\n        isLeft = targetLayout.x < rootLayout.x;\n\n        if (isLeft) {\n          rad = rad - Math.PI;\n        }\n      } else {\n        isLeft = targetLayout.x > rootLayout.x;\n\n        if (!isLeft) {\n          rad = rad - Math.PI;\n        }\n      }\n    }\n\n    var textPosition = isLeft ? 'left' : 'right';\n    var rotate = seriesScope.labelModel.get('rotate');\n    var labelRotateRadian = rotate * (Math.PI / 180);\n    symbolPath.setStyle({\n      textPosition: seriesScope.labelModel.get('position') || textPosition,\n      textRotation: rotate == null ? -rad : labelRotateRadian,\n      textOrigin: 'center',\n      verticalAlign: 'middle'\n    });\n  }\n\n  drawEdge(seriesModel, node, virtualRoot, symbolEl, sourceOldLayout, sourceLayout, targetLayout, group, seriesScope);\n}\n\nfunction drawEdge(seriesModel, node, virtualRoot, symbolEl, sourceOldLayout, sourceLayout, targetLayout, group, seriesScope) {\n  var edgeShape = seriesScope.edgeShape;\n  var edge = symbolEl.__edge;\n\n  if (edgeShape === 'curve') {\n    if (node.parentNode && node.parentNode !== virtualRoot) {\n      if (!edge) {\n        edge = symbolEl.__edge = new graphic.BezierCurve({\n          shape: getEdgeShape(seriesScope, sourceOldLayout, sourceOldLayout),\n          style: zrUtil.defaults({\n            opacity: 0,\n            strokeNoScale: true\n          }, seriesScope.lineStyle)\n        });\n      }\n\n      graphic.updateProps(edge, {\n        shape: getEdgeShape(seriesScope, sourceLayout, targetLayout),\n        style: {\n          opacity: 1\n        }\n      }, seriesModel);\n    }\n  } else if (edgeShape === 'polyline') {\n    if (seriesScope.layout === 'orthogonal') {\n      if (node !== virtualRoot && node.children && node.children.length !== 0 && node.isExpand === true) {\n        var children = node.children;\n        var childPoints = [];\n\n        for (var i = 0; i < children.length; i++) {\n          var childLayout = children[i].getLayout();\n          childPoints.push([childLayout.x, childLayout.y]);\n        }\n\n        if (!edge) {\n          edge = symbolEl.__edge = new TreeShape({\n            shape: {\n              parentPoint: [targetLayout.x, targetLayout.y],\n              childPoints: [[targetLayout.x, targetLayout.y]],\n              orient: seriesScope.orient,\n              forkPosition: seriesScope.edgeForkPosition\n            },\n            style: zrUtil.defaults({\n              opacity: 0,\n              strokeNoScale: true\n            }, seriesScope.lineStyle)\n          });\n        }\n\n        graphic.updateProps(edge, {\n          shape: {\n            parentPoint: [targetLayout.x, targetLayout.y],\n            childPoints: childPoints\n          },\n          style: {\n            opacity: 1\n          }\n        }, seriesModel);\n      }\n    } else {}\n  }\n\n  group.add(edge);\n}\n\nfunction removeNode(data, dataIndex, symbolEl, group, seriesModel, seriesScope) {\n  var node = data.tree.getNodeByDataIndex(dataIndex);\n  var virtualRoot = data.tree.root;\n  var itemModel = node.getModel();\n  var seriesScope = getTreeNodeStyle(node, itemModel, seriesScope);\n  var source = node.parentNode === virtualRoot ? node : node.parentNode || node;\n  var edgeShape = seriesScope.edgeShape;\n  var sourceLayout;\n\n  while (sourceLayout = source.getLayout(), sourceLayout == null) {\n    source = source.parentNode === virtualRoot ? source : source.parentNode || source;\n  }\n\n  graphic.updateProps(symbolEl, {\n    position: [sourceLayout.x + 1, sourceLayout.y + 1]\n  }, seriesModel, function () {\n    group.remove(symbolEl);\n    data.setItemGraphicEl(dataIndex, null);\n  });\n  symbolEl.fadeOut(null, {\n    keepLabel: true\n  });\n  var sourceSymbolEl = data.getItemGraphicEl(source.dataIndex);\n  var sourceEdge = sourceSymbolEl.__edge; // 1. when expand the sub tree, delete the children node should delete the edge of\n  // the source at the same time. because the polyline edge shape is only owned by the source.\n  // 2.when the node is the only children of the source, delete the node should delete the edge of\n  // the source at the same time. the same reason as above.\n\n  var edge = symbolEl.__edge || (source.isExpand === false || source.children.length === 1 ? sourceEdge : undefined);\n  var edgeShape = seriesScope.edgeShape;\n\n  if (edge) {\n    if (edgeShape === 'curve') {\n      graphic.updateProps(edge, {\n        shape: getEdgeShape(seriesScope, sourceLayout, sourceLayout),\n        style: {\n          opacity: 0\n        }\n      }, seriesModel, function () {\n        group.remove(edge);\n      });\n    } else if (edgeShape === 'polyline' && seriesScope.layout === 'orthogonal') {\n      graphic.updateProps(edge, {\n        shape: {\n          parentPoint: [sourceLayout.x, sourceLayout.y],\n          childPoints: [[sourceLayout.x, sourceLayout.y]]\n        },\n        style: {\n          opacity: 0\n        }\n      }, seriesModel, function () {\n        group.remove(edge);\n      });\n    }\n  }\n}\n\nfunction getEdgeShape(seriesScope, sourceLayout, targetLayout) {\n  var cpx1;\n  var cpy1;\n  var cpx2;\n  var cpy2;\n  var orient = seriesScope.orient;\n  var x1;\n  var x2;\n  var y1;\n  var y2;\n\n  if (seriesScope.layout === 'radial') {\n    x1 = sourceLayout.rawX;\n    y1 = sourceLayout.rawY;\n    x2 = targetLayout.rawX;\n    y2 = targetLayout.rawY;\n    var radialCoor1 = radialCoordinate(x1, y1);\n    var radialCoor2 = radialCoordinate(x1, y1 + (y2 - y1) * seriesScope.curvature);\n    var radialCoor3 = radialCoordinate(x2, y2 + (y1 - y2) * seriesScope.curvature);\n    var radialCoor4 = radialCoordinate(x2, y2);\n    return {\n      x1: radialCoor1.x,\n      y1: radialCoor1.y,\n      x2: radialCoor4.x,\n      y2: radialCoor4.y,\n      cpx1: radialCoor2.x,\n      cpy1: radialCoor2.y,\n      cpx2: radialCoor3.x,\n      cpy2: radialCoor3.y\n    };\n  } else {\n    x1 = sourceLayout.x;\n    y1 = sourceLayout.y;\n    x2 = targetLayout.x;\n    y2 = targetLayout.y;\n\n    if (orient === 'LR' || orient === 'RL') {\n      cpx1 = x1 + (x2 - x1) * seriesScope.curvature;\n      cpy1 = y1;\n      cpx2 = x2 + (x1 - x2) * seriesScope.curvature;\n      cpy2 = y2;\n    }\n\n    if (orient === 'TB' || orient === 'BT') {\n      cpx1 = x1;\n      cpy1 = y1 + (y2 - y1) * seriesScope.curvature;\n      cpx2 = x2;\n      cpy2 = y2 + (y1 - y2) * seriesScope.curvature;\n    }\n  }\n\n  return {\n    x1: x1,\n    y1: y1,\n    x2: x2,\n    y2: y2,\n    cpx1: cpx1,\n    cpy1: cpy1,\n    cpx2: cpx2,\n    cpy2: cpy2\n  };\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Traverse the tree from bottom to top and do something\n * @param  {module:echarts/data/Tree~TreeNode} root  The real root of the tree\n * @param  {Function} callback\n */\nfunction eachAfter(root, callback, separation) {\n  var nodes = [root];\n  var next = [];\n  var node;\n\n  while (node = nodes.pop()) {\n    // jshint ignore:line\n    next.push(node);\n\n    if (node.isExpand) {\n      var children = node.children;\n\n      if (children.length) {\n        for (var i = 0; i < children.length; i++) {\n          nodes.push(children[i]);\n        }\n      }\n    }\n  }\n\n  while (node = next.pop()) {\n    // jshint ignore:line\n    callback(node, separation);\n  }\n}\n/**\n * Traverse the tree from top to bottom and do something\n * @param  {module:echarts/data/Tree~TreeNode} root  The real root of the tree\n * @param  {Function} callback\n */\n\n\nfunction eachBefore(root, callback) {\n  var nodes = [root];\n  var node;\n\n  while (node = nodes.pop()) {\n    // jshint ignore:line\n    callback(node);\n\n    if (node.isExpand) {\n      var children = node.children;\n\n      if (children.length) {\n        for (var i = children.length - 1; i >= 0; i--) {\n          nodes.push(children[i]);\n        }\n      }\n    }\n  }\n}\n\nexports.eachAfter = eachAfter;\nexports.eachBefore = eachBefore;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar isFunction = _util.isFunction;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(seriesType, defaultSymbolType, legendSymbol) {\n  // Encoding visual for all series include which is filtered for legend drawing\n  return {\n    seriesType: seriesType,\n    // For legend.\n    performRawSeries: true,\n    reset: function (seriesModel, ecModel, api) {\n      var data = seriesModel.getData();\n      var symbolType = seriesModel.get('symbol');\n      var symbolSize = seriesModel.get('symbolSize');\n      var keepAspect = seriesModel.get('symbolKeepAspect');\n      var symbolRotate = seriesModel.get('symbolRotate');\n      var hasSymbolTypeCallback = isFunction(symbolType);\n      var hasSymbolSizeCallback = isFunction(symbolSize);\n      var hasSymbolRotateCallback = isFunction(symbolRotate);\n      var hasCallback = hasSymbolTypeCallback || hasSymbolSizeCallback || hasSymbolRotateCallback;\n      var seriesSymbol = !hasSymbolTypeCallback && symbolType ? symbolType : defaultSymbolType;\n      var seriesSymbolSize = !hasSymbolSizeCallback ? symbolSize : null;\n      var seriesSymbolRotate = !hasSymbolRotateCallback ? seriesSymbolRotate : null;\n      data.setVisual({\n        legendSymbol: legendSymbol || seriesSymbol,\n        // If seting callback functions on `symbol` or `symbolSize`, for simplicity and avoiding\n        // to bring trouble, we do not pick a reuslt from one of its calling on data item here,\n        // but just use the default value. Callback on `symbol` or `symbolSize` is convenient in\n        // some cases but generally it is not recommanded.\n        symbol: seriesSymbol,\n        symbolSize: seriesSymbolSize,\n        symbolKeepAspect: keepAspect,\n        symbolRotate: symbolRotate\n      }); // Only visible series has each data be visual encoded\n\n      if (ecModel.isSeriesFiltered(seriesModel)) {\n        return;\n      }\n\n      function dataEach(data, idx) {\n        if (hasCallback) {\n          var rawValue = seriesModel.getRawValue(idx);\n          var params = seriesModel.getDataParams(idx);\n          hasSymbolTypeCallback && data.setItemVisual(idx, 'symbol', symbolType(rawValue, params));\n          hasSymbolSizeCallback && data.setItemVisual(idx, 'symbolSize', symbolSize(rawValue, params));\n          hasSymbolRotateCallback && data.setItemVisual(idx, 'symbolRotate', symbolRotate(rawValue, params));\n        }\n\n        if (data.hasItemOption) {\n          var itemModel = data.getItemModel(idx);\n          var itemSymbolType = itemModel.getShallow('symbol', true);\n          var itemSymbolSize = itemModel.getShallow('symbolSize', true);\n          var itemSymbolRotate = itemModel.getShallow('symbolRotate', true);\n          var itemSymbolKeepAspect = itemModel.getShallow('symbolKeepAspect', true); // If has item symbol\n\n          if (itemSymbolType != null) {\n            data.setItemVisual(idx, 'symbol', itemSymbolType);\n          }\n\n          if (itemSymbolSize != null) {\n            // PENDING Transform symbolSize ?\n            data.setItemVisual(idx, 'symbolSize', itemSymbolSize);\n          }\n\n          if (itemSymbolRotate != null) {\n            data.setItemVisual(idx, 'symbolRotate', itemSymbolRotate);\n          }\n\n          if (itemSymbolKeepAspect != null) {\n            data.setItemVisual(idx, 'symbolKeepAspect', itemSymbolKeepAspect);\n          }\n        }\n      }\n\n      return {\n        dataEach: data.hasItemOption || hasCallback ? dataEach : null\n      };\n    }\n  };\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Text = require(\"zrender/lib/graphic/Text\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// import Group from 'zrender/src/container/Group';\n\n/**\n * @alias module:echarts/component/tooltip/TooltipRichContent\n * @constructor\n */\nfunction TooltipRichContent(api) {\n  this._zr = api.getZr();\n  this._show = false;\n  /**\n   * @private\n   */\n\n  this._hideTimeout;\n}\n\nTooltipRichContent.prototype = {\n  constructor: TooltipRichContent,\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  _enterable: true,\n\n  /**\n   * Update when tooltip is rendered\n   */\n  update: function () {// noop\n  },\n  show: function (tooltipModel) {\n    if (this._hideTimeout) {\n      clearTimeout(this._hideTimeout);\n    }\n\n    this.el.attr('show', true);\n    this._show = true;\n  },\n\n  /**\n   * Set tooltip content\n   *\n   * @param {string} content rich text string of content\n   * @param {Object} markerRich rich text style\n   * @param {Object} tooltipModel tooltip model\n   */\n  setContent: function (content, markerRich, tooltipModel) {\n    if (this.el) {\n      this._zr.remove(this.el);\n    }\n\n    var markers = {};\n    var text = content;\n    var prefix = '{marker';\n    var suffix = '|}';\n    var startId = text.indexOf(prefix);\n\n    while (startId >= 0) {\n      var endId = text.indexOf(suffix);\n      var name = text.substr(startId + prefix.length, endId - startId - prefix.length);\n\n      if (name.indexOf('sub') > -1) {\n        markers['marker' + name] = {\n          textWidth: 4,\n          textHeight: 4,\n          textBorderRadius: 2,\n          textBackgroundColor: markerRich[name],\n          // TODO: textOffset is not implemented for rich text\n          textOffset: [3, 0]\n        };\n      } else {\n        markers['marker' + name] = {\n          textWidth: 10,\n          textHeight: 10,\n          textBorderRadius: 5,\n          textBackgroundColor: markerRich[name]\n        };\n      }\n\n      text = text.substr(endId + 1);\n      startId = text.indexOf('{marker');\n    }\n\n    this.el = new Text({\n      style: {\n        rich: markers,\n        text: content,\n        textLineHeight: 20,\n        textBackgroundColor: tooltipModel.get('backgroundColor'),\n        textBorderRadius: tooltipModel.get('borderRadius'),\n        textFill: tooltipModel.get('textStyle.color'),\n        textPadding: tooltipModel.get('padding')\n      },\n      z: tooltipModel.get('z')\n    });\n\n    this._zr.add(this.el);\n\n    var self = this;\n    this.el.on('mouseover', function () {\n      // clear the timeout in hideLater and keep showing tooltip\n      if (self._enterable) {\n        clearTimeout(self._hideTimeout);\n        self._show = true;\n      }\n\n      self._inContent = true;\n    });\n    this.el.on('mouseout', function () {\n      if (self._enterable) {\n        if (self._show) {\n          self.hideLater(self._hideDelay);\n        }\n      }\n\n      self._inContent = false;\n    });\n  },\n  setEnterable: function (enterable) {\n    this._enterable = enterable;\n  },\n  getSize: function () {\n    var bounding = this.el.getBoundingRect();\n    return [bounding.width, bounding.height];\n  },\n  moveTo: function (x, y) {\n    if (this.el) {\n      this.el.attr('position', [x, y]);\n    }\n  },\n  hide: function () {\n    if (this.el) {\n      this.el.hide();\n    }\n\n    this._show = false;\n  },\n  hideLater: function (time) {\n    if (this._show && !(this._inContent && this._enterable)) {\n      if (time) {\n        this._hideDelay = time; // Set show false to avoid invoke hideLater mutiple times\n\n        this._show = false;\n        this._hideTimeout = setTimeout(zrUtil.bind(this.hide, this), time);\n      } else {\n        this.hide();\n      }\n    }\n  },\n  isShow: function () {\n    return this._show;\n  },\n  getOuterSize: function () {\n    var size = this.getSize();\n    return {\n      width: size[0],\n      height: size[1]\n    };\n  }\n};\nvar _default = TooltipRichContent;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar ATTR = '\\0_ec_interaction_mutex';\n\nfunction take(zr, resourceKey, userKey) {\n  var store = getStore(zr);\n  store[resourceKey] = userKey;\n}\n\nfunction release(zr, resourceKey, userKey) {\n  var store = getStore(zr);\n  var uKey = store[resourceKey];\n\n  if (uKey === userKey) {\n    store[resourceKey] = null;\n  }\n}\n\nfunction isTaken(zr, resourceKey) {\n  return !!getStore(zr)[resourceKey];\n}\n\nfunction getStore(zr) {\n  return zr[ATTR] || (zr[ATTR] = {});\n}\n/**\n * payload: {\n *     type: 'takeGlobalCursor',\n *     key: 'dataZoomSelect', or 'brush', or ...,\n *         If no userKey, release global cursor.\n * }\n */\n\n\necharts.registerAction({\n  type: 'takeGlobalCursor',\n  event: 'globalCursorTaken',\n  update: 'update'\n}, function () {});\nexports.take = take;\nexports.release = release;\nexports.isTaken = isTaken;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _default = echarts.extendComponentModel({\n  type: 'tooltip',\n  dependencies: ['axisPointer'],\n  defaultOption: {\n    zlevel: 0,\n    z: 60,\n    show: true,\n    // tooltip\n    showContent: true,\n    // 'trigger' only works on coordinate system.\n    // 'item' | 'axis' | 'none'\n    trigger: 'item',\n    // 'click' | 'mousemove' | 'none'\n    triggerOn: 'mousemove|click',\n    alwaysShowContent: false,\n    displayMode: 'single',\n    // 'single' | 'multipleByCoordSys'\n    renderMode: 'auto',\n    // 'auto' | 'html' | 'richText'\n    // 'auto': use html by default, and use non-html if `document` is not defined\n    // 'html': use html for tooltip\n    // 'richText': use canvas, svg, and etc. for tooltip\n    //  {Array} | {Function}\n    // position: null\n    // Consider triggered from axisPointer handle, verticalAlign should be 'middle'\n    // align: null,\n    // verticalAlign: null,\n    //  content  viewRect  false \n    confine: false,\n    // {string}Template  {Function}\n    // formatter: null\n    showDelay: 0,\n    // ms\n    hideDelay: 100,\n    // s\n    transitionDuration: 0.4,\n    enterable: false,\n    // 0.7\n    backgroundColor: 'rgba(50,50,50,0.7)',\n    // \n    borderColor: '#333',\n    // px4\n    borderRadius: 4,\n    // px0\n    borderWidth: 0,\n    // px5\n    // css\n    padding: 5,\n    // Extra css text\n    extraCssText: '',\n    // \n    axisPointer: {\n      // \n      // 'line' | 'shadow' | 'cross'\n      type: 'line',\n      // type  line  tooltip line \n      //  'x' | 'y' | 'angle' | 'radius' | 'auto'\n      //  'auto' category  x \n      //  angle \n      axis: 'auto',\n      animation: 'auto',\n      animationDurationUpdate: 200,\n      animationEasingUpdate: 'exponentialOut',\n      crossStyle: {\n        color: '#999',\n        width: 1,\n        type: 'dashed',\n        // TODO formatter\n        textStyle: {} // lineStyle and shadowStyle should not be specified here,\n        // otherwise it will always override those styles on option.axisPointer.\n\n      }\n    },\n    textStyle: {\n      color: '#fff',\n      fontSize: 14\n    }\n  }\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar _roamHelper = require(\"../../action/roamHelper\");\n\nvar updateCenterAndZoom = _roamHelper.updateCenterAndZoom;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\necharts.registerAction({\n  type: 'treeExpandAndCollapse',\n  event: 'treeExpandAndCollapse',\n  update: 'update'\n}, function (payload, ecModel) {\n  ecModel.eachComponent({\n    mainType: 'series',\n    subType: 'tree',\n    query: payload\n  }, function (seriesModel) {\n    var dataIndex = payload.dataIndex;\n    var tree = seriesModel.getData().tree;\n    var node = tree.getNodeByDataIndex(dataIndex);\n    node.isExpand = !node.isExpand;\n  });\n});\necharts.registerAction({\n  type: 'treeRoam',\n  event: 'treeRoam',\n  // Here we set 'none' instead of 'update', because roam action\n  // just need to update the transform matrix without having to recalculate\n  // the layout. So don't need to go through the whole update process, such\n  // as 'dataPrcocess', 'coordSystemUpdate', 'layout' and so on.\n  update: 'none'\n}, function (payload, ecModel) {\n  ecModel.eachComponent({\n    mainType: 'series',\n    subType: 'tree',\n    query: payload\n  }, function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    var res = updateCenterAndZoom(coordSys, payload);\n    seriesModel.setCenter && seriesModel.setCenter(res.center);\n    seriesModel.setZoom && seriesModel.setZoom(res.zoom);\n  });\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar IRRELEVANT_EXCLUDES = {\n  'axisPointer': 1,\n  'tooltip': 1,\n  'brush': 1\n};\n/**\n * Avoid that: mouse click on a elements that is over geo or graph,\n * but roam is triggered.\n */\n\nfunction onIrrelevantElement(e, api, targetCoordSysModel) {\n  var model = api.getComponentByElement(e.topTarget); // If model is axisModel, it works only if it is injected with coordinateSystem.\n\n  var coordSys = model && model.coordinateSystem;\n  return model && model !== targetCoordSysModel && !IRRELEVANT_EXCLUDES[model.mainType] && coordSys && coordSys.model !== targetCoordSysModel;\n}\n\nexports.onIrrelevantElement = onIrrelevantElement;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _traversalHelper = require(\"./traversalHelper\");\n\nvar eachAfter = _traversalHelper.eachAfter;\nvar eachBefore = _traversalHelper.eachBefore;\n\nvar _layoutHelper = require(\"./layoutHelper\");\n\nvar init = _layoutHelper.init;\nvar firstWalk = _layoutHelper.firstWalk;\nvar secondWalk = _layoutHelper.secondWalk;\nvar sep = _layoutHelper.separation;\nvar radialCoordinate = _layoutHelper.radialCoordinate;\nvar getViewRect = _layoutHelper.getViewRect;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(ecModel, api) {\n  ecModel.eachSeriesByType('tree', function (seriesModel) {\n    commonLayout(seriesModel, api);\n  });\n}\n\nfunction commonLayout(seriesModel, api) {\n  var layoutInfo = getViewRect(seriesModel, api);\n  seriesModel.layoutInfo = layoutInfo;\n  var layout = seriesModel.get('layout');\n  var width = 0;\n  var height = 0;\n  var separation = null;\n\n  if (layout === 'radial') {\n    width = 2 * Math.PI;\n    height = Math.min(layoutInfo.height, layoutInfo.width) / 2;\n    separation = sep(function (node1, node2) {\n      return (node1.parentNode === node2.parentNode ? 1 : 2) / node1.depth;\n    });\n  } else {\n    width = layoutInfo.width;\n    height = layoutInfo.height;\n    separation = sep();\n  }\n\n  var virtualRoot = seriesModel.getData().tree.root;\n  var realRoot = virtualRoot.children[0];\n\n  if (realRoot) {\n    init(virtualRoot);\n    eachAfter(realRoot, firstWalk, separation);\n    virtualRoot.hierNode.modifier = -realRoot.hierNode.prelim;\n    eachBefore(realRoot, secondWalk);\n    var left = realRoot;\n    var right = realRoot;\n    var bottom = realRoot;\n    eachBefore(realRoot, function (node) {\n      var x = node.getLayout().x;\n\n      if (x < left.getLayout().x) {\n        left = node;\n      }\n\n      if (x > right.getLayout().x) {\n        right = node;\n      }\n\n      if (node.depth > bottom.depth) {\n        bottom = node;\n      }\n    });\n    var delta = left === right ? 1 : separation(left, right) / 2;\n    var tx = delta - left.getLayout().x;\n    var kx = 0;\n    var ky = 0;\n    var coorX = 0;\n    var coorY = 0;\n\n    if (layout === 'radial') {\n      kx = width / (right.getLayout().x + delta + tx); // here we use (node.depth - 1), bucause the real root's depth is 1\n\n      ky = height / (bottom.depth - 1 || 1);\n      eachBefore(realRoot, function (node) {\n        coorX = (node.getLayout().x + tx) * kx;\n        coorY = (node.depth - 1) * ky;\n        var finalCoor = radialCoordinate(coorX, coorY);\n        node.setLayout({\n          x: finalCoor.x,\n          y: finalCoor.y,\n          rawX: coorX,\n          rawY: coorY\n        }, true);\n      });\n    } else {\n      var orient = seriesModel.getOrient();\n\n      if (orient === 'RL' || orient === 'LR') {\n        ky = height / (right.getLayout().x + delta + tx);\n        kx = width / (bottom.depth - 1 || 1);\n        eachBefore(realRoot, function (node) {\n          coorY = (node.getLayout().x + tx) * ky;\n          coorX = orient === 'LR' ? (node.depth - 1) * kx : width - (node.depth - 1) * kx;\n          node.setLayout({\n            x: coorX,\n            y: coorY\n          }, true);\n        });\n      } else if (orient === 'TB' || orient === 'BT') {\n        kx = width / (right.getLayout().x + delta + tx);\n        ky = height / (bottom.depth - 1 || 1);\n        eachBefore(realRoot, function (node) {\n          coorX = (node.getLayout().x + tx) * kx;\n          coorY = orient === 'TB' ? (node.depth - 1) * ky : height - (node.depth - 1) * ky;\n          node.setLayout({\n            x: coorX,\n            y: coorY\n          }, true);\n        });\n      }\n    }\n  }\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar axisPointerModelHelper = require(\"./axisPointer/modelHelper\");\n\nvar axisTrigger = require(\"./axisPointer/axisTrigger\");\n\nrequire(\"./axisPointer/AxisPointerModel\");\n\nrequire(\"./axisPointer/AxisPointerView\");\n\nrequire(\"./axisPointer/CartesianAxisPointer\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// CartesianAxisPointer is not supposed to be required here. But consider\n// echarts.simple.js and online build tooltip, which only require gridSimple,\n// CartesianAxisPointer should be able to required somewhere.\necharts.registerPreprocessor(function (option) {\n  // Always has a global axisPointerModel for default setting.\n  if (option) {\n    (!option.axisPointer || option.axisPointer.length === 0) && (option.axisPointer = {});\n    var link = option.axisPointer.link; // Normalize to array to avoid object mergin. But if link\n    // is not set, remain null/undefined, otherwise it will\n    // override existent link setting.\n\n    if (link && !zrUtil.isArray(link)) {\n      option.axisPointer.link = [link];\n    }\n  }\n}); // This process should proformed after coordinate systems created\n// and series data processed. So put it on statistic processing stage.\n\necharts.registerProcessor(echarts.PRIORITY.PROCESSOR.STATISTIC, function (ecModel, api) {\n  // Build axisPointerModel, mergin tooltip.axisPointer model for each axis.\n  // allAxesInfo should be updated when setOption performed.\n  ecModel.getComponent('axisPointer').coordSysAxesInfo = axisPointerModelHelper.collect(ecModel, api);\n}); // Broadcast to all views.\n\necharts.registerAction({\n  type: 'updateAxisPointer',\n  event: 'updateAxisPointer',\n  update: ':updateAxisPointer'\n}, axisTrigger);","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar globalListener = require(\"./globalListener\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar AxisPointerView = echarts.extendComponentView({\n  type: 'axisPointer',\n  render: function (globalAxisPointerModel, ecModel, api) {\n    var globalTooltipModel = ecModel.getComponent('tooltip');\n    var triggerOn = globalAxisPointerModel.get('triggerOn') || globalTooltipModel && globalTooltipModel.get('triggerOn') || 'mousemove|click'; // Register global listener in AxisPointerView to enable\n    // AxisPointerView to be independent to Tooltip.\n\n    globalListener.register('axisPointer', api, function (currTrigger, e, dispatchAction) {\n      // If 'none', it is not controlled by mouse totally.\n      if (triggerOn !== 'none' && (currTrigger === 'leave' || triggerOn.indexOf(currTrigger) >= 0)) {\n        dispatchAction({\n          type: 'updateAxisPointer',\n          currTrigger: currTrigger,\n          x: e && e.offsetX,\n          y: e && e.offsetY\n        });\n      }\n    });\n  },\n\n  /**\n   * @override\n   */\n  remove: function (ecModel, api) {\n    globalListener.unregister(api.getZr(), 'axisPointer');\n    AxisPointerView.superApply(this._model, 'remove', arguments);\n  },\n\n  /**\n   * @override\n   */\n  dispose: function (ecModel, api) {\n    globalListener.unregister('axisPointer', api);\n    AxisPointerView.superApply(this._model, 'dispose', arguments);\n  }\n});\nvar _default = AxisPointerView;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {module:echarts/coord/View} view\n * @param {Object} payload\n * @param {Object} [zoomLimit]\n */\nfunction updateCenterAndZoom(view, payload, zoomLimit) {\n  var previousZoom = view.getZoom();\n  var center = view.getCenter();\n  var zoom = payload.zoom;\n  var point = view.dataToPoint(center);\n\n  if (payload.dx != null && payload.dy != null) {\n    point[0] -= payload.dx;\n    point[1] -= payload.dy;\n    var center = view.pointToData(point);\n    view.setCenter(center);\n  }\n\n  if (zoom != null) {\n    if (zoomLimit) {\n      var zoomMin = zoomLimit.min || 0;\n      var zoomMax = zoomLimit.max || Infinity;\n      zoom = Math.max(Math.min(previousZoom * zoom, zoomMax), zoomMin) / previousZoom;\n    } // Zoom on given point(originX, originY)\n\n\n    view.scale[0] *= zoom;\n    view.scale[1] *= zoom;\n    var position = view.position;\n    var fixX = (payload.originX - position[0]) * (zoom - 1);\n    var fixY = (payload.originY - position[1]) * (zoom - 1);\n    position[0] -= fixX;\n    position[1] -= fixY;\n    view.updateTransform(); // Get the new center\n\n    var center = view.pointToData(point);\n    view.setCenter(center);\n    view.setZoom(zoom * previousZoom);\n  }\n\n  return {\n    center: view.getCenter(),\n    zoom: view.getZoom()\n  };\n}\n\nexports.updateCenterAndZoom = updateCenterAndZoom;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar clazzUtil = require(\"../../util/clazz\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar axisPointerModelHelper = require(\"./modelHelper\");\n\nvar eventTool = require(\"zrender/lib/core/event\");\n\nvar throttleUtil = require(\"../../util/throttle\");\n\nvar _model = require(\"../../util/model\");\n\nvar makeInner = _model.makeInner;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar inner = makeInner();\nvar clone = zrUtil.clone;\nvar bind = zrUtil.bind;\n/**\n * Base axis pointer class in 2D.\n * Implemenents {module:echarts/component/axis/IAxisPointer}.\n */\n\nfunction BaseAxisPointer() {}\n\nBaseAxisPointer.prototype = {\n  /**\n   * @private\n   */\n  _group: null,\n\n  /**\n   * @private\n   */\n  _lastGraphicKey: null,\n\n  /**\n   * @private\n   */\n  _handle: null,\n\n  /**\n   * @private\n   */\n  _dragging: false,\n\n  /**\n   * @private\n   */\n  _lastValue: null,\n\n  /**\n   * @private\n   */\n  _lastStatus: null,\n\n  /**\n   * @private\n   */\n  _payloadInfo: null,\n\n  /**\n   * In px, arbitrary value. Do not set too small,\n   * no animation is ok for most cases.\n   * @protected\n   */\n  animationThreshold: 15,\n\n  /**\n   * @implement\n   */\n  render: function (axisModel, axisPointerModel, api, forceRender) {\n    var value = axisPointerModel.get('value');\n    var status = axisPointerModel.get('status'); // Bind them to `this`, not in closure, otherwise they will not\n    // be replaced when user calling setOption in not merge mode.\n\n    this._axisModel = axisModel;\n    this._axisPointerModel = axisPointerModel;\n    this._api = api; // Optimize: `render` will be called repeatly during mouse move.\n    // So it is power consuming if performing `render` each time,\n    // especially on mobile device.\n\n    if (!forceRender && this._lastValue === value && this._lastStatus === status) {\n      return;\n    }\n\n    this._lastValue = value;\n    this._lastStatus = status;\n    var group = this._group;\n    var handle = this._handle;\n\n    if (!status || status === 'hide') {\n      // Do not clear here, for animation better.\n      group && group.hide();\n      handle && handle.hide();\n      return;\n    }\n\n    group && group.show();\n    handle && handle.show(); // Otherwise status is 'show'\n\n    var elOption = {};\n    this.makeElOption(elOption, value, axisModel, axisPointerModel, api); // Enable change axis pointer type.\n\n    var graphicKey = elOption.graphicKey;\n\n    if (graphicKey !== this._lastGraphicKey) {\n      this.clear(api);\n    }\n\n    this._lastGraphicKey = graphicKey;\n    var moveAnimation = this._moveAnimation = this.determineAnimation(axisModel, axisPointerModel);\n\n    if (!group) {\n      group = this._group = new graphic.Group();\n      this.createPointerEl(group, elOption, axisModel, axisPointerModel);\n      this.createLabelEl(group, elOption, axisModel, axisPointerModel);\n      api.getZr().add(group);\n    } else {\n      var doUpdateProps = zrUtil.curry(updateProps, axisPointerModel, moveAnimation);\n      this.updatePointerEl(group, elOption, doUpdateProps, axisPointerModel);\n      this.updateLabelEl(group, elOption, doUpdateProps, axisPointerModel);\n    }\n\n    updateMandatoryProps(group, axisPointerModel, true);\n\n    this._renderHandle(value);\n  },\n\n  /**\n   * @implement\n   */\n  remove: function (api) {\n    this.clear(api);\n  },\n\n  /**\n   * @implement\n   */\n  dispose: function (api) {\n    this.clear(api);\n  },\n\n  /**\n   * @protected\n   */\n  determineAnimation: function (axisModel, axisPointerModel) {\n    var animation = axisPointerModel.get('animation');\n    var axis = axisModel.axis;\n    var isCategoryAxis = axis.type === 'category';\n    var useSnap = axisPointerModel.get('snap'); // Value axis without snap always do not snap.\n\n    if (!useSnap && !isCategoryAxis) {\n      return false;\n    }\n\n    if (animation === 'auto' || animation == null) {\n      var animationThreshold = this.animationThreshold;\n\n      if (isCategoryAxis && axis.getBandWidth() > animationThreshold) {\n        return true;\n      } // It is important to auto animation when snap used. Consider if there is\n      // a dataZoom, animation will be disabled when too many points exist, while\n      // it will be enabled for better visual effect when little points exist.\n\n\n      if (useSnap) {\n        var seriesDataCount = axisPointerModelHelper.getAxisInfo(axisModel).seriesDataCount;\n        var axisExtent = axis.getExtent(); // Approximate band width\n\n        return Math.abs(axisExtent[0] - axisExtent[1]) / seriesDataCount > animationThreshold;\n      }\n\n      return false;\n    }\n\n    return animation === true;\n  },\n\n  /**\n   * add {pointer, label, graphicKey} to elOption\n   * @protected\n   */\n  makeElOption: function (elOption, value, axisModel, axisPointerModel, api) {// Shoule be implemenented by sub-class.\n  },\n\n  /**\n   * @protected\n   */\n  createPointerEl: function (group, elOption, axisModel, axisPointerModel) {\n    var pointerOption = elOption.pointer;\n\n    if (pointerOption) {\n      var pointerEl = inner(group).pointerEl = new graphic[pointerOption.type](clone(elOption.pointer));\n      group.add(pointerEl);\n    }\n  },\n\n  /**\n   * @protected\n   */\n  createLabelEl: function (group, elOption, axisModel, axisPointerModel) {\n    if (elOption.label) {\n      var labelEl = inner(group).labelEl = new graphic.Rect(clone(elOption.label));\n      group.add(labelEl);\n      updateLabelShowHide(labelEl, axisPointerModel);\n    }\n  },\n\n  /**\n   * @protected\n   */\n  updatePointerEl: function (group, elOption, updateProps) {\n    var pointerEl = inner(group).pointerEl;\n\n    if (pointerEl && elOption.pointer) {\n      pointerEl.setStyle(elOption.pointer.style);\n      updateProps(pointerEl, {\n        shape: elOption.pointer.shape\n      });\n    }\n  },\n\n  /**\n   * @protected\n   */\n  updateLabelEl: function (group, elOption, updateProps, axisPointerModel) {\n    var labelEl = inner(group).labelEl;\n\n    if (labelEl) {\n      labelEl.setStyle(elOption.label.style);\n      updateProps(labelEl, {\n        // Consider text length change in vertical axis, animation should\n        // be used on shape, otherwise the effect will be weird.\n        shape: elOption.label.shape,\n        position: elOption.label.position\n      });\n      updateLabelShowHide(labelEl, axisPointerModel);\n    }\n  },\n\n  /**\n   * @private\n   */\n  _renderHandle: function (value) {\n    if (this._dragging || !this.updateHandleTransform) {\n      return;\n    }\n\n    var axisPointerModel = this._axisPointerModel;\n\n    var zr = this._api.getZr();\n\n    var handle = this._handle;\n    var handleModel = axisPointerModel.getModel('handle');\n    var status = axisPointerModel.get('status');\n\n    if (!handleModel.get('show') || !status || status === 'hide') {\n      handle && zr.remove(handle);\n      this._handle = null;\n      return;\n    }\n\n    var isInit;\n\n    if (!this._handle) {\n      isInit = true;\n      handle = this._handle = graphic.createIcon(handleModel.get('icon'), {\n        cursor: 'move',\n        draggable: true,\n        onmousemove: function (e) {\n          // Fot mobile devicem, prevent screen slider on the button.\n          eventTool.stop(e.event);\n        },\n        onmousedown: bind(this._onHandleDragMove, this, 0, 0),\n        drift: bind(this._onHandleDragMove, this),\n        ondragend: bind(this._onHandleDragEnd, this)\n      });\n      zr.add(handle);\n    }\n\n    updateMandatoryProps(handle, axisPointerModel, false); // update style\n\n    var includeStyles = ['color', 'borderColor', 'borderWidth', 'opacity', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'];\n    handle.setStyle(handleModel.getItemStyle(null, includeStyles)); // update position\n\n    var handleSize = handleModel.get('size');\n\n    if (!zrUtil.isArray(handleSize)) {\n      handleSize = [handleSize, handleSize];\n    }\n\n    handle.attr('scale', [handleSize[0] / 2, handleSize[1] / 2]);\n    throttleUtil.createOrUpdate(this, '_doDispatchAxisPointer', handleModel.get('throttle') || 0, 'fixRate');\n\n    this._moveHandleToValue(value, isInit);\n  },\n\n  /**\n   * @private\n   */\n  _moveHandleToValue: function (value, isInit) {\n    updateProps(this._axisPointerModel, !isInit && this._moveAnimation, this._handle, getHandleTransProps(this.getHandleTransform(value, this._axisModel, this._axisPointerModel)));\n  },\n\n  /**\n   * @private\n   */\n  _onHandleDragMove: function (dx, dy) {\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    this._dragging = true; // Persistent for throttle.\n\n    var trans = this.updateHandleTransform(getHandleTransProps(handle), [dx, dy], this._axisModel, this._axisPointerModel);\n    this._payloadInfo = trans;\n    handle.stopAnimation();\n    handle.attr(getHandleTransProps(trans));\n    inner(handle).lastProp = null;\n\n    this._doDispatchAxisPointer();\n  },\n\n  /**\n   * Throttled method.\n   * @private\n   */\n  _doDispatchAxisPointer: function () {\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    var payloadInfo = this._payloadInfo;\n    var axisModel = this._axisModel;\n\n    this._api.dispatchAction({\n      type: 'updateAxisPointer',\n      x: payloadInfo.cursorPoint[0],\n      y: payloadInfo.cursorPoint[1],\n      tooltipOption: payloadInfo.tooltipOption,\n      axesInfo: [{\n        axisDim: axisModel.axis.dim,\n        axisIndex: axisModel.componentIndex\n      }]\n    });\n  },\n\n  /**\n   * @private\n   */\n  _onHandleDragEnd: function (moveAnimation) {\n    this._dragging = false;\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    var value = this._axisPointerModel.get('value'); // Consider snap or categroy axis, handle may be not consistent with\n    // axisPointer. So move handle to align the exact value position when\n    // drag ended.\n\n\n    this._moveHandleToValue(value); // For the effect: tooltip will be shown when finger holding on handle\n    // button, and will be hidden after finger left handle button.\n\n\n    this._api.dispatchAction({\n      type: 'hideTip'\n    });\n  },\n\n  /**\n   * Should be implemenented by sub-class if support `handle`.\n   * @protected\n   * @param {number} value\n   * @param {module:echarts/model/Model} axisModel\n   * @param {module:echarts/model/Model} axisPointerModel\n   * @return {Object} {position: [x, y], rotation: 0}\n   */\n  getHandleTransform: null,\n\n  /**\n   * * Should be implemenented by sub-class if support `handle`.\n   * @protected\n   * @param {Object} transform {position, rotation}\n   * @param {Array.<number>} delta [dx, dy]\n   * @param {module:echarts/model/Model} axisModel\n   * @param {module:echarts/model/Model} axisPointerModel\n   * @return {Object} {position: [x, y], rotation: 0, cursorPoint: [x, y]}\n   */\n  updateHandleTransform: null,\n\n  /**\n   * @private\n   */\n  clear: function (api) {\n    this._lastValue = null;\n    this._lastStatus = null;\n    var zr = api.getZr();\n    var group = this._group;\n    var handle = this._handle;\n\n    if (zr && group) {\n      this._lastGraphicKey = null;\n      group && zr.remove(group);\n      handle && zr.remove(handle);\n      this._group = null;\n      this._handle = null;\n      this._payloadInfo = null;\n    }\n  },\n\n  /**\n   * @protected\n   */\n  doClear: function () {// Implemented by sub-class if necessary.\n  },\n\n  /**\n   * @protected\n   * @param {Array.<number>} xy\n   * @param {Array.<number>} wh\n   * @param {number} [xDimIndex=0] or 1\n   */\n  buildLabel: function (xy, wh, xDimIndex) {\n    xDimIndex = xDimIndex || 0;\n    return {\n      x: xy[xDimIndex],\n      y: xy[1 - xDimIndex],\n      width: wh[xDimIndex],\n      height: wh[1 - xDimIndex]\n    };\n  }\n};\nBaseAxisPointer.prototype.constructor = BaseAxisPointer;\n\nfunction updateProps(animationModel, moveAnimation, el, props) {\n  // Animation optimize.\n  if (!propsEqual(inner(el).lastProp, props)) {\n    inner(el).lastProp = props;\n    moveAnimation ? graphic.updateProps(el, props, animationModel) : (el.stopAnimation(), el.attr(props));\n  }\n}\n\nfunction propsEqual(lastProps, newProps) {\n  if (zrUtil.isObject(lastProps) && zrUtil.isObject(newProps)) {\n    var equals = true;\n    zrUtil.each(newProps, function (item, key) {\n      equals = equals && propsEqual(lastProps[key], item);\n    });\n    return !!equals;\n  } else {\n    return lastProps === newProps;\n  }\n}\n\nfunction updateLabelShowHide(labelEl, axisPointerModel) {\n  labelEl[axisPointerModel.get('label.show') ? 'show' : 'hide']();\n}\n\nfunction getHandleTransProps(trans) {\n  return {\n    position: trans.position.slice(),\n    rotation: trans.rotation || 0\n  };\n}\n\nfunction updateMandatoryProps(group, axisPointerModel, silent) {\n  var z = axisPointerModel.get('z');\n  var zlevel = axisPointerModel.get('zlevel');\n  group && group.traverse(function (el) {\n    if (el.type !== 'group') {\n      z != null && (el.z = z);\n      zlevel != null && (el.zlevel = zlevel);\n      el.silent = silent;\n    }\n  });\n}\n\nclazzUtil.enableClassExtend(BaseAxisPointer);\nvar _default = BaseAxisPointer;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _model = require(\"../../util/model\");\n\nvar makeInner = _model.makeInner;\n\nvar modelHelper = require(\"./modelHelper\");\n\nvar findPointFromSeries = require(\"./findPointFromSeries\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\nvar curry = zrUtil.curry;\nvar inner = makeInner();\n/**\n * Basic logic: check all axis, if they do not demand show/highlight,\n * then hide/downplay them.\n *\n * @param {Object} coordSysAxesInfo\n * @param {Object} payload\n * @param {string} [payload.currTrigger] 'click' | 'mousemove' | 'leave'\n * @param {Array.<number>} [payload.x] x and y, which are mandatory, specify a point to\n *              trigger axisPointer and tooltip.\n * @param {Array.<number>} [payload.y] x and y, which are mandatory, specify a point to\n *              trigger axisPointer and tooltip.\n * @param {Object} [payload.seriesIndex] finder, optional, restrict target axes.\n * @param {Object} [payload.dataIndex] finder, restrict target axes.\n * @param {Object} [payload.axesInfo] finder, restrict target axes.\n *        [{\n *          axisDim: 'x'|'y'|'angle'|...,\n *          axisIndex: ...,\n *          value: ...\n *        }, ...]\n * @param {Function} [payload.dispatchAction]\n * @param {Object} [payload.tooltipOption]\n * @param {Object|Array.<number>|Function} [payload.position] Tooltip position,\n *        which can be specified in dispatchAction\n * @param {module:echarts/model/Global} ecModel\n * @param {module:echarts/ExtensionAPI} api\n * @return {Object} content of event obj for echarts.connect.\n */\n\nfunction _default(payload, ecModel, api) {\n  var currTrigger = payload.currTrigger;\n  var point = [payload.x, payload.y];\n  var finder = payload;\n  var dispatchAction = payload.dispatchAction || zrUtil.bind(api.dispatchAction, api);\n  var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo; // Pending\n  // See #6121. But we are not able to reproduce it yet.\n\n  if (!coordSysAxesInfo) {\n    return;\n  }\n\n  if (illegalPoint(point)) {\n    // Used in the default behavior of `connection`: use the sample seriesIndex\n    // and dataIndex. And also used in the tooltipView trigger.\n    point = findPointFromSeries({\n      seriesIndex: finder.seriesIndex,\n      // Do not use dataIndexInside from other ec instance.\n      // FIXME: auto detect it?\n      dataIndex: finder.dataIndex\n    }, ecModel).point;\n  }\n\n  var isIllegalPoint = illegalPoint(point); // Axis and value can be specified when calling dispatchAction({type: 'updateAxisPointer'}).\n  // Notice: In this case, it is difficult to get the `point` (which is necessary to show\n  // tooltip, so if point is not given, we just use the point found by sample seriesIndex\n  // and dataIndex.\n\n  var inputAxesInfo = finder.axesInfo;\n  var axesInfo = coordSysAxesInfo.axesInfo;\n  var shouldHide = currTrigger === 'leave' || illegalPoint(point);\n  var outputFinder = {};\n  var showValueMap = {};\n  var dataByCoordSys = {\n    list: [],\n    map: {}\n  };\n  var updaters = {\n    showPointer: curry(showPointer, showValueMap),\n    showTooltip: curry(showTooltip, dataByCoordSys)\n  }; // Process for triggered axes.\n\n  each(coordSysAxesInfo.coordSysMap, function (coordSys, coordSysKey) {\n    // If a point given, it must be contained by the coordinate system.\n    var coordSysContainsPoint = isIllegalPoint || coordSys.containPoint(point);\n    each(coordSysAxesInfo.coordSysAxesInfo[coordSysKey], function (axisInfo, key) {\n      var axis = axisInfo.axis;\n      var inputAxisInfo = findInputAxisInfo(inputAxesInfo, axisInfo); // If no inputAxesInfo, no axis is restricted.\n\n      if (!shouldHide && coordSysContainsPoint && (!inputAxesInfo || inputAxisInfo)) {\n        var val = inputAxisInfo && inputAxisInfo.value;\n\n        if (val == null && !isIllegalPoint) {\n          val = axis.pointToData(point);\n        }\n\n        val != null && processOnAxis(axisInfo, val, updaters, false, outputFinder);\n      }\n    });\n  }); // Process for linked axes.\n\n  var linkTriggers = {};\n  each(axesInfo, function (tarAxisInfo, tarKey) {\n    var linkGroup = tarAxisInfo.linkGroup; // If axis has been triggered in the previous stage, it should not be triggered by link.\n\n    if (linkGroup && !showValueMap[tarKey]) {\n      each(linkGroup.axesInfo, function (srcAxisInfo, srcKey) {\n        var srcValItem = showValueMap[srcKey]; // If srcValItem exist, source axis is triggered, so link to target axis.\n\n        if (srcAxisInfo !== tarAxisInfo && srcValItem) {\n          var val = srcValItem.value;\n          linkGroup.mapper && (val = tarAxisInfo.axis.scale.parse(linkGroup.mapper(val, makeMapperParam(srcAxisInfo), makeMapperParam(tarAxisInfo))));\n          linkTriggers[tarAxisInfo.key] = val;\n        }\n      });\n    }\n  });\n  each(linkTriggers, function (val, tarKey) {\n    processOnAxis(axesInfo[tarKey], val, updaters, true, outputFinder);\n  });\n  updateModelActually(showValueMap, axesInfo, outputFinder);\n  dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction);\n  dispatchHighDownActually(axesInfo, dispatchAction, api);\n  return outputFinder;\n}\n\nfunction processOnAxis(axisInfo, newValue, updaters, dontSnap, outputFinder) {\n  var axis = axisInfo.axis;\n\n  if (axis.scale.isBlank() || !axis.containData(newValue)) {\n    return;\n  }\n\n  if (!axisInfo.involveSeries) {\n    updaters.showPointer(axisInfo, newValue);\n    return;\n  } // Heavy calculation. So put it after axis.containData checking.\n\n\n  var payloadInfo = buildPayloadsBySeries(newValue, axisInfo);\n  var payloadBatch = payloadInfo.payloadBatch;\n  var snapToValue = payloadInfo.snapToValue; // Fill content of event obj for echarts.connect.\n  // By defualt use the first involved series data as a sample to connect.\n\n  if (payloadBatch[0] && outputFinder.seriesIndex == null) {\n    zrUtil.extend(outputFinder, payloadBatch[0]);\n  } // If no linkSource input, this process is for collecting link\n  // target, where snap should not be accepted.\n\n\n  if (!dontSnap && axisInfo.snap) {\n    if (axis.containData(snapToValue) && snapToValue != null) {\n      newValue = snapToValue;\n    }\n  }\n\n  updaters.showPointer(axisInfo, newValue, payloadBatch, outputFinder); // Tooltip should always be snapToValue, otherwise there will be\n  // incorrect \"axis value ~ series value\" mapping displayed in tooltip.\n\n  updaters.showTooltip(axisInfo, payloadInfo, snapToValue);\n}\n\nfunction buildPayloadsBySeries(value, axisInfo) {\n  var axis = axisInfo.axis;\n  var dim = axis.dim;\n  var snapToValue = value;\n  var payloadBatch = [];\n  var minDist = Number.MAX_VALUE;\n  var minDiff = -1;\n  each(axisInfo.seriesModels, function (series, idx) {\n    var dataDim = series.getData().mapDimension(dim, true);\n    var seriesNestestValue;\n    var dataIndices;\n\n    if (series.getAxisTooltipData) {\n      var result = series.getAxisTooltipData(dataDim, value, axis);\n      dataIndices = result.dataIndices;\n      seriesNestestValue = result.nestestValue;\n    } else {\n      dataIndices = series.getData().indicesOfNearest(dataDim[0], value, // Add a threshold to avoid find the wrong dataIndex\n      // when data length is not same.\n      // false,\n      axis.type === 'category' ? 0.5 : null);\n\n      if (!dataIndices.length) {\n        return;\n      }\n\n      seriesNestestValue = series.getData().get(dataDim[0], dataIndices[0]);\n    }\n\n    if (seriesNestestValue == null || !isFinite(seriesNestestValue)) {\n      return;\n    }\n\n    var diff = value - seriesNestestValue;\n    var dist = Math.abs(diff); // Consider category case\n\n    if (dist <= minDist) {\n      if (dist < minDist || diff >= 0 && minDiff < 0) {\n        minDist = dist;\n        minDiff = diff;\n        snapToValue = seriesNestestValue;\n        payloadBatch.length = 0;\n      }\n\n      each(dataIndices, function (dataIndex) {\n        payloadBatch.push({\n          seriesIndex: series.seriesIndex,\n          dataIndexInside: dataIndex,\n          dataIndex: series.getData().getRawIndex(dataIndex)\n        });\n      });\n    }\n  });\n  return {\n    payloadBatch: payloadBatch,\n    snapToValue: snapToValue\n  };\n}\n\nfunction showPointer(showValueMap, axisInfo, value, payloadBatch) {\n  showValueMap[axisInfo.key] = {\n    value: value,\n    payloadBatch: payloadBatch\n  };\n}\n\nfunction showTooltip(dataByCoordSys, axisInfo, payloadInfo, value) {\n  var payloadBatch = payloadInfo.payloadBatch;\n  var axis = axisInfo.axis;\n  var axisModel = axis.model;\n  var axisPointerModel = axisInfo.axisPointerModel; // If no data, do not create anything in dataByCoordSys,\n  // whose length will be used to judge whether dispatch action.\n\n  if (!axisInfo.triggerTooltip || !payloadBatch.length) {\n    return;\n  }\n\n  var coordSysModel = axisInfo.coordSys.model;\n  var coordSysKey = modelHelper.makeKey(coordSysModel);\n  var coordSysItem = dataByCoordSys.map[coordSysKey];\n\n  if (!coordSysItem) {\n    coordSysItem = dataByCoordSys.map[coordSysKey] = {\n      coordSysId: coordSysModel.id,\n      coordSysIndex: coordSysModel.componentIndex,\n      coordSysType: coordSysModel.type,\n      coordSysMainType: coordSysModel.mainType,\n      dataByAxis: []\n    };\n    dataByCoordSys.list.push(coordSysItem);\n  }\n\n  coordSysItem.dataByAxis.push({\n    axisDim: axis.dim,\n    axisIndex: axisModel.componentIndex,\n    axisType: axisModel.type,\n    axisId: axisModel.id,\n    value: value,\n    // Caustion: viewHelper.getValueLabel is actually on \"view stage\", which\n    // depends that all models have been updated. So it should not be performed\n    // here. Considering axisPointerModel used here is volatile, which is hard\n    // to be retrieve in TooltipView, we prepare parameters here.\n    valueLabelOpt: {\n      precision: axisPointerModel.get('label.precision'),\n      formatter: axisPointerModel.get('label.formatter')\n    },\n    seriesDataIndices: payloadBatch.slice()\n  });\n}\n\nfunction updateModelActually(showValueMap, axesInfo, outputFinder) {\n  var outputAxesInfo = outputFinder.axesInfo = []; // Basic logic: If no 'show' required, 'hide' this axisPointer.\n\n  each(axesInfo, function (axisInfo, key) {\n    var option = axisInfo.axisPointerModel.option;\n    var valItem = showValueMap[key];\n\n    if (valItem) {\n      !axisInfo.useHandle && (option.status = 'show');\n      option.value = valItem.value; // For label formatter param and highlight.\n\n      option.seriesDataIndices = (valItem.payloadBatch || []).slice();\n    } // When always show (e.g., handle used), remain\n    // original value and status.\n    else {\n        // If hide, value still need to be set, consider\n        // click legend to toggle axis blank.\n        !axisInfo.useHandle && (option.status = 'hide');\n      } // If status is 'hide', should be no info in payload.\n\n\n    option.status === 'show' && outputAxesInfo.push({\n      axisDim: axisInfo.axis.dim,\n      axisIndex: axisInfo.axis.model.componentIndex,\n      value: option.value\n    });\n  });\n}\n\nfunction dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction) {\n  // Basic logic: If no showTip required, hideTip will be dispatched.\n  if (illegalPoint(point) || !dataByCoordSys.list.length) {\n    dispatchAction({\n      type: 'hideTip'\n    });\n    return;\n  } // In most case only one axis (or event one series is used). It is\n  // convinient to fetch payload.seriesIndex and payload.dataIndex\n  // dirtectly. So put the first seriesIndex and dataIndex of the first\n  // axis on the payload.\n\n\n  var sampleItem = ((dataByCoordSys.list[0].dataByAxis[0] || {}).seriesDataIndices || [])[0] || {};\n  dispatchAction({\n    type: 'showTip',\n    escapeConnect: true,\n    x: point[0],\n    y: point[1],\n    tooltipOption: payload.tooltipOption,\n    position: payload.position,\n    dataIndexInside: sampleItem.dataIndexInside,\n    dataIndex: sampleItem.dataIndex,\n    seriesIndex: sampleItem.seriesIndex,\n    dataByCoordSys: dataByCoordSys.list\n  });\n}\n\nfunction dispatchHighDownActually(axesInfo, dispatchAction, api) {\n  // FIXME\n  // highlight status modification shoule be a stage of main process?\n  // (Consider confilct (e.g., legend and axisPointer) and setOption)\n  var zr = api.getZr();\n  var highDownKey = 'axisPointerLastHighlights';\n  var lastHighlights = inner(zr)[highDownKey] || {};\n  var newHighlights = inner(zr)[highDownKey] = {}; // Update highlight/downplay status according to axisPointer model.\n  // Build hash map and remove duplicate incidentally.\n\n  each(axesInfo, function (axisInfo, key) {\n    var option = axisInfo.axisPointerModel.option;\n    option.status === 'show' && each(option.seriesDataIndices, function (batchItem) {\n      var key = batchItem.seriesIndex + ' | ' + batchItem.dataIndex;\n      newHighlights[key] = batchItem;\n    });\n  }); // Diff.\n\n  var toHighlight = [];\n  var toDownplay = [];\n  zrUtil.each(lastHighlights, function (batchItem, key) {\n    !newHighlights[key] && toDownplay.push(batchItem);\n  });\n  zrUtil.each(newHighlights, function (batchItem, key) {\n    !lastHighlights[key] && toHighlight.push(batchItem);\n  });\n  toDownplay.length && api.dispatchAction({\n    type: 'downplay',\n    escapeConnect: true,\n    batch: toDownplay\n  });\n  toHighlight.length && api.dispatchAction({\n    type: 'highlight',\n    escapeConnect: true,\n    batch: toHighlight\n  });\n}\n\nfunction findInputAxisInfo(inputAxesInfo, axisInfo) {\n  for (var i = 0; i < (inputAxesInfo || []).length; i++) {\n    var inputAxisInfo = inputAxesInfo[i];\n\n    if (axisInfo.axis.dim === inputAxisInfo.axisDim && axisInfo.axis.model.componentIndex === inputAxisInfo.axisIndex) {\n      return inputAxisInfo;\n    }\n  }\n}\n\nfunction makeMapperParam(axisInfo) {\n  var axisModel = axisInfo.axis.model;\n  var item = {};\n  var dim = item.axisDim = axisInfo.axis.dim;\n  item.axisIndex = item[dim + 'AxisIndex'] = axisModel.componentIndex;\n  item.axisName = item[dim + 'AxisName'] = axisModel.name;\n  item.axisId = item[dim + 'AxisId'] = axisModel.id;\n  return item;\n}\n\nfunction illegalPoint(point) {\n  return !point || point[0] == null || isNaN(point[0]) || point[1] == null || isNaN(point[1]);\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nrequire(\"./tree/TreeSeries\");\n\nrequire(\"./tree/TreeView\");\n\nrequire(\"./tree/treeAction\");\n\nvar visualSymbol = require(\"../visual/symbol\");\n\nvar treeLayout = require(\"./tree/treeLayout\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\necharts.registerVisual(visualSymbol('tree', 'circle'));\necharts.registerLayout(treeLayout);","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar textContain = require(\"zrender/lib/contain/text\");\n\nvar formatUtil = require(\"../../util/format\");\n\nvar matrix = require(\"zrender/lib/core/matrix\");\n\nvar axisHelper = require(\"../../coord/axisHelper\");\n\nvar AxisBuilder = require(\"../axis/AxisBuilder\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {module:echarts/model/Model} axisPointerModel\n */\nfunction buildElStyle(axisPointerModel) {\n  var axisPointerType = axisPointerModel.get('type');\n  var styleModel = axisPointerModel.getModel(axisPointerType + 'Style');\n  var style;\n\n  if (axisPointerType === 'line') {\n    style = styleModel.getLineStyle();\n    style.fill = null;\n  } else if (axisPointerType === 'shadow') {\n    style = styleModel.getAreaStyle();\n    style.stroke = null;\n  }\n\n  return style;\n}\n/**\n * @param {Function} labelPos {align, verticalAlign, position}\n */\n\n\nfunction buildLabelElOption(elOption, axisModel, axisPointerModel, api, labelPos) {\n  var value = axisPointerModel.get('value');\n  var text = getValueLabel(value, axisModel.axis, axisModel.ecModel, axisPointerModel.get('seriesDataIndices'), {\n    precision: axisPointerModel.get('label.precision'),\n    formatter: axisPointerModel.get('label.formatter')\n  });\n  var labelModel = axisPointerModel.getModel('label');\n  var paddings = formatUtil.normalizeCssArray(labelModel.get('padding') || 0);\n  var font = labelModel.getFont();\n  var textRect = textContain.getBoundingRect(text, font);\n  var position = labelPos.position;\n  var width = textRect.width + paddings[1] + paddings[3];\n  var height = textRect.height + paddings[0] + paddings[2]; // Adjust by align.\n\n  var align = labelPos.align;\n  align === 'right' && (position[0] -= width);\n  align === 'center' && (position[0] -= width / 2);\n  var verticalAlign = labelPos.verticalAlign;\n  verticalAlign === 'bottom' && (position[1] -= height);\n  verticalAlign === 'middle' && (position[1] -= height / 2); // Not overflow ec container\n\n  confineInContainer(position, width, height, api);\n  var bgColor = labelModel.get('backgroundColor');\n\n  if (!bgColor || bgColor === 'auto') {\n    bgColor = axisModel.get('axisLine.lineStyle.color');\n  }\n\n  elOption.label = {\n    shape: {\n      x: 0,\n      y: 0,\n      width: width,\n      height: height,\n      r: labelModel.get('borderRadius')\n    },\n    position: position.slice(),\n    // TODO: rich\n    style: {\n      text: text,\n      textFont: font,\n      textFill: labelModel.getTextColor(),\n      textPosition: 'inside',\n      textPadding: paddings,\n      fill: bgColor,\n      stroke: labelModel.get('borderColor') || 'transparent',\n      lineWidth: labelModel.get('borderWidth') || 0,\n      shadowBlur: labelModel.get('shadowBlur'),\n      shadowColor: labelModel.get('shadowColor'),\n      shadowOffsetX: labelModel.get('shadowOffsetX'),\n      shadowOffsetY: labelModel.get('shadowOffsetY')\n    },\n    // Lable should be over axisPointer.\n    z2: 10\n  };\n} // Do not overflow ec container\n\n\nfunction confineInContainer(position, width, height, api) {\n  var viewWidth = api.getWidth();\n  var viewHeight = api.getHeight();\n  position[0] = Math.min(position[0] + width, viewWidth) - width;\n  position[1] = Math.min(position[1] + height, viewHeight) - height;\n  position[0] = Math.max(position[0], 0);\n  position[1] = Math.max(position[1], 0);\n}\n/**\n * @param {number} value\n * @param {module:echarts/coord/Axis} axis\n * @param {module:echarts/model/Global} ecModel\n * @param {Object} opt\n * @param {Array.<Object>} seriesDataIndices\n * @param {number|string} opt.precision 'auto' or a number\n * @param {string|Function} opt.formatter label formatter\n */\n\n\nfunction getValueLabel(value, axis, ecModel, seriesDataIndices, opt) {\n  value = axis.scale.parse(value);\n  var text = axis.scale.getLabel( // If `precision` is set, width can be fixed (like '12.00500'), which\n  // helps to debounce when when moving label.\n  value, {\n    precision: opt.precision\n  });\n  var formatter = opt.formatter;\n\n  if (formatter) {\n    var params = {\n      value: axisHelper.getAxisRawValue(axis, value),\n      axisDimension: axis.dim,\n      axisIndex: axis.index,\n      seriesData: []\n    };\n    zrUtil.each(seriesDataIndices, function (idxItem) {\n      var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n      var dataIndex = idxItem.dataIndexInside;\n      var dataParams = series && series.getDataParams(dataIndex);\n      dataParams && params.seriesData.push(dataParams);\n    });\n\n    if (zrUtil.isString(formatter)) {\n      text = formatter.replace('{value}', text);\n    } else if (zrUtil.isFunction(formatter)) {\n      text = formatter(params);\n    }\n  }\n\n  return text;\n}\n/**\n * @param {module:echarts/coord/Axis} axis\n * @param {number} value\n * @param {Object} layoutInfo {\n *  rotation, position, labelOffset, labelDirection, labelMargin\n * }\n */\n\n\nfunction getTransformedPosition(axis, value, layoutInfo) {\n  var transform = matrix.create();\n  matrix.rotate(transform, transform, layoutInfo.rotation);\n  matrix.translate(transform, transform, layoutInfo.position);\n  return graphic.applyTransform([axis.dataToCoord(value), (layoutInfo.labelOffset || 0) + (layoutInfo.labelDirection || 1) * (layoutInfo.labelMargin || 0)], transform);\n}\n\nfunction buildCartesianSingleLabelElOption(value, elOption, layoutInfo, axisModel, axisPointerModel, api) {\n  var textLayout = AxisBuilder.innerTextLayout(layoutInfo.rotation, 0, layoutInfo.labelDirection);\n  layoutInfo.labelMargin = axisPointerModel.get('label.margin');\n  buildLabelElOption(elOption, axisModel, axisPointerModel, api, {\n    position: getTransformedPosition(axisModel.axis, value, layoutInfo),\n    align: textLayout.textAlign,\n    verticalAlign: textLayout.textVerticalAlign\n  });\n}\n/**\n * @param {Array.<number>} p1\n * @param {Array.<number>} p2\n * @param {number} [xDimIndex=0] or 1\n */\n\n\nfunction makeLineShape(p1, p2, xDimIndex) {\n  xDimIndex = xDimIndex || 0;\n  return {\n    x1: p1[xDimIndex],\n    y1: p1[1 - xDimIndex],\n    x2: p2[xDimIndex],\n    y2: p2[1 - xDimIndex]\n  };\n}\n/**\n * @param {Array.<number>} xy\n * @param {Array.<number>} wh\n * @param {number} [xDimIndex=0] or 1\n */\n\n\nfunction makeRectShape(xy, wh, xDimIndex) {\n  xDimIndex = xDimIndex || 0;\n  return {\n    x: xy[xDimIndex],\n    y: xy[1 - xDimIndex],\n    width: wh[xDimIndex],\n    height: wh[1 - xDimIndex]\n  };\n}\n\nfunction makeSectorShape(cx, cy, r0, r, startAngle, endAngle) {\n  return {\n    cx: cx,\n    cy: cy,\n    r0: r0,\n    r: r,\n    startAngle: startAngle,\n    endAngle: endAngle,\n    clockwise: true\n  };\n}\n\nexports.buildElStyle = buildElStyle;\nexports.buildLabelElOption = buildLabelElOption;\nexports.getValueLabel = getValueLabel;\nexports.getTransformedPosition = getTransformedPosition;\nexports.buildCartesianSingleLabelElOption = buildCartesianSingleLabelElOption;\nexports.makeLineShape = makeLineShape;\nexports.makeRectShape = makeRectShape;\nexports.makeSectorShape = makeSectorShape;"],"sourceRoot":""}